<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Changelog (Version History) &mdash; Telethon 0.145 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Wall of Shame" href="wall-of-shame.html" />
    <link rel="prev" title="Telegram API in Other Languages" href="../developing/telegram-api-in-other-languages.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Telethon
          </a>
              <div class="version">
                0.145
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">First Steps</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../basic/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/signing-in.html">Signing In</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/quick-start.html">Quick-Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/updates.html">Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic/next-steps.html">Next Steps</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Quick References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quick-references/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-references/client-reference.html">Client Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-references/events-reference.html">Events Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick-references/objects-reference.html">Objects Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/strings.html">String-based Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/entities.html">Entities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/chats-vs-channels.html">Chats vs Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/updates.html">Updates in Depth</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/sessions.html">Session Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/full-api.html">The Full API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/errors.html">RPC Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/botapi-vs-mtproto.html">HTTP Bot API vs MTProto</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/asyncio.html">Mastering asyncio</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Full API Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../examples/word-of-warning.html">A Word of Warning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/chats-and-channels.html">Working with Chats and Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/users.html">Users</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/working-with-messages.html">Working with messages</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developing/philosophy.html">Philosophy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing/test-servers.html">Test Servers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing/project-structure.html">Project Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing/coding-style.html">Coding Style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing/testing.html">Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing/understanding-the-type-language.html">Understanding the Type Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing/tips-for-porting-the-project.html">Tips for Porting the Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developing/telegram-api-in-other-languages.html">Telegram API in Other Languages</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Changelog (Version History)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#rushed-release-to-fix-login-v1-24">Rushed release to fix login (v1.24)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#breaking-changes">Breaking Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#new-schema-and-bug-fixes-v1-23">New schema and bug fixes (v1.23)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#enhancements">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bug-fixes">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#new-schema-and-bug-fixes-v1-22">New schema and bug fixes (v1.22)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#new-schema-and-qol-improvements-v1-21">New schema and QoL improvements (v1.21)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#additions">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#new-schema-and-qol-improvements-v1-20">New schema and QoL improvements (v1.20)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#new-raw-api-call-methods-v1-19">New raw API call methods (v1.19)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id8">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#new-layer-and-qol-improvements-v1-18">New layer and QoL improvements (v1.18)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id11">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#channel-comments-and-anonymous-admins-v1-17">Channel comments and Anonymous Admins (v1.17)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id14">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id16">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id17">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bug-fixes-v1-16-1">Bug Fixes (v1.16.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id18">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">Bug Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#channel-statistics-v1-16">Channel Statistics (v1.16)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id20">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#qr-login-v1-15">QR login (v1.15)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id22">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id23">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id24">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#minor-quality-of-life-improvements-v1-14">Minor quality of life improvements (v1.14)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id25">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id26">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id27">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bug-fixes-v1-13">Bug Fixes (v1.13)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id28">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bug-fixes-v1-12">Bug Fixes (v1.12)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id29">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bug-fixes-v1-11">Bug Fixes (v1.11)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id30">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id31">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#scheduled-messages-v1-10">Scheduled Messages (v1.10)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id32">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id33">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id34">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#animated-stickers-v1-9">Animated Stickers (v1.9)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id35">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id36">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id37">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#documentation-overhaul-v1-8">Documentation Overhaul (v1.8)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id38">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id39">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id40">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id41">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#internal-changes">Internal Changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fix-up-for-photo-downloads-v1-7-1">Fix-up for Photo Downloads (v1.7.1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#easier-events-v1-7">Easier Events (v1.7)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id42">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id43">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#new-bugs">New bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id44">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id45">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#tidying-up-internals-v1-6">Tidying up Internals (v1.6)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id46">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id47">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id48">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id49">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id50">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#layer-update-v1-5-5">Layer Update (v1.5.5)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id51">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id52">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id53">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bug-fixes-v1-5-3">Bug Fixes (v1.5.3)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id54">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id55">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id56">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id57">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#takeout-sessions-v1-5-2">Takeout Sessions (v1.5.2)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id58">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#object-to-json-v1-5-1">object.to_json() (v1.5.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id59">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id60">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id61">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#polls-with-the-latest-layer-v1-5">Polls with the Latest Layer (v1.5)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id62">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id63">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id64">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id65">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id66">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#error-descriptions-in-csv-files-v1-4-3">Error Descriptions in CSV files (v1.4.3)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id67">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id68">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id69">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bug-fixes-v1-4-2">Bug Fixes (v1.4.2)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id70">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id71">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#connection-overhaul-v1-4">Connection Overhaul (v1.4)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id72">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id73">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id74">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id75">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#event-templates-v1-3">Event Templates (v1.3)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id76">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id77">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id78">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id79">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id80">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#conversations-string-sessions-and-more-v1-2">Conversations, String Sessions and More (v1.2)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id81">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id82">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id83">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#better-custom-message-v1-1-1">Better Custom Message (v1.1.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id84">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bot-friendly-v1-1">Bot Friendly (v1.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id85">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id86">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id87">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id88">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#new-http-s-connection-mode-v1-0-4">New HTTP(S) Connection Mode (v1.0.4)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id89">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id90">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id91">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id92">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#iterate-messages-in-reverse-v1-0-3">Iterate Messages in Reverse (v1.0.3)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id93">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id94">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bug-fixes-v1-0-2">Bug Fixes (v1.0.2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bug-fixes-v1-0-1">Bug Fixes (v1.0.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id95">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#synchronous-magic-v1-0">Synchronous magic (v1.0)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id96">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id97">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id98">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id99">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#core-rewrite-in-asyncio-v1-0-rc1">Core Rewrite in asyncio (v1.0-rc1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id100">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id101">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id102">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id103">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id104">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#custom-message-class-v0-19-1">Custom Message class (v0.19.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id105">Breaking Changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id106">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id107">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id108">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id109">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#catching-up-on-updates-v0-19">Catching up on Updates (v0.19)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id110">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id111">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id112">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id113">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#pickle-able-objects-v0-18-3">Pickle-able objects (v0.18.3)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id114">Breaking changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id115">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id116">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id117">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id118">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#several-bug-fixes-v0-18-2">Several bug fixes (v0.18.2)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id119">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id120">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#iterator-methods-v0-18-1">Iterator methods (v0.18.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id121">Breaking changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id122">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id123">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id124">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id125">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sessions-overhaul-v0-18">Sessions overhaul (v0.18)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id126">Breaking changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id127">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id128">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id129">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#further-easing-library-usage-v0-17-4">Further easing library usage (v0.17.4)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id130">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id131">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id132">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#new-small-convenience-functions-v0-17-3">New small convenience functions (v0.17.3)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id133">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id134">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id135">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#new-small-convenience-functions-v0-17-2">New small convenience functions (v0.17.2)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id136">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id137">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id138">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#updates-as-events-v0-17-1">Updates as Events (v0.17.1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trust-the-server-with-updates-v0-17">Trust the Server with Updates (v0.17)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id139">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id140">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id141">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#new-resolve-method-v0-16-2">New <code class="docutils literal notranslate"><span class="pre">.resolve()</span></code> method (v0.16.2)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id142">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id143">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id144">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id145">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mtproto-2-0-v0-16-1">MtProto 2.0 (v0.16.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id146">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id147">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id148">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#sessions-as-sqlite-databases-v0-16">Sessions as sqlite databases (v0.16)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id149">Breaking changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id150">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id151">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id152">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#ipv6-support-v0-15-5">IPv6 support (v0.15.5)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id154">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id155">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id156">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#general-enhancements-v0-15-4">General enhancements (v0.15.4)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id157">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id158">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id159">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bug-fixes-with-updates-v0-15-3">Bug fixes with updates (v0.15.3)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#bug-fixes-and-new-small-features-v0-15-2">Bug fixes and new small features (v0.15.2)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id160">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id161">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id162">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#custom-entity-database-v0-15-1">Custom Entity Database (v0.15.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id163">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id164">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id165">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#updates-overhaul-update-v0-15">Updates Overhaul Update (v0.15)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id166">Breaking changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id167">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id168">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id169">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#serialization-bug-fixes-v0-14-2">Serialization bug fixes (v0.14.2)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id170">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id171">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#farewell-binarywriter-v0-14-1">Farewell, BinaryWriter (v0.14.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id172">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id173">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#several-requests-at-once-and-upload-compression-v0-14">Several requests at once and upload compression (v0.14)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id174">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id175">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id176">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#quick-fix-up-v0-13-6">Quick fix-up (v0.13.6)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#attempts-at-more-stability-v0-13-5">Attempts at more stability (v0.13.5)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id177">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id178">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id179">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#more-bug-fixes-and-enhancements-v0-13-4">More bug fixes and enhancements (v0.13.4)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id180">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id181">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id182">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bug-fixes-and-enhancements-v0-13-3">Bug fixes and enhancements (v0.13.3)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id183">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id184">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#new-way-to-work-with-updates-v0-13-2">New way to work with updates (v0.13.2)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id185">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#invoke-other-requests-from-within-update-callbacks-v0-13-1">Invoke other requests from within update callbacks (v0.13.1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#connection-modes-v0-13">Connection modes (v0.13)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id186">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id187">Enhancements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deprecation">Deprecation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#added-verification-for-cdn-file-v0-12-2">Added verification for CDN file (v0.12.2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cdn-support-v0-12-1">CDN support (v0.12.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id188">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#newbie-friendly-update-v0-12">Newbie friendly update (v0.12)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id189">Breaking changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id190">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id191">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#get-input-now-works-with-vectors-v0-11-5">get_input_* now works with vectors (v0.11.5)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#get-input-everywhere-v0-11-4">get_input_* everywhere (v0.11.4)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#quick-send-message-fix-v0-11-3">Quick .send_message() fix (v0.11.3)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#callable-telegramclient-v0-11-2">Callable TelegramClient (v0.11.2)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#bugs-fixes">Bugs fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#improvements-to-the-updates-v0-11-1">Improvements to the updates (v0.11.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id192">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#support-for-parallel-connections-v0-11">Support for parallel connections (v0.11)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id193">Breaking changes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id194">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id195">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id196">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#json-session-file-v0-10-1">JSON session file (v0.10.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id197">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id198">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#full-support-for-different-dcs-and-stable-v0-10">Full support for different DCs and ++stable (v0.10)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id199">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#stability-improvements-v0-9-1">Stability improvements (v0.9.1)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id200">Enhancements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#general-improvements-v0-9">General improvements (v0.9)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id201">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id202">Bug fixes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id203">Internal changes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#bot-login-and-proxy-support-v0-8">Bot login and proxy support (v0.8)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id204">Additions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id205">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#long-run-bug-fix-v0-7-1">Long-run bug fix (v0.7.1)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#two-factor-authentication-v0-7">Two factor authentication (v0.7)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updated-pip-version-v0-6">Updated pip version (v0.6)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ready-pip-go-v0-5">Ready, pip, go! (v0.5)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#made-interactivetelegramclient-cool-v0-4">Made InteractiveTelegramClient cool (v0.4)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#media-revolution-and-improvements-to-update-handling-v0-3">Media revolution and improvements to update handling! (v0.3)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#handle-updates-in-their-own-thread-v0-2">Handle updates in their own thread! (v0.2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#first-working-alpha-version-v0-1">First working alpha version! (v0.1)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="wall-of-shame.html">Wall of Shame</a></li>
<li class="toctree-l1"><a class="reference internal" href="compatibility-and-convenience.html">Compatibility and Convenience</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Telethon Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/client.html">TelegramClient</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/events.html">Update Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/custom.html">Custom package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/utils.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/errors.html">API Errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/sessions.html">Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/network.html">Connection Modes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/helpers.html">Helpers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Telethon</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Changelog (Version History)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/misc/changelog.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="changelog-version-history">
<span id="changelog"></span><h1><a class="toc-backref" href="#id206">Changelog (Version History)</a><a class="headerlink" href="#changelog-version-history" title="Permalink to this heading"></a></h1>
<p>This page lists all the available versions of the library,
in chronological order. You should read this when upgrading
the library to know where your code can break, and where
it can take advantage of new goodies!</p>
<div class="contents topic" id="list-of-all-versions">
<p class="topic-title">List of All Versions</p>
<ul class="simple">
<li><p><a class="reference internal" href="#changelog-version-history" id="id206">Changelog (Version History)</a></p>
<ul>
<li><p><a class="reference internal" href="#rushed-release-to-fix-login-v1-24" id="id207">Rushed release to fix login (v1.24)</a></p>
<ul>
<li><p><a class="reference internal" href="#breaking-changes" id="id208">Breaking Changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#new-schema-and-bug-fixes-v1-23" id="id209">New schema and bug fixes (v1.23)</a></p>
<ul>
<li><p><a class="reference internal" href="#enhancements" id="id210">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes" id="id211">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#new-schema-and-bug-fixes-v1-22" id="id212">New schema and bug fixes (v1.22)</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id213">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id214">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#new-schema-and-qol-improvements-v1-21" id="id215">New schema and QoL improvements (v1.21)</a></p>
<ul>
<li><p><a class="reference internal" href="#additions" id="id216">Additions</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id217">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id218">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#new-schema-and-qol-improvements-v1-20" id="id219">New schema and QoL improvements (v1.20)</a></p>
<ul>
<li><p><a class="reference internal" href="#id5" id="id220">Additions</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id221">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id7" id="id222">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#new-raw-api-call-methods-v1-19" id="id223">New raw API call methods (v1.19)</a></p>
<ul>
<li><p><a class="reference internal" href="#id8" id="id224">Additions</a></p></li>
<li><p><a class="reference internal" href="#id9" id="id225">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id226">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#new-layer-and-qol-improvements-v1-18" id="id227">New layer and QoL improvements (v1.18)</a></p>
<ul>
<li><p><a class="reference internal" href="#id11" id="id228">Additions</a></p></li>
<li><p><a class="reference internal" href="#id12" id="id229">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id13" id="id230">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#channel-comments-and-anonymous-admins-v1-17" id="id231">Channel comments and Anonymous Admins (v1.17)</a></p>
<ul>
<li><p><a class="reference internal" href="#id14" id="id232">Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#id15" id="id233">Additions</a></p></li>
<li><p><a class="reference internal" href="#id16" id="id234">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id17" id="id235">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bug-fixes-v1-16-1" id="id236">Bug Fixes (v1.16.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id18" id="id237">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id19" id="id238">Bug Fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#channel-statistics-v1-16" id="id239">Channel Statistics (v1.16)</a></p>
<ul>
<li><p><a class="reference internal" href="#id20" id="id240">Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#id21" id="id241">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#qr-login-v1-15" id="id242">QR login (v1.15)</a></p>
<ul>
<li><p><a class="reference internal" href="#id22" id="id243">Additions</a></p></li>
<li><p><a class="reference internal" href="#id23" id="id244">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id24" id="id245">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#minor-quality-of-life-improvements-v1-14" id="id246">Minor quality of life improvements (v1.14)</a></p>
<ul>
<li><p><a class="reference internal" href="#id25" id="id247">Additions</a></p></li>
<li><p><a class="reference internal" href="#id26" id="id248">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id27" id="id249">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bug-fixes-v1-13" id="id250">Bug Fixes (v1.13)</a></p>
<ul>
<li><p><a class="reference internal" href="#id28" id="id251">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bug-fixes-v1-12" id="id252">Bug Fixes (v1.12)</a></p>
<ul>
<li><p><a class="reference internal" href="#id29" id="id253">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bug-fixes-v1-11" id="id254">Bug Fixes (v1.11)</a></p>
<ul>
<li><p><a class="reference internal" href="#id30" id="id255">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id31" id="id256">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#scheduled-messages-v1-10" id="id257">Scheduled Messages (v1.10)</a></p>
<ul>
<li><p><a class="reference internal" href="#id32" id="id258">Additions</a></p></li>
<li><p><a class="reference internal" href="#id33" id="id259">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id34" id="id260">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#animated-stickers-v1-9" id="id261">Animated Stickers (v1.9)</a></p>
<ul>
<li><p><a class="reference internal" href="#id35" id="id262">Additions</a></p></li>
<li><p><a class="reference internal" href="#id36" id="id263">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id37" id="id264">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#documentation-overhaul-v1-8" id="id265">Documentation Overhaul (v1.8)</a></p>
<ul>
<li><p><a class="reference internal" href="#id38" id="id266">Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#id39" id="id267">Additions</a></p></li>
<li><p><a class="reference internal" href="#id40" id="id268">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id41" id="id269">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#internal-changes" id="id270">Internal Changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#fix-up-for-photo-downloads-v1-7-1" id="id271">Fix-up for Photo Downloads (v1.7.1)</a></p></li>
<li><p><a class="reference internal" href="#easier-events-v1-7" id="id272">Easier Events (v1.7)</a></p>
<ul>
<li><p><a class="reference internal" href="#id42" id="id273">Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#id43" id="id274">Additions</a></p></li>
<li><p><a class="reference internal" href="#new-bugs" id="id275">New bugs</a></p></li>
<li><p><a class="reference internal" href="#id44" id="id276">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id45" id="id277">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#tidying-up-internals-v1-6" id="id278">Tidying up Internals (v1.6)</a></p>
<ul>
<li><p><a class="reference internal" href="#id46" id="id279">Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#id47" id="id280">Additions</a></p></li>
<li><p><a class="reference internal" href="#id48" id="id281">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id49" id="id282">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id50" id="id283">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#layer-update-v1-5-5" id="id284">Layer Update (v1.5.5)</a></p>
<ul>
<li><p><a class="reference internal" href="#id51" id="id285">Additions</a></p></li>
<li><p><a class="reference internal" href="#id52" id="id286">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id53" id="id287">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bug-fixes-v1-5-3" id="id288">Bug Fixes (v1.5.3)</a></p>
<ul>
<li><p><a class="reference internal" href="#id54" id="id289">Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#id55" id="id290">Additions</a></p></li>
<li><p><a class="reference internal" href="#id56" id="id291">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id57" id="id292">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#takeout-sessions-v1-5-2" id="id293">Takeout Sessions (v1.5.2)</a></p>
<ul>
<li><p><a class="reference internal" href="#id58" id="id294">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#object-to-json-v1-5-1" id="id295">object.to_json() (v1.5.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id59" id="id296">Additions</a></p></li>
<li><p><a class="reference internal" href="#id60" id="id297">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id61" id="id298">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#polls-with-the-latest-layer-v1-5" id="id299">Polls with the Latest Layer (v1.5)</a></p>
<ul>
<li><p><a class="reference internal" href="#id62" id="id300">Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#id63" id="id301">Additions</a></p></li>
<li><p><a class="reference internal" href="#id64" id="id302">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id65" id="id303">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id66" id="id304">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#error-descriptions-in-csv-files-v1-4-3" id="id305">Error Descriptions in CSV files (v1.4.3)</a></p>
<ul>
<li><p><a class="reference internal" href="#id67" id="id306">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id68" id="id307">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id69" id="id308">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bug-fixes-v1-4-2" id="id309">Bug Fixes (v1.4.2)</a></p>
<ul>
<li><p><a class="reference internal" href="#id70" id="id310">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id71" id="id311">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#connection-overhaul-v1-4" id="id312">Connection Overhaul (v1.4)</a></p>
<ul>
<li><p><a class="reference internal" href="#id72" id="id313">Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#id73" id="id314">Additions</a></p></li>
<li><p><a class="reference internal" href="#id74" id="id315">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id75" id="id316">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#event-templates-v1-3" id="id317">Event Templates (v1.3)</a></p>
<ul>
<li><p><a class="reference internal" href="#id76" id="id318">Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#id77" id="id319">Additions</a></p></li>
<li><p><a class="reference internal" href="#id78" id="id320">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id79" id="id321">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id80" id="id322">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#conversations-string-sessions-and-more-v1-2" id="id323">Conversations, String Sessions and More (v1.2)</a></p>
<ul>
<li><p><a class="reference internal" href="#id81" id="id324">Additions</a></p></li>
<li><p><a class="reference internal" href="#id82" id="id325">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id83" id="id326">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#better-custom-message-v1-1-1" id="id327">Better Custom Message (v1.1.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id84" id="id328">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bot-friendly-v1-1" id="id329">Bot Friendly (v1.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id85" id="id330">Additions</a></p></li>
<li><p><a class="reference internal" href="#id86" id="id331">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id87" id="id332">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id88" id="id333">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#new-http-s-connection-mode-v1-0-4" id="id334">New HTTP(S) Connection Mode (v1.0.4)</a></p>
<ul>
<li><p><a class="reference internal" href="#id89" id="id335">Additions</a></p></li>
<li><p><a class="reference internal" href="#id90" id="id336">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id91" id="id337">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id92" id="id338">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#iterate-messages-in-reverse-v1-0-3" id="id339">Iterate Messages in Reverse (v1.0.3)</a></p>
<ul>
<li><p><a class="reference internal" href="#id93" id="id340">Additions</a></p></li>
<li><p><a class="reference internal" href="#id94" id="id341">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bug-fixes-v1-0-2" id="id342">Bug Fixes (v1.0.2)</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes-v1-0-1" id="id343">Bug Fixes (v1.0.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id95" id="id344">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#synchronous-magic-v1-0" id="id345">Synchronous magic (v1.0)</a></p>
<ul>
<li><p><a class="reference internal" href="#id96" id="id346">Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#id97" id="id347">Additions</a></p></li>
<li><p><a class="reference internal" href="#id98" id="id348">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id99" id="id349">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#core-rewrite-in-asyncio-v1-0-rc1" id="id350">Core Rewrite in asyncio (v1.0-rc1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id100" id="id351">Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#id101" id="id352">Additions</a></p></li>
<li><p><a class="reference internal" href="#id102" id="id353">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id103" id="id354">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id104" id="id355">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#custom-message-class-v0-19-1" id="id356">Custom Message class (v0.19.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id105" id="id357">Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#id106" id="id358">Additions</a></p></li>
<li><p><a class="reference internal" href="#id107" id="id359">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id108" id="id360">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id109" id="id361">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#catching-up-on-updates-v0-19" id="id362">Catching up on Updates (v0.19)</a></p>
<ul>
<li><p><a class="reference internal" href="#id110" id="id363">Additions</a></p></li>
<li><p><a class="reference internal" href="#id111" id="id364">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id112" id="id365">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id113" id="id366">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#pickle-able-objects-v0-18-3" id="id367">Pickle-able objects (v0.18.3)</a></p>
<ul>
<li><p><a class="reference internal" href="#id114" id="id368">Breaking changes</a></p></li>
<li><p><a class="reference internal" href="#id115" id="id369">Additions</a></p></li>
<li><p><a class="reference internal" href="#id116" id="id370">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id117" id="id371">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id118" id="id372">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#several-bug-fixes-v0-18-2" id="id373">Several bug fixes (v0.18.2)</a></p>
<ul>
<li><p><a class="reference internal" href="#id119" id="id374">Additions</a></p></li>
<li><p><a class="reference internal" href="#id120" id="id375">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#iterator-methods-v0-18-1" id="id376">Iterator methods (v0.18.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id121" id="id377">Breaking changes</a></p></li>
<li><p><a class="reference internal" href="#id122" id="id378">Additions</a></p></li>
<li><p><a class="reference internal" href="#id123" id="id379">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id124" id="id380">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id125" id="id381">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#sessions-overhaul-v0-18" id="id382">Sessions overhaul (v0.18)</a></p>
<ul>
<li><p><a class="reference internal" href="#id126" id="id383">Breaking changes</a></p></li>
<li><p><a class="reference internal" href="#id127" id="id384">Additions</a></p></li>
<li><p><a class="reference internal" href="#id128" id="id385">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id129" id="id386">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#further-easing-library-usage-v0-17-4" id="id387">Further easing library usage (v0.17.4)</a></p>
<ul>
<li><p><a class="reference internal" href="#id130" id="id388">Additions</a></p></li>
<li><p><a class="reference internal" href="#id131" id="id389">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id132" id="id390">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#new-small-convenience-functions-v0-17-3" id="id391">New small convenience functions (v0.17.3)</a></p>
<ul>
<li><p><a class="reference internal" href="#id133" id="id392">Additions</a></p></li>
<li><p><a class="reference internal" href="#id134" id="id393">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id135" id="id394">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#new-small-convenience-functions-v0-17-2" id="id395">New small convenience functions (v0.17.2)</a></p>
<ul>
<li><p><a class="reference internal" href="#id136" id="id396">Additions</a></p></li>
<li><p><a class="reference internal" href="#id137" id="id397">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id138" id="id398">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#updates-as-events-v0-17-1" id="id399">Updates as Events (v0.17.1)</a></p></li>
<li><p><a class="reference internal" href="#trust-the-server-with-updates-v0-17" id="id400">Trust the Server with Updates (v0.17)</a></p>
<ul>
<li><p><a class="reference internal" href="#id139" id="id401">Additions</a></p></li>
<li><p><a class="reference internal" href="#id140" id="id402">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id141" id="id403">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#new-resolve-method-v0-16-2" id="id404">New <code class="docutils literal notranslate"><span class="pre">.resolve()</span></code> method (v0.16.2)</a></p>
<ul>
<li><p><a class="reference internal" href="#id142" id="id405">Additions</a></p></li>
<li><p><a class="reference internal" href="#id143" id="id406">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id144" id="id407">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id145" id="id408">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#mtproto-2-0-v0-16-1" id="id409">MtProto 2.0 (v0.16.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id146" id="id410">Additions</a></p></li>
<li><p><a class="reference internal" href="#id147" id="id411">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id148" id="id412">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#sessions-as-sqlite-databases-v0-16" id="id413">Sessions as sqlite databases (v0.16)</a></p>
<ul>
<li><p><a class="reference internal" href="#id149" id="id414">Breaking changes</a></p></li>
<li><p><a class="reference internal" href="#id150" id="id415">Additions</a></p></li>
<li><p><a class="reference internal" href="#id151" id="id416">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id152" id="id417">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#ipv6-support-v0-15-5" id="id418">IPv6 support (v0.15.5)</a></p>
<ul>
<li><p><a class="reference internal" href="#id154" id="id419">Additions</a></p></li>
<li><p><a class="reference internal" href="#id155" id="id420">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id156" id="id421">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#general-enhancements-v0-15-4" id="id422">General enhancements (v0.15.4)</a></p>
<ul>
<li><p><a class="reference internal" href="#id157" id="id423">Additions</a></p></li>
<li><p><a class="reference internal" href="#id158" id="id424">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id159" id="id425">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bug-fixes-with-updates-v0-15-3" id="id426">Bug fixes with updates (v0.15.3)</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes-and-new-small-features-v0-15-2" id="id427">Bug fixes and new small features (v0.15.2)</a></p>
<ul>
<li><p><a class="reference internal" href="#id160" id="id428">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id161" id="id429">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id162" id="id430">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#custom-entity-database-v0-15-1" id="id431">Custom Entity Database (v0.15.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id163" id="id432">Additions</a></p></li>
<li><p><a class="reference internal" href="#id164" id="id433">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id165" id="id434">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#updates-overhaul-update-v0-15" id="id435">Updates Overhaul Update (v0.15)</a></p>
<ul>
<li><p><a class="reference internal" href="#id166" id="id436">Breaking changes</a></p></li>
<li><p><a class="reference internal" href="#id167" id="id437">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id168" id="id438">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id169" id="id439">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#serialization-bug-fixes-v0-14-2" id="id440">Serialization bug fixes (v0.14.2)</a></p>
<ul>
<li><p><a class="reference internal" href="#id170" id="id441">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id171" id="id442">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#farewell-binarywriter-v0-14-1" id="id443">Farewell, BinaryWriter (v0.14.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id172" id="id444">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id173" id="id445">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#several-requests-at-once-and-upload-compression-v0-14" id="id446">Several requests at once and upload compression (v0.14)</a></p>
<ul>
<li><p><a class="reference internal" href="#id174" id="id447">Additions</a></p></li>
<li><p><a class="reference internal" href="#id175" id="id448">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id176" id="id449">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#quick-fix-up-v0-13-6" id="id450">Quick fix-up (v0.13.6)</a></p></li>
<li><p><a class="reference internal" href="#attempts-at-more-stability-v0-13-5" id="id451">Attempts at more stability (v0.13.5)</a></p>
<ul>
<li><p><a class="reference internal" href="#id177" id="id452">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id178" id="id453">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#id179" id="id454">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#more-bug-fixes-and-enhancements-v0-13-4" id="id455">More bug fixes and enhancements (v0.13.4)</a></p>
<ul>
<li><p><a class="reference internal" href="#id180" id="id456">Additions</a></p></li>
<li><p><a class="reference internal" href="#id181" id="id457">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id182" id="id458">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bug-fixes-and-enhancements-v0-13-3" id="id459">Bug fixes and enhancements (v0.13.3)</a></p>
<ul>
<li><p><a class="reference internal" href="#id183" id="id460">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id184" id="id461">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#new-way-to-work-with-updates-v0-13-2" id="id462">New way to work with updates (v0.13.2)</a></p>
<ul>
<li><p><a class="reference internal" href="#id185" id="id463">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#invoke-other-requests-from-within-update-callbacks-v0-13-1" id="id464">Invoke other requests from within update callbacks (v0.13.1)</a></p></li>
<li><p><a class="reference internal" href="#connection-modes-v0-13" id="id465">Connection modes (v0.13)</a></p>
<ul>
<li><p><a class="reference internal" href="#id186" id="id466">Additions</a></p></li>
<li><p><a class="reference internal" href="#id187" id="id467">Enhancements</a></p></li>
<li><p><a class="reference internal" href="#deprecation" id="id468">Deprecation</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#added-verification-for-cdn-file-v0-12-2" id="id469">Added verification for CDN file (v0.12.2)</a></p></li>
<li><p><a class="reference internal" href="#cdn-support-v0-12-1" id="id470">CDN support (v0.12.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id188" id="id471">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#newbie-friendly-update-v0-12" id="id472">Newbie friendly update (v0.12)</a></p>
<ul>
<li><p><a class="reference internal" href="#id189" id="id473">Breaking changes</a></p></li>
<li><p><a class="reference internal" href="#id190" id="id474">Additions</a></p></li>
<li><p><a class="reference internal" href="#id191" id="id475">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#get-input-now-works-with-vectors-v0-11-5" id="id476">get_input_* now works with vectors (v0.11.5)</a></p></li>
<li><p><a class="reference internal" href="#get-input-everywhere-v0-11-4" id="id477">get_input_* everywhere (v0.11.4)</a></p></li>
<li><p><a class="reference internal" href="#quick-send-message-fix-v0-11-3" id="id478">Quick .send_message() fix (v0.11.3)</a></p></li>
<li><p><a class="reference internal" href="#callable-telegramclient-v0-11-2" id="id479">Callable TelegramClient (v0.11.2)</a></p>
<ul>
<li><p><a class="reference internal" href="#bugs-fixes" id="id480">Bugs fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#improvements-to-the-updates-v0-11-1" id="id481">Improvements to the updates (v0.11.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id192" id="id482">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#support-for-parallel-connections-v0-11" id="id483">Support for parallel connections (v0.11)</a></p>
<ul>
<li><p><a class="reference internal" href="#id193" id="id484">Breaking changes</a></p></li>
<li><p><a class="reference internal" href="#id194" id="id485">Additions</a></p></li>
<li><p><a class="reference internal" href="#id195" id="id486">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id196" id="id487">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#json-session-file-v0-10-1" id="id488">JSON session file (v0.10.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id197" id="id489">Additions</a></p></li>
<li><p><a class="reference internal" href="#id198" id="id490">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#full-support-for-different-dcs-and-stable-v0-10" id="id491">Full support for different DCs and ++stable (v0.10)</a></p>
<ul>
<li><p><a class="reference internal" href="#id199" id="id492">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#stability-improvements-v0-9-1" id="id493">Stability improvements (v0.9.1)</a></p>
<ul>
<li><p><a class="reference internal" href="#id200" id="id494">Enhancements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#general-improvements-v0-9" id="id495">General improvements (v0.9)</a></p>
<ul>
<li><p><a class="reference internal" href="#id201" id="id496">Additions</a></p></li>
<li><p><a class="reference internal" href="#id202" id="id497">Bug fixes</a></p></li>
<li><p><a class="reference internal" href="#id203" id="id498">Internal changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#bot-login-and-proxy-support-v0-8" id="id499">Bot login and proxy support (v0.8)</a></p>
<ul>
<li><p><a class="reference internal" href="#id204" id="id500">Additions</a></p></li>
<li><p><a class="reference internal" href="#id205" id="id501">Bug fixes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#long-run-bug-fix-v0-7-1" id="id502">Long-run bug fix (v0.7.1)</a></p></li>
<li><p><a class="reference internal" href="#two-factor-authentication-v0-7" id="id503">Two factor authentication (v0.7)</a></p></li>
<li><p><a class="reference internal" href="#updated-pip-version-v0-6" id="id504">Updated pip version (v0.6)</a></p></li>
<li><p><a class="reference internal" href="#ready-pip-go-v0-5" id="id505">Ready, pip, go! (v0.5)</a></p></li>
<li><p><a class="reference internal" href="#made-interactivetelegramclient-cool-v0-4" id="id506">Made InteractiveTelegramClient cool (v0.4)</a></p></li>
<li><p><a class="reference internal" href="#media-revolution-and-improvements-to-update-handling-v0-3" id="id507">Media revolution and improvements to update handling! (v0.3)</a></p></li>
<li><p><a class="reference internal" href="#handle-updates-in-their-own-thread-v0-2" id="id508">Handle updates in their own thread! (v0.2)</a></p></li>
<li><p><a class="reference internal" href="#first-working-alpha-version-v0-1" id="id509">First working alpha version! (v0.1)</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="rushed-release-to-fix-login-v1-24">
<h2><a class="toc-backref" href="#id207">Rushed release to fix login (v1.24)</a><a class="headerlink" href="#rushed-release-to-fix-login-v1-24" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 133</p></td>
</tr>
</tbody>
</table>
<p>This is a rushed release. It contains a layer recent enough to not fail with
<code class="docutils literal notranslate"><span class="pre">UPDATE_APP_TO_LOGIN</span></code>, but still not the latest, to avoid breaking more
than necessary.</p>
<section id="breaking-changes">
<h3><a class="toc-backref" href="#id208">Breaking Changes</a><a class="headerlink" href="#breaking-changes" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The biggest change is user identifiers (and chat identifiers, and others)
<strong>now use up to 64 bits</strong>, rather than 32. If you were storing them in some
storage with fixed size, you may need to update (such as database tables
storing only integers).</p></li>
</ul>
<p>There have been other changes which I currently don’t have the time to document.
You can refer to the following link to see them early:
<a class="reference external" href="https://github.com/LonamiWebs/Telethon/compare/v1.23.0...v1.24.0">https://github.com/LonamiWebs/Telethon/compare/v1.23.0…v1.24.0</a></p>
</section>
</section>
<section id="new-schema-and-bug-fixes-v1-23">
<h2><a class="toc-backref" href="#id209">New schema and bug fixes (v1.23)</a><a class="headerlink" href="#new-schema-and-bug-fixes-v1-23" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 130</p></td>
</tr>
</tbody>
</table>
<p><a class="reference external" href="https://diff.telethon.dev/?from=129&amp;to=130">View new and changed raw API methods</a>.</p>
<section id="enhancements">
<h3><a class="toc-backref" href="#id210">Enhancements</a><a class="headerlink" href="#enhancements" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.pin_message()</span></code>
can now pin on a single side in PMs.</p></li>
<li><p>Iterating participants should now be less expensive floodwait-wise.</p></li>
</ul>
</section>
<section id="bug-fixes">
<h3><a class="toc-backref" href="#id211">Bug fixes</a><a class="headerlink" href="#bug-fixes" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The QR login URL was being encoded incorrectly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">force_document</span></code> was being ignored in inline queries for document.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">manage_call</span></code> permission was accidentally set to <code class="docutils literal notranslate"><span class="pre">True</span></code> by default.</p></li>
</ul>
</section>
</section>
<section id="new-schema-and-bug-fixes-v1-22">
<h2><a class="toc-backref" href="#id212">New schema and bug fixes (v1.22)</a><a class="headerlink" href="#new-schema-and-bug-fixes-v1-22" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 129</p></td>
</tr>
</tbody>
</table>
<p><a class="reference external" href="https://diff.telethon.dev/?from=125&amp;to=129">View new and changed raw API methods</a>.</p>
<section id="id1">
<h3><a class="toc-backref" href="#id213">Enhancements</a><a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>You can now specify a message in <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_stats()</span></code>.</p></li>
<li><p>Metadata extraction from audio files with <code class="docutils literal notranslate"><span class="pre">hachoir</span></code> now recognises “artist”.</p></li>
<li><p>Get default chat permissions by not supplying a user to <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_permissions()</span></code>.</p></li>
<li><p>You may now use <code class="docutils literal notranslate"><span class="pre">thumb</span></code> when editing messages.</p></li>
</ul>
</section>
<section id="id2">
<h3><a class="toc-backref" href="#id214">Bug fixes</a><a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fixes regarding bot markup in messages.</p></li>
<li><p>Gracefully handle <a class="reference external" href="https://tl.telethon.dev/?q=ChannelForbidden">ChannelForbidden</a> in <code class="docutils literal notranslate"><span class="pre">get_sender</span></code>.</p></li>
</ul>
<p>And from v1.21.1:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">file.width</span></code> and <code class="docutils literal notranslate"><span class="pre">.height</span></code> was not working correctly in photos.</p></li>
<li><p>Raw API was mis-interpreting <code class="docutils literal notranslate"><span class="pre">False</span></code> values on boolean flag parameters.</p></li>
</ul>
</section>
</section>
<section id="new-schema-and-qol-improvements-v1-21">
<h2><a class="toc-backref" href="#id215">New schema and QoL improvements (v1.21)</a><a class="headerlink" href="#new-schema-and-qol-improvements-v1-21" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 125</p></td>
</tr>
</tbody>
</table>
<p><a class="reference external" href="https://diff.telethon.dev/?from=124&amp;to=125">View new and changed raw API methods</a>.</p>
<p>Not many changes in this release, mostly the layer change. Lately quite a few
people have been reporting <code class="xref py py-obj docutils literal notranslate"><span class="pre">TypeNotFoundError</span></code>, which occurs when the server
<strong>sends types that it shouldn’t</strong>. This can happen when Telegram decides to
add a new, incomplete layer, and then they change the layer without bumping
the layer number (so some constructor IDs no longer match and the error
occurs). This layer change
<a class="reference external" href="https://github.com/LonamiWebs/Telethon/issues/1724">should fix it</a>.</p>
<section id="additions">
<h3><a class="toc-backref" href="#id216">Additions</a><a class="headerlink" href="#additions" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Message.click()</span></code> now supports
a <code class="docutils literal notranslate"><span class="pre">password</span></code> parameter, needed when doing things like changing the owner
of a bot via <a class="reference external" href="https://t.me/BotFather">&#64;BotFather</a>.</p></li>
</ul>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id217">Enhancements</a><a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tgcrypto</span></code> will now be used for encryption when installed.</p></li>
</ul>
</section>
<section id="id4">
<h3><a class="toc-backref" href="#id218">Bug fixes</a><a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Message.edit</span></code> wasn’t working in
your own chat on events other than <code class="docutils literal notranslate"><span class="pre">NewMessage</span></code>.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.delete_dialog()</span></code>
was not working on chats.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">events.UserUpdate</span></code> should now handle channels’ typing status.</p></li>
<li><p><a class="reference external" href="https://tl.telethon.dev/?q=InputNotifyPeer">InputNotifyPeer</a> auto-cast should now work on other <code class="docutils literal notranslate"><span class="pre">TLObject</span></code>.</p></li>
<li><p>For some objects, <code class="docutils literal notranslate"><span class="pre">False</span></code> was not correctly serialized.</p></li>
</ul>
</section>
</section>
<section id="new-schema-and-qol-improvements-v1-20">
<h2><a class="toc-backref" href="#id219">New schema and QoL improvements (v1.20)</a><a class="headerlink" href="#new-schema-and-qol-improvements-v1-20" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 124</p></td>
</tr>
</tbody>
</table>
<p><a class="reference external" href="https://diff.telethon.dev/?from=122&amp;to=124">View new and changed raw API methods</a>.</p>
<p>A bit late to the party, but Telethon now offers a convenient way to comment
on channel posts. It works very similar to <code class="docutils literal notranslate"><span class="pre">reply_to</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="s1">&#39;Great update!&#39;</span><span class="p">,</span> <span class="n">comment_to</span><span class="o">=</span><span class="mi">1134</span><span class="p">)</span>
</pre></div>
</div>
<p>This code will leave a comment to the channel post with ID <code class="docutils literal notranslate"><span class="pre">1134</span></code> in
<code class="docutils literal notranslate"><span class="pre">channel</span></code>.</p>
<p>In addition, the library now logs warning or error messages to <code class="docutils literal notranslate"><span class="pre">stderr</span></code> by
default! You no longer should be left wondering “why isn’t my event handler
working” if you forgot to configure logging. It took so long for this change
to arrive because nobody noticed that Telethon was using a
<code class="docutils literal notranslate"><span class="pre">logging.NullHandler</span></code> when it really shouldn’t have.</p>
<p>If you want the old behaviour of no messages being logged, you can configure
<a class="reference external" href="https://docs.python.org/3/library/logging.html#module-logging" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">logging</span></code></a> to <code class="docutils literal notranslate"><span class="pre">CRITICAL</span></code> severity:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">CRITICAL</span><span class="p">)</span>
</pre></div>
</div>
<p>This is not considered a breaking change because <code class="docutils literal notranslate"><span class="pre">stderr</span></code> should only be
used for logging purposes, not to emit information others may consume (use
<code class="docutils literal notranslate"><span class="pre">stdout</span></code> for that).</p>
<section id="id5">
<h3><a class="toc-backref" href="#id220">Additions</a><a class="headerlink" href="#id5" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">comment_to</span></code> parameter in <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_message()</span></code>, and
<code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_file()</span></code>
to comment on channel posts.</p></li>
</ul>
</section>
<section id="id6">
<h3><a class="toc-backref" href="#id221">Enhancements</a><a class="headerlink" href="#id6" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">utils.resolve_invite_link</span></code> handles the newer link format.</p></li>
<li><p>Downloading files now retries once on <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TimeoutError" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TimeoutError</span></code></a>, which has been
happening recently. It is not guaranteed to work, but it should help.</p></li>
<li><p>Sending albums of photo URLs is now supported.</p></li>
<li><p>EXIF metadata is respected when automatically resizing photos, so the
orientation information should no longer be lost.</p></li>
<li><p>Downloading a thumbnail by index should now use the correct size ordering.</p></li>
</ul>
</section>
<section id="id7">
<h3><a class="toc-backref" href="#id222">Bug fixes</a><a class="headerlink" href="#id7" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fixed a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#KeyError" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">KeyError</span></code></a> on certain cases with <code class="docutils literal notranslate"><span class="pre">Conversation</span></code>.</p></li>
<li><p>Thumbnails should properly render on more clients. Installing <code class="docutils literal notranslate"><span class="pre">hachoir</span></code>
may help.</p></li>
<li><p>Message search was broken when using a certain combination of parameters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">utils.resolve_id</span></code> was misbehaving with some identifiers.</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">TypeNotFoundError</span></code> was not being propagated, causing deadlocks.</p></li>
<li><p>Invoking multiple requests at once with <code class="docutils literal notranslate"><span class="pre">ordered=True</span></code> was deadlocking.</p></li>
</ul>
</section>
</section>
<section id="new-raw-api-call-methods-v1-19">
<h2><a class="toc-backref" href="#id223">New raw API call methods (v1.19)</a><a class="headerlink" href="#new-raw-api-call-methods-v1-19" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 122</p></td>
</tr>
</tbody>
</table>
<p>Telegram has had group calls for some weeks now. This new version contains the
raw API methods needed to initiate and manage these group calls, however, the
library will likely <strong>not offer ways to stream audio directly</strong>.</p>
<p>Telethon’s focus is being an asyncio-based, pure-Python implementation to
interact with Telegram’s API. Streaming audio is beyond the current scope of
the project and would be a big undertaking.</p>
<p>However, that doesn’t mean calls are not possible with Telethon. If you want
to help design a Python library to perform audio calls, which can then be used
with Telethon (so you can use Telethon + that new library to perform calls
with Telethon), please refer to <a class="reference external" href="https://t.me/pytgcallschat/">&#64;pytgcallschat</a>
and join the relevant chat to discuss and help with the implementation!</p>
<p>The above message was also <a class="reference external" href="https://t.me/TelethonChat/284717">posted in the official Telegram group</a>, if you wish to discuss it further.</p>
<p>With that out of the way, let’s list the additions and bug fixes in this
release:</p>
<section id="id8">
<h3><a class="toc-backref" href="#id224">Additions</a><a class="headerlink" href="#id8" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">has_left</span></code> property for user permissions on <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_permissions()</span></code>.</p></li>
</ul>
</section>
<section id="id9">
<h3><a class="toc-backref" href="#id225">Enhancements</a><a class="headerlink" href="#id9" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Updated documentation and list of known RPC errors.</p></li>
<li><p>The library now treats a lack of ping responses as a network error.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.kick_participant()</span></code>
now returns the service message about the user being kicked, so you can
delete it.</p></li>
</ul>
</section>
<section id="id10">
<h3><a class="toc-backref" href="#id226">Bug fixes</a><a class="headerlink" href="#id10" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>When editing inline messages, the text parameter is preferred if provided.</p></li>
<li><p>Additional senders are unconditionally disconnected when disconnecting the
main client, which should reduce the amount of asyncio warnings.</p></li>
<li><p>Automatic reconnection with no retries was failing.</p></li>
<li><p><a class="reference external" href="https://tl.telethon.dev/?q=PhotoPathSize">PhotoPathSize</a> is now ignored when determining a download size, since
this “size” is not a JPEG thumbnail unlike the rest.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">events.ChatAction</span></code> should misbehave
less.</p></li>
</ul>
</section>
</section>
<section id="new-layer-and-qol-improvements-v1-18">
<h2><a class="toc-backref" href="#id227">New layer and QoL improvements (v1.18)</a><a class="headerlink" href="#new-layer-and-qol-improvements-v1-18" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 120</p></td>
</tr>
</tbody>
</table>
<p>Mostly fixes, and added some new things that can be done in this new layer.</p>
<p>For proxy users, a pull request was merged that will use the <code class="docutils literal notranslate"><span class="pre">python-socks</span></code>
library when available for proxy support. This library natively supports
<a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asyncio</span></code></a>, so it should work better than the old <code class="docutils literal notranslate"><span class="pre">pysocks</span></code>. <code class="docutils literal notranslate"><span class="pre">pysocks</span></code> will
still be used if the new library is not available, and both will be handled
transparently by Telethon so you don’t need to worry about it.</p>
<section id="id11">
<h3><a class="toc-backref" href="#id228">Additions</a><a class="headerlink" href="#id11" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.set_proxy()</span></code> method
which lets you change the proxy without recreating the client. You will need
to reconnect for it to take effect, but you won’t need to recreate the
client. This is also an external contribution.</p></li>
<li><p>New method to unpin messages <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.unpin_message()</span></code>.</p></li>
</ul>
</section>
<section id="id12">
<h3><a class="toc-backref" href="#id229">Enhancements</a><a class="headerlink" href="#id12" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Empty peers are excluded from the list of dialogs.</p></li>
<li><p>If the <code class="docutils literal notranslate"><span class="pre">python-socks</span></code> library is installed (new optional requirement), it
will be used instead of <code class="docutils literal notranslate"><span class="pre">pysocks</span></code> for proxy support. This should fix some
issues with proxy timeouts, because the new library natively supports
<a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asyncio</span></code></a>.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_file()</span></code> will
now group any media type, instead of sending non-image documents separatedly.
This lets you create music albums, for example.</p></li>
<li><p>You can now search messages with a <code class="docutils literal notranslate"><span class="pre">from_user</span></code> that’s not a user. This is
a Telegram feature, we know the name isn’t great, but backwards-compatibility
has to be kept.</p></li>
</ul>
</section>
<section id="id13">
<h3><a class="toc-backref" href="#id230">Bug fixes</a><a class="headerlink" href="#id13" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fixes related to conversation timeouts.</p></li>
<li><p>Large dates (over year 2038) now wrap around a 32-bit integer, which is the
only way we can represent them to Telegram. Even if “wrong”, it makes things
not crash, and it’s the best we can do with 32-bit dates.</p></li>
<li><p>The library was accidentally using a deprecated argument in one of its
friendly methods, producing a warning.</p></li>
<li><p>Improvements to the way marked IDs are parsed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SlowModeWaitError</span></code> floods are no longer cached.</p></li>
<li><p>Getting the buttons for a message could fail sometimes.</p></li>
<li><p>Getting the display name for “forbidden” chats now works.</p></li>
<li><p>Better handling of errors in some internal methods.</p></li>
</ul>
</section>
</section>
<section id="channel-comments-and-anonymous-admins-v1-17">
<h2><a class="toc-backref" href="#id231">Channel comments and Anonymous Admins (v1.17)</a><a class="headerlink" href="#channel-comments-and-anonymous-admins-v1-17" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 119</p></td>
</tr>
</tbody>
</table>
<p>New minor version, new layer change! This time is a good one to remind every
consumer of Python libraries that <strong>you should always specify fixed versions
of your dependencies</strong>! If you’re using a <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> file and you
want to stick with the old version (or any version) for the time being, you
can <a class="reference external" href="https://pip.pypa.io/en/stable/user_guide/">use the following syntax</a>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>telethon~=1.16.0
</pre></div>
</div>
<p>This will install any version compatible with the written version (so, any in
the <code class="docutils literal notranslate"><span class="pre">1.16</span></code> series). Patch releases will never break your code (and if they
do, it’s a bug). You can also use that syntax in <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code>. Your code
can’t know what new versions will look like, so saying it will work with all
versions is a lie and will cause issues.</p>
<p>The reason to bring this up is that Telegram has changed things again, and
with the introduction of anonymous administrators and channel comments, the
sender of a message may not be a <a class="reference external" href="https://tl.telethon.dev/?q=User">User</a>! To accomodate for this, the field
is now a <a class="reference external" href="https://tl.telethon.dev/?q=Peer">Peer</a> and not <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a>. As a reminder, it’s always a good idea to
use Telethon’s friendly methods and custom properties, which have a higher
stability guarantee than accessing raw API fields.</p>
<p>Even if you don’t update, your code will still need to account for the fact
that the sender of a message might be one of the accounts Telegram introduced
to preserve backwards compatibility, because this is a server-side change, so
it’s better to update and not lag behind. As it’s mostly just a single person
driving the project on their free time, bug-fixes are not backported.</p>
<p>This version also updates the format of SQLite sessions (the default), so
after upgrading and using an old session, the session will be updated, which
means trying to use it back in older versions of the library won’t work.</p>
<p>For backwards-compatibility sake, the library has introduced the properties
<code class="xref py py-obj docutils literal notranslate"><span class="pre">Message.reply_to_msg_id</span></code>
and <code class="xref py py-obj docutils literal notranslate"><span class="pre">Message.to_id</span></code> that behave
like they did before (Telegram has renamed and changed how these fields work).</p>
<section id="id14">
<h3><a class="toc-backref" href="#id232">Breaking Changes</a><a class="headerlink" href="#id14" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Message.from_id</span></code> is now a <a class="reference external" href="https://tl.telethon.dev/?q=Peer">Peer</a>, not <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></a>! If you want the marked
sender ID (much like old behaviour), replace all uses of <code class="docutils literal notranslate"><span class="pre">.from_id</span></code> with
<code class="docutils literal notranslate"><span class="pre">.sender_id</span></code>. This will mostly work, but of course in old and new versions
you have to account for the fact that this sender may no longer be a user.</p></li>
<li><p>You can no longer assign to <code class="xref py py-obj docutils literal notranslate"><span class="pre">Message.reply_to_msg_id</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">Message.to_id</span></code> because these are now properties
that offer a “view” to the real value from a different field.</p></li>
<li><p>Answering inline queries with a <code class="docutils literal notranslate"><span class="pre">photo</span></code> or <code class="docutils literal notranslate"><span class="pre">document</span></code> will now send the
photo or document used in the resulting message by default. Not sending the
media was technically a bug, but some people may be relying on this old
behaviour. You can use the old behaviour with <code class="docutils literal notranslate"><span class="pre">include_media=False</span></code>.</p></li>
</ul>
</section>
<section id="id15">
<h3><a class="toc-backref" href="#id233">Additions</a><a class="headerlink" href="#id15" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">raise_last_call_error</span></code> parameter in the client constructor to raise
the same error produced by the last failing call, rather than a generic
<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ValueError</span></code></a>.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">formatting_entities</span></code> parameter in <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_message()</span></code>, and
<code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_file()</span></code>
to bypass the parse mode and manually specify the formatting entities.</p></li>
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_permissions()</span></code>
method to query a participant’s permissions in a group or channel. This
request is slightly expensive in small group chats because it has to fetch
the entire chat to check just a user, so use of a cache is advised.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Message.click()</span></code> now works on
normal polls!</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">local_addr</span></code> parameter in the client constructor to use a specific
local network address when connecting to Telegram.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.inline_query()</span></code> now
lets you specify the chat where the query is being made from, which some
bots need to provide certain functionality.</p></li>
<li><p>You can now get comments in a channel post with the <code class="docutils literal notranslate"><span class="pre">reply_to</span></code> parameter in
<code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_messages()</span></code>.
Comments are messages that “reply to” a specific channel message, hence the
name (which is consistent with how Telegram’s API calls it).</p></li>
</ul>
</section>
<section id="id16">
<h3><a class="toc-backref" href="#id234">Enhancements</a><a class="headerlink" href="#id16" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Updated documentation and list of known errors.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">hachoir</span></code> is available, the file metadata can now be extracted from
streams and in-memory bytes.</p></li>
<li><p>The default parameters used to initialize a connection now match the format
of those used by Telegram Desktop.</p></li>
<li><p>Specifying 0 retries will no longer cause the library to attempt to reconnect.</p></li>
<li><p>The library should now be able to reliably download very large files.</p></li>
<li><p>Global search should work more reliably now.</p></li>
<li><p>Old usernames are evicted from cache, so getting entities by cached username
should now be more reliable.</p></li>
<li><p>Slightly less noisy logs.</p></li>
<li><p>Stability regarding transport-level errors (transport flood, authorization
key not found) should be improved. In particular, you should no longer be
getting unnecessarily logged out.</p></li>
<li><p>Reconnection should no longer occur if the client gets logged out (for
example, another client revokes the session).</p></li>
</ul>
</section>
<section id="id17">
<h3><a class="toc-backref" href="#id235">Bug fixes</a><a class="headerlink" href="#id17" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>In some cases, there were issues when using <code class="xref py py-obj docutils literal notranslate"><span class="pre">events.Album</span></code> together with <code class="xref py py-obj docutils literal notranslate"><span class="pre">events.Raw</span></code>.</p></li>
<li><p>For some channels, one of their channel photos would not show up in
<code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_profile_photos()</span></code>.</p></li>
<li><p>In some cases, a request that failed to be sent would be forgotten, causing
the original caller to be “locked” forever for a response that would never
arrive. Failing requests should now consistently be automatically re-sent.</p></li>
<li><p>The library should more reliably handle certain updates with “empty” data.</p></li>
<li><p>Sending documents in inline queries should now work fine.</p></li>
<li><p>Manually using <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.sign_up</span></code>
should now work correctly, instead of claiming “code invalid”.</p></li>
</ul>
<p>Special mention to some of the other changes in the 1.16.x series:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">thumb</span></code> for <code class="docutils literal notranslate"><span class="pre">download_media</span></code> now supports both <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code></a> and <a class="reference external" href="https://tl.telethon.dev/?q=VideoSize">VideoSize</a>.</p></li>
<li><p>Thumbnails are sorted, so <code class="docutils literal notranslate"><span class="pre">-1</span></code> is always the largest.</p></li>
</ul>
</section>
</section>
<section id="bug-fixes-v1-16-1">
<h2><a class="toc-backref" href="#id236">Bug Fixes (v1.16.1)</a><a class="headerlink" href="#bug-fixes-v1-16-1" title="Permalink to this heading"></a></h2>
<p>The last release added support to <code class="docutils literal notranslate"><span class="pre">force_file</span></code> on any media, including
things that were not possible before like <code class="docutils literal notranslate"><span class="pre">.webp</span></code> files. However, the
<code class="docutils literal notranslate"><span class="pre">force_document</span></code> toggle commonly used for photos was applied “twice”
(one told the library to send it as a document, and then to send that
document as file), which prevented Telegram for analyzing the images. Long
story short, sending files to the stickers bot stopped working, but that’s
been fixed now, and sending photos as documents include the size attribute
again as long as Telegram adds it.</p>
<section id="id18">
<h3><a class="toc-backref" href="#id237">Enhancements</a><a class="headerlink" href="#id18" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>When trying to <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.start()</span></code> to
another account if you were previously logged in, the library will now warn
you because this is probably not intended. To avoid the warning, make sure
you’re logging in to the right account or logout from the other first.</p></li>
<li><p>Sending a copy of messages with polls will now work when possible.</p></li>
<li><p>The library now automatically retries on inter-dc call errors (which occur
when Telegram has internal issues).</p></li>
</ul>
</section>
<section id="id19">
<h3><a class="toc-backref" href="#id238">Bug Fixes</a><a class="headerlink" href="#id19" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The aforementioned issue with <code class="docutils literal notranslate"><span class="pre">force_document</span></code>.</p></li>
<li><p>Square brackets removed from IPv6 addresses. This may fix IPv6 support.</p></li>
</ul>
</section>
</section>
<section id="channel-statistics-v1-16">
<h2><a class="toc-backref" href="#id239">Channel Statistics (v1.16)</a><a class="headerlink" href="#channel-statistics-v1-16" title="Permalink to this heading"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 116</p></td>
</tr>
</tbody>
</table>
<p>The newest Telegram update has a new method to also retrieve megagroup
statistics, which can now be used with <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_stats()</span></code>. This way you’ll be able
to access the raw data about your channel or megagroup statistics.</p>
<p>The maximum file size limit has also been increased to 2GB on the server,
so you can send even larger files.</p>
<section id="id20">
<h3><a class="toc-backref" href="#id240">Breaking Changes</a><a class="headerlink" href="#id20" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Besides the obvious layer change, the <code class="docutils literal notranslate"><span class="pre">loop</span></code> argument <strong>is now ignored</strong>.
It has been deprecated since Python 3.8 and will be removed in Python 3.10,
and also caused some annoying warning messages when using certain parts of
the library. If you were (incorrectly) relying on using a different loop
from the one that was set, things may break.</p></li>
</ul>
</section>
<section id="id21">
<h3><a class="toc-backref" href="#id241">Enhancements</a><a class="headerlink" href="#id21" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.upload_file()</span></code>
now works better when streaming files (anything that has a <code class="docutils literal notranslate"><span class="pre">.read()</span></code>),
instead of reading it all into memory when possible.</p></li>
</ul>
</section>
</section>
<section id="qr-login-v1-15">
<h2><a class="toc-backref" href="#id242">QR login (v1.15)</a><a class="headerlink" href="#qr-login-v1-15" title="Permalink to this heading"></a></h2>
<p><em>Published at 2020/07/04</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 114</p></td>
</tr>
</tbody>
</table>
<p>The library now has a friendly method to perform QR-login, as detailed in
<a class="reference external" href="https://core.telegram.org/api/qr-login">https://core.telegram.org/api/qr-login</a>. It won’t generate QR images, but it
provides a way for you to easily do so with any other library of your choice.</p>
<section id="id22">
<h3><a class="toc-backref" href="#id243">Additions</a><a class="headerlink" href="#id22" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.qr_login()</span></code>.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">message.click</span></code> now lets you
click on buttons requesting phone or location.</p></li>
</ul>
</section>
<section id="id23">
<h3><a class="toc-backref" href="#id244">Enhancements</a><a class="headerlink" href="#id23" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Updated documentation and list of known errors.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">events.Album</span></code> should now handle albums from
different data centers more gracefully.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.download_file()</span></code> now supports
<a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a> as the destination.</p></li>
</ul>
</section>
<section id="id24">
<h3><a class="toc-backref" href="#id245">Bug fixes</a><a class="headerlink" href="#id24" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>No longer crash on updates received prior to logging in.</p></li>
<li><p>Server-side changes caused clicking on inline buttons to trigger a different
error, which is now handled correctly.</p></li>
</ul>
</section>
</section>
<section id="minor-quality-of-life-improvements-v1-14">
<h2><a class="toc-backref" href="#id246">Minor quality of life improvements (v1.14)</a><a class="headerlink" href="#minor-quality-of-life-improvements-v1-14" title="Permalink to this heading"></a></h2>
<p><em>Published at 2020/05/26</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 113</p></td>
</tr>
</tbody>
</table>
<p>Some nice things that were missing, along with the usual bug-fixes.</p>
<section id="id25">
<h3><a class="toc-backref" href="#id247">Additions</a><a class="headerlink" href="#id25" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">Message.dice</span></code> property.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">func=</span></code> parameter of events can now be an <code class="docutils literal notranslate"><span class="pre">async</span></code> function.</p></li>
</ul>
</section>
<section id="id26">
<h3><a class="toc-backref" href="#id248">Bug fixes</a><a class="headerlink" href="#id26" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fixed <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.action()</span></code>
having an alias wrong.</p></li>
<li><p>Fixed incorrect formatting of some errors.</p></li>
<li><p>Probably more reliable detection of pin events in small groups.</p></li>
<li><p>Fixed send methods on <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.conversation()</span></code> were not honoring
cancellation.</p></li>
<li><p>Flood waits of zero seconds are handled better.</p></li>
<li><p>Getting the pinned message in a chat was failing.</p></li>
<li><p>Fixed the return value when forwarding messages if some were missing
and also the return value of albums.</p></li>
</ul>
</section>
<section id="id27">
<h3><a class="toc-backref" href="#id249">Enhancements</a><a class="headerlink" href="#id27" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.tgs</span></code> files are now recognised as animated stickers.</p></li>
<li><p>The service message produced by <code class="xref py py-obj docutils literal notranslate"><span class="pre">Message.pin()</span></code> is now returned.</p></li>
<li><p>Sending a file with <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_file()</span></code> now works fine when
you pass an existing dice media (e.g. sending a message copy).</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.edit_permissions()</span></code>
now has the <code class="docutils literal notranslate"><span class="pre">embed_links</span></code> parameter which was missing.</p></li>
</ul>
</section>
</section>
<section id="bug-fixes-v1-13">
<h2><a class="toc-backref" href="#id250">Bug Fixes (v1.13)</a><a class="headerlink" href="#bug-fixes-v1-13" title="Permalink to this heading"></a></h2>
<p><em>Published at 2020/04/25</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 112</p></td>
</tr>
</tbody>
</table>
<p>Bug fixes and layer bump.</p>
<section id="id28">
<h3><a class="toc-backref" href="#id251">Bug fixes</a><a class="headerlink" href="#id28" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Passing <code class="docutils literal notranslate"><span class="pre">None</span></code> as the entity to <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.delete_messages()</span></code> would fail.</p></li>
<li><p>When downloading a thumbnail, the name inferred was wrong.</p></li>
</ul>
</section>
</section>
<section id="bug-fixes-v1-12">
<h2><a class="toc-backref" href="#id252">Bug Fixes (v1.12)</a><a class="headerlink" href="#bug-fixes-v1-12" title="Permalink to this heading"></a></h2>
<p><em>Published at 2020/04/20</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 111</p></td>
</tr>
</tbody>
</table>
<p>Once again nothing major, but a few bug fixes and primarily the new layer
deserves a new minor release.</p>
<section id="id29">
<h3><a class="toc-backref" href="#id253">Bug fixes</a><a class="headerlink" href="#id29" title="Permalink to this heading"></a></h3>
<p>These were already included in the <code class="docutils literal notranslate"><span class="pre">v1.11.3</span></code> patch:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">libssl</span></code> check was failing on macOS.</p></li>
<li><p>Getting input users would sometimes fail on <code class="xref py py-obj docutils literal notranslate"><span class="pre">events.ChatAction</span></code>.</p></li>
</ul>
<p>These bug fixes are available in this release and beyond:</p>
<ul class="simple">
<li><p>Avoid another occurrence of <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#MemoryError" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MemoryError</span></code></a>.</p></li>
<li><p>Sending large files in albums would fail because it tried to cache them.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">thumb</span></code> was being ignored when sending files from <a class="reference external" href="https://tl.telethon.dev/?q=InputFile">InputFile</a>.</p></li>
<li><p>Fixed editing inline messages from callback queries in some cases.</p></li>
<li><p>Proxy connection is now blocking which should help avoid some errors.</p></li>
</ul>
</section>
</section>
<section id="bug-fixes-v1-11">
<h2><a class="toc-backref" href="#id254">Bug Fixes (v1.11)</a><a class="headerlink" href="#bug-fixes-v1-11" title="Permalink to this heading"></a></h2>
<p><em>Published at 2020/02/20</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 110</p></td>
</tr>
</tbody>
</table>
<p>It has been a while since the last release, and a few bug fixes have been
made since then. This release includes them and updates the scheme layer.</p>
<p>Note that most of the bug-fixes are available in the <code class="docutils literal notranslate"><span class="pre">v1.10.10</span></code> patch.</p>
<section id="id30">
<h3><a class="toc-backref" href="#id255">Bug fixes</a><a class="headerlink" href="#id30" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">MemoryError</span></code> when casting certain media.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_entity()</span></code>
on small group chats.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.delete_dialog()</span></code>
now handles deactivated chats more gracefully.</p></li>
<li><p>Sending a message with <code class="docutils literal notranslate"><span class="pre">file=</span></code> would ignore some of the parameters.</p></li>
<li><p>Errors are now un-pickle-able once again.</p></li>
<li><p>Fixed some issues regarding markdown and HTML (un)parsing.</p></li>
</ul>
<p>The following are also present in <code class="docutils literal notranslate"><span class="pre">v1.10.10</span></code>:</p>
<ul class="simple">
<li><p>Fixed some issues with <code class="xref py py-obj docutils literal notranslate"><span class="pre">events.Album</span></code>.</p></li>
<li><p>Fixed some issues with <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.kick_participant()</span></code> and
<code class="xref py py-obj docutils literal notranslate"><span class="pre">client.edit_admin()</span></code>.</p></li>
<li><p>Fixed sending albums and more within <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.conversation()</span></code>.</p></li>
<li><p>Fixed some import issues.</p></li>
<li><p>And a lot more minor stuff.</p></li>
</ul>
</section>
<section id="id31">
<h3><a class="toc-backref" href="#id256">Enhancements</a><a class="headerlink" href="#id31" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Videos can now be included when sending albums.</p></li>
<li><p>Getting updates after reconnect should be more reliable.</p></li>
<li><p>Updated documentation and added more examples.</p></li>
<li><p>More security checks during the generation of the authorization key.</p></li>
</ul>
<p>The following are also present in <code class="docutils literal notranslate"><span class="pre">v1.10.10</span></code>:</p>
<ul class="simple">
<li><p>URLs like <code class="docutils literal notranslate"><span class="pre">t.me/&#64;username</span></code> are now valid.</p></li>
<li><p>Auto-sleep now works for slow-mode too.</p></li>
<li><p>Improved some error messages.</p></li>
<li><p>Some internal improvements and updating.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.pin_message()</span></code>
now also works with message objects.</p></li>
<li><p>Asynchronous file descriptors are now allowed during download and upload.</p></li>
</ul>
</section>
</section>
<section id="scheduled-messages-v1-10">
<h2><a class="toc-backref" href="#id257">Scheduled Messages (v1.10)</a><a class="headerlink" href="#scheduled-messages-v1-10" title="Permalink to this heading"></a></h2>
<p><em>Published at 2019/09/08</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 105</p></td>
</tr>
</tbody>
</table>
<p>You can now schedule messages to be sent (or edited, or forwarded…) at a later
time, which can also work as reminders for yourself when used in your own chat!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>

<span class="c1"># Remind yourself to walk the dog in 10 minutes (after you play with Telethon&#39;s update)</span>
<span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">&#39;me&#39;</span><span class="p">,</span> <span class="s1">&#39;Walk the dog&#39;</span><span class="p">,</span>
                          <span class="n">schedule</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">minutes</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>

<span class="c1"># Remind your friend tomorrow to update Telethon</span>
<span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">friend</span><span class="p">,</span> <span class="s1">&#39;Update Telethon!&#39;</span><span class="p">,</span>
                          <span class="n">schedule</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
<section id="id32">
<h3><a class="toc-backref" href="#id258">Additions</a><a class="headerlink" href="#id32" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">Button.auth</span></code> friendly button
you can use to ask users to login to your bot.</p></li>
<li><p>Telethon’s repository now contains <code class="docutils literal notranslate"><span class="pre">*.nix</span></code> expressions that you can use.</p></li>
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.kick_participant()</span></code>
method to truly kick (not ban) participants.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">schedule</span></code> parameter in <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_message()</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.edit_message()</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.forward_messages()</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_file()</span></code>.</p></li>
</ul>
</section>
<section id="id33">
<h3><a class="toc-backref" href="#id259">Bug fixes</a><a class="headerlink" href="#id33" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fix calling <code class="docutils literal notranslate"><span class="pre">flush</span></code> on file objects which lack this attribute.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">CallbackQuery</span></code> pattern.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.action()</span></code> not returning
itself when used in a context manager (so the <code class="docutils literal notranslate"><span class="pre">as</span></code> would be <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>).</p></li>
<li><p>Fix sending <a class="reference external" href="https://tl.telethon.dev/?q=InputKeyboardButtonUrlAuth">InputKeyboardButtonUrlAuth</a> as inline buttons.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.edit_permissions()</span></code>
defaults.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">Forward</span></code> had its <code class="docutils literal notranslate"><span class="pre">client</span></code> as <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p>Fix (de)serialization of negative timestamps (caused by the information in some
sites with instant view, where the date could be very old).</p></li>
<li><p>Fix HTML un-parsing.</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">to/from_id</span></code> in private messages when using multiple clients.</p></li>
<li><p>Stop disconnecting from <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (incorrect logging).</p></li>
<li><p>Fix double-read on double-connect.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_messages()</span></code>
when being passed more than 100 IDs.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">Message.document</span></code>
for documents coming from web-pages.</p></li>
</ul>
</section>
<section id="id34">
<h3><a class="toc-backref" href="#id260">Enhancements</a><a class="headerlink" href="#id34" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Some documentation improvements, including the TL reference.</p></li>
<li><p>Documentation now avoids <code class="docutils literal notranslate"><span class="pre">telethon.sync</span></code>, which should hopefully be less confusing.</p></li>
<li><p>Better error messages for flood wait.</p></li>
<li><p>You can now <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_drafts()</span></code>
for a single entity (which means you can now get a single draft from a single chat).</p></li>
<li><p>New-style file IDs now work with Telethon.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">progress_callback</span></code> for <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.upload_file()</span></code> can now be an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code>.</p></li>
</ul>
</section>
</section>
<section id="animated-stickers-v1-9">
<h2><a class="toc-backref" href="#id261">Animated Stickers (v1.9)</a><a class="headerlink" href="#animated-stickers-v1-9" title="Permalink to this heading"></a></h2>
<p><em>Published at 2019/07/06</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 103</p></td>
</tr>
</tbody>
</table>
<p>With the layer 103, Telethon is now able to send and receive animated
stickers! These use the <code class="docutils literal notranslate"><span class="pre">'application/x-tgsticker'</span></code> mime-type and for
now, you can access its raw data, which is a gzipped JSON.</p>
<section id="id35">
<h3><a class="toc-backref" href="#id262">Additions</a><a class="headerlink" href="#id35" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">events.Album</span></code> to easily receive entire albums!</p></li>
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.edit_admin()</span></code>
and <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.edit_permissions()</span></code>
methods to more easily manage your groups.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">pattern=</span></code> in <code class="xref py py-obj docutils literal notranslate"><span class="pre">CallbackQuery</span></code>.</p></li>
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">conversation.cancel_all()</span></code> method,
to cancel all currently-active conversations in a particular chat.</p></li>
<li><p>New <a class="reference internal" href="../modules/utils.html#telethon.utils.encode_waveform" title="telethon.utils.encode_waveform"><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.utils.encode_waveform</span></code></a> and <a class="reference internal" href="../modules/utils.html#telethon.utils.decode_waveform" title="telethon.utils.decode_waveform"><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.utils.decode_waveform</span></code></a>
methods as implemented by Telegram Desktop, which lets you customize how
voice notes will render.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">ignore_pinned</span></code> parameter in <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_dialogs()</span></code>.</p></li>
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">Message.mark_read()</span></code>
method.</p></li>
<li><p>You can now use strike-through in markdown with <code class="docutils literal notranslate"><span class="pre">~~text~~</span></code>, and the
corresponding HTML tags for strike-through, quotes and underlined text.</p></li>
<li><p>You can now nest entities, as in <code class="docutils literal notranslate"><span class="pre">**__text__**</span></code>.</p></li>
</ul>
</section>
<section id="id36">
<h3><a class="toc-backref" href="#id263">Bug fixes</a><a class="headerlink" href="#id36" title="Permalink to this heading"></a></h3>
<ul>
<li><p>Fixed downloading contacts.</p></li>
<li><p>Fixed <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_dialogs()</span></code> missing some under
certain circumstances.</p></li>
<li><p>Fixed incredibly slow imports under some systems due to expensive path
resolution when searching for <code class="docutils literal notranslate"><span class="pre">libssl</span></code>.</p></li>
<li><p>Fixed captions when sending albums.</p></li>
<li><p>Fixed invalid states in <code class="xref py py-obj docutils literal notranslate"><span class="pre">Conversation</span></code>.</p></li>
<li><p>Fixes to some methods in utils regarding extensions.</p></li>
<li><p>Fixed memory cycle in <code class="xref py py-obj docutils literal notranslate"><span class="pre">Forward</span></code>
which let you do things like the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">original_fwd</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">forward</span><span class="o">.</span><span class="n">original_fwd</span><span class="o">.</span><span class="n">original_fwd</span><span class="o">.</span><span class="n">original_fwd</span><span class="o">.</span><span class="n">original_fwd</span><span class="o">.</span><span class="n">original_fwd</span><span class="o">.</span><span class="n">original_fwd</span>
</pre></div>
</div>
<p>Hopefully you didn’t rely on that in your code.</p>
</li>
<li><p>Fixed <code class="xref py py-obj docutils literal notranslate"><span class="pre">File.ext</span></code> not working on
unknown mime-types, despite the file name having the extension.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">ids=...,</span> <span class="pre">reverse=True</span></code> in <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_messages()</span></code>.</p></li>
<li><p>Fixed <a class="reference internal" href="../modules/custom.html#telethon.tl.custom.draft.Draft" title="telethon.tl.custom.draft.Draft"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Draft</span></code></a> not being aware
of the entity.</p></li>
<li><p>Added missing re-exports in <code class="docutils literal notranslate"><span class="pre">telethon.sync</span></code>.</p></li>
</ul>
</section>
<section id="id37">
<h3><a class="toc-backref" href="#id264">Enhancements</a><a class="headerlink" href="#id37" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Improved <code class="xref py py-obj docutils literal notranslate"><span class="pre">conversation.cancel()</span></code>
behaviour. Now you can use it from anywhere.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">progress_callback</span></code> in <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.download_media()</span></code>
now lets you use <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code>.</p></li>
<li><p>Improved documentation and the online
method reference at <a class="reference external" href="https://tl.telethon.dev">https://tl.telethon.dev</a>.</p></li>
</ul>
</section>
</section>
<section id="documentation-overhaul-v1-8">
<h2><a class="toc-backref" href="#id265">Documentation Overhaul (v1.8)</a><a class="headerlink" href="#documentation-overhaul-v1-8" title="Permalink to this heading"></a></h2>
<p><em>Published at 2019/05/30</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 100</p></td>
</tr>
</tbody>
</table>
<p>The documentation has been completely reworked from the ground up,
with awesome new quick references such as <a class="reference internal" href="../quick-references/client-reference.html#client-ref"><span class="std std-ref">Client Reference</span></a> to help
you quickly find what you need!</p>
<p>Raw methods also warn you when a friendly variant is available, so
that you don’t accidentally make your life harder than it has to be.</p>
<p>In addition, all methods in the client now are fully annotated with type
hints! More work needs to be done, but this should already help a lot when
using Telethon from any IDEs.</p>
<p>You may have noticed that the patch versions between <code class="docutils literal notranslate"><span class="pre">v1.7.2</span></code> to <code class="docutils literal notranslate"><span class="pre">v1.7.7</span></code>
have not been documented. This is because patch versions should only contain
bug fixes, no new features or breaking changes. This hasn’t been the case in
the past, but from now on, the library will try to adhere more strictly to
the <a class="reference external" href="https://semver.org">Semantic Versioning</a> principles.</p>
<p>If you ever want to look at those bug fixes, please use the appropriated
<code class="docutils literal notranslate"><span class="pre">git</span></code> command, such as <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">shortlog</span> <span class="pre">v1.7.1...v1.7.4</span></code>, but in general,
they probably just fixed your issue.</p>
<p>With that out of the way, let’s look at the full change set:</p>
<section id="id38">
<h3><a class="toc-backref" href="#id266">Breaking Changes</a><a class="headerlink" href="#id38" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The layer changed, so take note if you use the raw API, as it’s usual.</p></li>
<li><p>The way photos are downloaded changed during the layer update of the
previous version, and fixing that bug as a breaking change in itself.
<code class="xref py py-obj docutils literal notranslate"><span class="pre">client.download_media()</span></code>
now offers a different way to deal with thumbnails.</p></li>
</ul>
</section>
<section id="id39">
<h3><a class="toc-backref" href="#id267">Additions</a><a class="headerlink" href="#id39" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">Message.file</span></code> property!
Now you can trivially access <code class="xref py py-obj docutils literal notranslate"><span class="pre">message.file.id</span></code>
to get the file ID of some media, or even <code class="docutils literal notranslate"><span class="pre">print(message.file.name)</span></code>.</p></li>
<li><p>Archiving dialogs with <code class="xref py py-obj docutils literal notranslate"><span class="pre">Dialog.archive()</span></code>
or <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.edit_folder()</span></code>
is now possible.</p></li>
<li><p>New cleaned-up method to stream downloads with <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_download()</span></code>, which offers
a lot of flexibility, such as arbitrary offsets for efficient seeking.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Dialog.delete()</span></code> has existed
for a while, and now <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.delete_dialog()</span></code> exists too so you
can easily leave chats or delete dialogs without fetching all dialogs.</p></li>
<li><p>Some people or chats have a lot of profile photos. You can now iterate
over all of them with the new <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_profile_photos()</span></code> method.</p></li>
<li><p>You can now annoy everyone with the new <code class="xref py py-obj docutils literal notranslate"><span class="pre">Message.pin(notify=True)</span></code>! The client has its own
variant too, called <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.pin_message()</span></code>.</p></li>
</ul>
</section>
<section id="id40">
<h3><a class="toc-backref" href="#id268">Bug fixes</a><a class="headerlink" href="#id40" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Correctly catch and raise all RPC errors.</p></li>
<li><p>Downloading stripped photos wouldn’t work correctly.</p></li>
<li><p>Under some systems, <code class="docutils literal notranslate"><span class="pre">libssl</span></code> would fail to load earlier than
expected, causing the library to fail when being imported.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">conv.get_response()</span></code>
after ID 0 wasn’t allowed when it should.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">InlineBuilder</span></code> only worked
with local files, but files from anywhere are supported.</p></li>
<li><p>Accessing the text property from a raw-API call to fetch <a class="reference external" href="https://tl.telethon.dev/?q=Message">Message</a> would fail
(any any other property that needed the client).</p></li>
<li><p>Database is now upgraded if the version was lower, not different.
From now on, this should help with upgrades and downgrades slightly.</p></li>
<li><p>Fixed saving <code class="docutils literal notranslate"><span class="pre">pts</span></code> and session-related stuff.</p></li>
<li><p>Disconnection should not raise any errors.</p></li>
<li><p>Invite links of the form <code class="docutils literal notranslate"><span class="pre">tg://join?invite=</span></code> now work.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_participants(search=...)</span></code>
now works on private chats again.</p></li>
<li><p>Iterating over messages in reverse with a date as offset wouldn’t work.</p></li>
<li><p>The conversation would behave weirdly when a timeout occurred.</p></li>
</ul>
</section>
<section id="id41">
<h3><a class="toc-backref" href="#id269">Enhancements</a><a class="headerlink" href="#id41" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">telethon</span></code> now re-export all the goodies that you commonly need when
using the library, so e.g. <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">telethon</span> <span class="pre">import</span> <span class="pre">Button</span></code> will now work.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">telethon.sync</span></code> now re-exports everything from <code class="docutils literal notranslate"><span class="pre">telethon</span></code>, so that
you can trivially import from just one place everything that you need.</p></li>
<li><p>More attempts at reducing CPU usage after automatically fetching missing
entities on events. This isn’t a big deal, even if it sounds like one.</p></li>
<li><p>Hexadecimal invite links are now supported. You didn’t need them, but
they will now work.</p></li>
</ul>
</section>
<section id="internal-changes">
<h3><a class="toc-backref" href="#id270">Internal Changes</a><a class="headerlink" href="#internal-changes" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Deterministic code generation. This is good for <code class="docutils literal notranslate"><span class="pre">diff</span></code>.</p></li>
<li><p>On Python 3.7 and above, we properly close the connection.</p></li>
<li><p>A lot of micro-optimization.</p></li>
<li><p>Fixes to bugs introduced while making this release.</p></li>
<li><p>Custom commands on <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> are nicer to use.</p></li>
</ul>
</section>
</section>
<section id="fix-up-for-photo-downloads-v1-7-1">
<h2><a class="toc-backref" href="#id271">Fix-up for Photo Downloads (v1.7.1)</a><a class="headerlink" href="#fix-up-for-photo-downloads-v1-7-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2019/04/24</em></p>
<p>Telegram changed the way thumbnails (which includes photos) are downloaded,
so you can no longer use a <a class="reference external" href="https://tl.telethon.dev/?q=PhotoSize">PhotoSize</a> alone to download a particular
thumbnail size (this is a <strong>breaking change</strong>).</p>
<p>Instead, you will have to specify the new <code class="docutils literal notranslate"><span class="pre">thumb</span></code> parameter in
<code class="xref py py-obj docutils literal notranslate"><span class="pre">client.download_media()</span></code>
to download a particular thumbnail size. This addition enables you to easily
download thumbnails from documents, something you couldn’t do easily before.</p>
</section>
<section id="easier-events-v1-7">
<h2><a class="toc-backref" href="#id272">Easier Events (v1.7)</a><a class="headerlink" href="#easier-events-v1-7" title="Permalink to this heading"></a></h2>
<p><em>Published at 2019/04/22</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 98</p></td>
</tr>
</tbody>
</table>
<p>If you have been using Telethon for a while, you probably know how annoying
the “Could not find the input entity for…” error can be. In this new version,
the library will try harder to find the input entity for you!</p>
<p>That is, instead of doing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@client</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">download_profile_photo</span><span class="p">(</span><span class="k">await</span> <span class="n">event</span><span class="o">.</span><span class="n">get_input_sender</span><span class="p">())</span>
    <span class="c1"># ...... needs await, it&#39;s a method ^^^^^                       ^^</span>
</pre></div>
</div>
<p>You can now do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@client</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">download_profile_photo</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">input_sender</span><span class="p">)</span>
    <span class="c1"># ...... no await, it&#39;s a property! ^</span>
    <span class="c1"># It&#39;s also 12 characters shorter :)</span>
</pre></div>
</div>
<p>And even the following will hopefully work:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@client</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">download_profile_photo</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">sender_id</span><span class="p">)</span>
</pre></div>
</div>
<p>A lot of people use IDs thinking this is the right way of doing it. Ideally,
you would always use <code class="docutils literal notranslate"><span class="pre">input_*</span></code>, not <code class="docutils literal notranslate"><span class="pre">sender</span></code> or <code class="docutils literal notranslate"><span class="pre">sender_id</span></code> (and the
same applies to chats). But, with this change, IDs will work just the same as
<code class="docutils literal notranslate"><span class="pre">input_*</span></code> inside events.</p>
<p><strong>This feature still needs some more testing</strong>, so please do open an issue
if you find strange behaviour.</p>
<section id="id42">
<h3><a class="toc-backref" href="#id273">Breaking Changes</a><a class="headerlink" href="#id42" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The layer changed, and a lot of things did too. If you are using
raw API, you should be careful with this. In addition, some attributes
weren’t of type <code class="docutils literal notranslate"><span class="pre">datetime</span></code> when they should be, which has been fixed.</p></li>
<li><p>Due to the layer change, you can no longer download photos with just
their <a class="reference external" href="https://tl.telethon.dev/?q=PhotoSize">PhotoSize</a>. Version 1.7.1 introduces a new way to download
thumbnails to work around this issue.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.disconnect()</span></code>
is now asynchronous again. This means you need to <code class="docutils literal notranslate"><span class="pre">await</span></code> it. You
don’t need to worry about this if you were using <code class="docutils literal notranslate"><span class="pre">with</span> <span class="pre">client</span></code> or
<code class="xref py py-obj docutils literal notranslate"><span class="pre">client.run_until_disconnected</span></code>.
This should prevent the “pending task was destroyed” errors.</p></li>
</ul>
</section>
<section id="id43">
<h3><a class="toc-backref" href="#id274">Additions</a><a class="headerlink" href="#id43" title="Permalink to this heading"></a></h3>
<ul>
<li><p>New in-memory cache for input entities. This should mean a lot less
of disk look-ups.</p></li>
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.action</span></code> method
to easily indicate that you are doing some chat action:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">action</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">&#39;typing&#39;</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>  <span class="c1"># type for 2 seconds</span>
    <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">&#39;Hello world! I type slow ^^&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also easily use this for sending files, playing games, etc.</p>
</li>
</ul>
</section>
<section id="new-bugs">
<h3><a class="toc-backref" href="#id275">New bugs</a><a class="headerlink" href="#new-bugs" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Downloading photos is broken. This is fixed in v1.7.1.</p></li>
</ul>
</section>
<section id="id44">
<h3><a class="toc-backref" href="#id276">Bug fixes</a><a class="headerlink" href="#id44" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fix sending photos from streams/bytes.</p></li>
<li><p>Fix unhandled error when sending requests that were too big.</p></li>
<li><p>Fix edits that arrive too early on conversations.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.edit_message()</span></code>
when trying to edit a file.</p></li>
<li><p>Fix method calls on the objects returned by <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_dialogs()</span></code>.</p></li>
<li><p>Attempt at fixing <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_dialogs()</span></code> missing many dialogs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset_date</span></code> in <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_messages()</span></code> was being
ignored in some cases. This has been worked around.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">callback_query.edit()</span></code>.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">CallbackQuery(func=...)</span></code>
was being ignored.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">UserUpdate</span></code> not working for
“typing” (and uploading file, etc.) status.</p></li>
<li><p>Fix library was not expecting <code class="docutils literal notranslate"><span class="pre">IOError</span></code> from PySocks.</p></li>
<li><p>Fix library was raising a generic <code class="docutils literal notranslate"><span class="pre">ConnectionError</span></code>
and not the one that actually occurred.</p></li>
<li><p>Fix the <code class="docutils literal notranslate"><span class="pre">blacklist_chats</span></code> parameter in <code class="xref py py-obj docutils literal notranslate"><span class="pre">MessageRead</span></code> not working as intended.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.download_media(contact)</span></code>.</p></li>
<li><p>Fix mime type when sending <code class="docutils literal notranslate"><span class="pre">mp3</span></code> files.</p></li>
<li><p>Fix forcibly getting the sender or chat from events would
not always return all their information.</p></li>
<li><p>Fix sending albums with <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_file()</span></code> was not returning
the sent messages.</p></li>
<li><p>Fix forwarding albums with <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.forward_messages()</span></code>.</p></li>
<li><p>Some fixes regarding filtering updates from chats.</p></li>
<li><p>Attempt at preventing duplicated updates.</p></li>
<li><p>Prevent double auto-reconnect.</p></li>
</ul>
</section>
<section id="id45">
<h3><a class="toc-backref" href="#id277">Enhancements</a><a class="headerlink" href="#id45" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Some improvements related to proxy connections.</p></li>
<li><p>Several updates and improvements to the documentation,
such as optional dependencies now being properly listed.</p></li>
<li><p>You can now forward messages from different chats directly with
<code class="xref py py-obj docutils literal notranslate"><span class="pre">client.forward_messages</span></code>.</p></li>
</ul>
</section>
</section>
<section id="tidying-up-internals-v1-6">
<h2><a class="toc-backref" href="#id278">Tidying up Internals (v1.6)</a><a class="headerlink" href="#tidying-up-internals-v1-6" title="Permalink to this heading"></a></h2>
<p><em>Published at 2019/02/27</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 95</p></td>
</tr>
</tbody>
</table>
<p>First things first, sorry for updating the layer in the previous patch
version. That should only be done between major versions ideally, but
due to how Telegram works, it’s done between minor versions. However raw
API has and will always be considered “unsafe”, this meaning that you
should always use the convenience client methods instead. These methods
don’t cover the full API yet, so pull requests are welcome.</p>
<section id="id46">
<h3><a class="toc-backref" href="#id279">Breaking Changes</a><a class="headerlink" href="#id46" title="Permalink to this heading"></a></h3>
<ul>
<li><p>The layer update, of course. This didn’t really need a mention here.</p></li>
<li><p>You can no longer pass a <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> when iterating over messages.
No other method exposed this parameter, and it was only meant for testing
purposes. Instead, it’s now a private constant.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client.iter_*</span></code> methods no longer have a <code class="docutils literal notranslate"><span class="pre">_total</span></code> parameter which
was supposed to be private anyway. Instead, they return a new generator
object which has a <code class="docutils literal notranslate"><span class="pre">.total</span></code> attribute:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">it</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">iter_messages</span><span class="p">(</span><span class="n">chat</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">message</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">it</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="n">percentage</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="n">it</span><span class="o">.</span><span class="n">total</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.2%}</span><span class="s1"> </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">percentage</span><span class="p">,</span> <span class="n">message</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id47">
<h3><a class="toc-backref" href="#id280">Additions</a><a class="headerlink" href="#id47" title="Permalink to this heading"></a></h3>
<ul>
<li><p>You can now pass <code class="docutils literal notranslate"><span class="pre">phone</span></code> and <code class="docutils literal notranslate"><span class="pre">phone_code_hash</span></code> in <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.sign_up</span></code>, although you probably don’t
need that.</p></li>
<li><p>Thanks to the overhaul of all <code class="docutils literal notranslate"><span class="pre">client.iter_*</span></code> methods, you can now do:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">iter_messages</span><span class="p">(</span><span class="s1">&#39;me&#39;</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id48">
<h3><a class="toc-backref" href="#id281">Bug fixes</a><a class="headerlink" href="#id48" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fix <a class="reference internal" href="../modules/utils.html#telethon.utils.resolve_bot_file_id" title="telethon.utils.resolve_bot_file_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.utils.resolve_bot_file_id</span></code></a>, which wasn’t working after
the layer update (so you couldn’t send some files by bot file IDs).</p></li>
<li><p>Fix sending albums as bot file IDs (due to image detection improvements).</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">takeout()</span></code> failing
when they need to download media from other DCs.</p></li>
<li><p>Fix repeatedly calling <code class="xref py py-obj docutils literal notranslate"><span class="pre">conversation.get_response()</span></code> when many
messages arrived at once (i.e. when several of them were forwarded).</p></li>
<li><p>Fixed connecting with <a class="reference internal" href="../modules/network.html#telethon.network.connection.tcpobfuscated.ConnectionTcpObfuscated" title="telethon.network.connection.tcpobfuscated.ConnectionTcpObfuscated"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ConnectionTcpObfuscated</span></code></a>.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_peer_id('me')</span></code>.</p></li>
<li><p>Fix warning of “missing sqlite3” when in reality it just had wrong tables.</p></li>
<li><p>Fix a strange error when using too many IDs in <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.delete_messages()</span></code>.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_file</span></code>
with the result of <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.upload_file</span></code>.</p></li>
<li><p>When answering inline results, their order was not being preserved.</p></li>
<li><p>Fix <code class="xref py py-obj docutils literal notranslate"><span class="pre">events.ChatAction</span></code>
detecting user leaves as if they were kicked.</p></li>
</ul>
</section>
<section id="id49">
<h3><a class="toc-backref" href="#id282">Enhancements</a><a class="headerlink" href="#id49" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Cleared up some parts of the documentation.</p></li>
<li><p>Improved some auto-casts to make life easier.</p></li>
<li><p>Improved image detection. Now you can easily send <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code></a>
and streams of images as photos, unless you force document.</p></li>
<li><p>Sending images as photos that are too large will now be resized
before uploading, reducing the time it takes to upload them and
also avoiding errors when the image was too large (as long as
<code class="docutils literal notranslate"><span class="pre">pillow</span></code> is installed). The images will remain unchanged if you
send it as a document.</p></li>
<li><p>Treat <code class="docutils literal notranslate"><span class="pre">errors.RpcMcgetFailError</span></code> as a temporary server error
to automatically retry shortly. This works around most issues.</p></li>
</ul>
</section>
<section id="id50">
<h3><a class="toc-backref" href="#id283">Internal changes</a><a class="headerlink" href="#id50" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New common way to deal with retries (<code class="docutils literal notranslate"><span class="pre">retry_range</span></code>).</p></li>
<li><p>Cleaned up the takeout client.</p></li>
<li><p>Completely overhauled asynchronous generators.</p></li>
</ul>
</section>
</section>
<section id="layer-update-v1-5-5">
<h2><a class="toc-backref" href="#id284">Layer Update (v1.5.5)</a><a class="headerlink" href="#layer-update-v1-5-5" title="Permalink to this heading"></a></h2>
<p><em>Published at 2019/01/14</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 93</p></td>
</tr>
</tbody>
</table>
<p>There isn’t an entry for v1.5.4 because it contained only one hot-fix
regarding loggers. This update is slightly bigger so it deserves mention.</p>
<section id="id51">
<h3><a class="toc-backref" href="#id285">Additions</a><a class="headerlink" href="#id51" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">supports_streaming</span></code> parameter in <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_file</span></code>.</p></li>
</ul>
</section>
<section id="id52">
<h3><a class="toc-backref" href="#id286">Bug fixes</a><a class="headerlink" href="#id52" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Dealing with mimetypes should cause less issues in systems like Windows.</p></li>
<li><p>Potentially fix alternative session storages that had issues with dates.</p></li>
</ul>
</section>
<section id="id53">
<h3><a class="toc-backref" href="#id287">Enhancements</a><a class="headerlink" href="#id53" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Saner timeout defaults for conversations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Path</span></code>-like files are now supported for thumbnails.</p></li>
<li><p>Added new hot-keys to the online documentation at
<a class="reference external" href="https://tl.telethon.dev/">https://tl.telethon.dev/</a> such as <code class="docutils literal notranslate"><span class="pre">/</span></code> to search.
Press <code class="docutils literal notranslate"><span class="pre">?</span></code> to view them all.</p></li>
</ul>
</section>
</section>
<section id="bug-fixes-v1-5-3">
<h2><a class="toc-backref" href="#id288">Bug Fixes (v1.5.3)</a><a class="headerlink" href="#bug-fixes-v1-5-3" title="Permalink to this heading"></a></h2>
<p><em>Published at 2019/01/14</em></p>
<p>Several bug fixes and some quality of life enhancements.</p>
<section id="id54">
<h3><a class="toc-backref" href="#id289">Breaking Changes</a><a class="headerlink" href="#id54" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">message.edit</span></code> now respects
the previous message buttons or link preview being hidden. If you want to
toggle them you need to explicitly set them. This is generally the desired
behaviour, but may cause some bots to have buttons when they shouldn’t.</p></li>
</ul>
</section>
<section id="id55">
<h3><a class="toc-backref" href="#id290">Additions</a><a class="headerlink" href="#id55" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>You can now “hide_via” when clicking on results from <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.inline_query</span></code> to &#64;bing and &#64;gif.</p></li>
<li><p>You can now further configure the logger Telethon uses to suit your needs.</p></li>
</ul>
</section>
<section id="id56">
<h3><a class="toc-backref" href="#id291">Bug fixes</a><a class="headerlink" href="#id56" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fixes for ReadTheDocs to correctly build the documentation.</p></li>
<li><p>Fix <a class="reference external" href="https://tl.telethon.dev/?q=UserEmpty">UserEmpty</a> not being expected when getting the input variant.</p></li>
<li><p>The message object returned when sending a message with buttons wouldn’t
always contain the <a class="reference external" href="https://tl.telethon.dev/?q=ReplyMarkup">ReplyMarkup</a>.</p></li>
<li><p>Setting email when configuring 2FA wasn’t properly supported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">utils.resolve_bot_file_id</span></code> now works again for photos.</p></li>
</ul>
</section>
<section id="id57">
<h3><a class="toc-backref" href="#id292">Enhancements</a><a class="headerlink" href="#id57" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Chat and channel participants can now be used as peers.</p></li>
<li><p>Reworked README and examples at
<a class="reference external" href="https://github.com/LonamiWebs/Telethon/tree/master/telethon_examples">https://github.com/LonamiWebs/Telethon/tree/master/telethon_examples</a></p></li>
</ul>
</section>
</section>
<section id="takeout-sessions-v1-5-2">
<h2><a class="toc-backref" href="#id293">Takeout Sessions (v1.5.2)</a><a class="headerlink" href="#takeout-sessions-v1-5-2" title="Permalink to this heading"></a></h2>
<p><em>Published at 2019/01/05</em></p>
<p>You can now easily start takeout sessions (also known as data export sessions)
through <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.takeout()</span></code>.
Some of the requests will have lower flood limits when done through the
takeout session.</p>
<section id="id58">
<h3><a class="toc-backref" href="#id294">Bug fixes</a><a class="headerlink" href="#id58" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The new <a class="reference internal" href="../modules/custom.html#telethon.tl.custom.adminlogevent.AdminLogEvent" title="telethon.tl.custom.adminlogevent.AdminLogEvent"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AdminLogEvent</span></code></a>
had a bug that made it unusable.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_dialogs()</span></code>
will now locally check for the offset date, since Telegram ignores it.</p></li>
<li><p>Answering inline queries with media no works properly. You can now use
the library to create inline bots and send stickers through them!</p></li>
</ul>
</section>
</section>
<section id="object-to-json-v1-5-1">
<h2><a class="toc-backref" href="#id295">object.to_json() (v1.5.1)</a><a class="headerlink" href="#object-to-json-v1-5-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2019/01/03</em></p>
<p>The library already had a way to easily convert the objects the API returned
into dictionaries through <code class="docutils literal notranslate"><span class="pre">object.to_dict()</span></code>, but some of the fields are
dates or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code></a> which JSON can’t serialize directly.</p>
<p>For convenience, a new <code class="docutils literal notranslate"><span class="pre">object.to_json()</span></code> has been added which will by
default format both of those problematic types into something sensible.</p>
<section id="id59">
<h3><a class="toc-backref" href="#id296">Additions</a><a class="headerlink" href="#id59" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_admin_log()</span></code> method.</p></li>
</ul>
</section>
<section id="id60">
<h3><a class="toc-backref" href="#id297">Bug fixes</a><a class="headerlink" href="#id60" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.is_connected()</span></code>
would be wrong when the initial connection failed.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code> when accessing the text of messages
with malformed offsets in their entities.</p></li>
<li><p>Fixed <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_input_entity()</span></code> for integer IDs
that the client has not seen before.</p></li>
</ul>
</section>
<section id="id61">
<h3><a class="toc-backref" href="#id298">Enhancements</a><a class="headerlink" href="#id61" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>You can now configure the reply markup when using <code class="xref py py-obj docutils literal notranslate"><span class="pre">Button</span></code> as a bot.</p></li>
<li><p>More properties for <code class="xref py py-obj docutils literal notranslate"><span class="pre">Message</span></code> to make accessing media convenient.</p></li>
<li><p>Downloading to <code class="docutils literal notranslate"><span class="pre">file=bytes</span></code> will now return a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code></a> object
with the downloaded media.</p></li>
</ul>
</section>
</section>
<section id="polls-with-the-latest-layer-v1-5">
<h2><a class="toc-backref" href="#id299">Polls with the Latest Layer (v1.5)</a><a class="headerlink" href="#polls-with-the-latest-layer-v1-5" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/12/25</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 91</p></td>
</tr>
</tbody>
</table>
<p>This version doesn’t really bring many new features, but rather focuses on
updating the code base to support the latest available Telegram layer, 91.
This layer brings polls, and you can create and manage them through Telethon!</p>
<section id="id62">
<h3><a class="toc-backref" href="#id300">Breaking Changes</a><a class="headerlink" href="#id62" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The layer change from 82 to 91 changed a lot of things in the raw API,
so be aware that if you rely on raw API calls, you may need to update
your code, in particular <strong>if you work with files</strong>. They have a new
<code class="docutils literal notranslate"><span class="pre">file_reference</span></code> parameter that you must provide.</p></li>
</ul>
</section>
<section id="id63">
<h3><a class="toc-backref" href="#id301">Additions</a><a class="headerlink" href="#id63" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.is_bot()</span></code> method.</p></li>
</ul>
</section>
<section id="id64">
<h3><a class="toc-backref" href="#id302">Bug fixes</a><a class="headerlink" href="#id64" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Markdown and HTML parsing now behave correctly with leading whitespace.</p></li>
<li><p>HTTP connection should now work correctly again.</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">caption=None</span></code> would raise an error instead of setting no caption.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">KeyError</span></code> is now handled properly when forwarding messages.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">button.click()</span></code>
now works as expected for <a class="reference external" href="https://tl.telethon.dev/?q=KeyboardButtonGame">KeyboardButtonGame</a>.</p></li>
</ul>
</section>
<section id="id65">
<h3><a class="toc-backref" href="#id303">Enhancements</a><a class="headerlink" href="#id65" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Some improvements to the search in the full API and generated examples.</p></li>
<li><p>Using entities with <code class="docutils literal notranslate"><span class="pre">access_hash</span> <span class="pre">=</span> <span class="pre">0</span></code> will now work in more cases.</p></li>
</ul>
</section>
<section id="id66">
<h3><a class="toc-backref" href="#id304">Internal changes</a><a class="headerlink" href="#id66" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Some changes to the documentation and code generation.</p></li>
<li><p>2FA code was updated to work under the latest layer.</p></li>
</ul>
</section>
</section>
<section id="error-descriptions-in-csv-files-v1-4-3">
<h2><a class="toc-backref" href="#id305">Error Descriptions in CSV files (v1.4.3)</a><a class="headerlink" href="#error-descriptions-in-csv-files-v1-4-3" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/12/04</em></p>
<p>While this may seem like a minor thing, it’s a big usability improvement.</p>
<p>Anyone who wants to update the documentation for known errors, or whether
some methods can be used as a bot, user or both, can now be easily edited.
Everyone is encouraged to help document this better!</p>
<section id="id67">
<h3><a class="toc-backref" href="#id306">Bug fixes</a><a class="headerlink" href="#id67" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TimeoutError</span></code> was not handled during automatic reconnects.</p></li>
<li><p>Getting messages by ID using <a class="reference external" href="https://tl.telethon.dev/?q=InputMessageReplyTo">InputMessageReplyTo</a> could fail.</p></li>
<li><p>Fixed <code class="xref py py-obj docutils literal notranslate"><span class="pre">message.get_reply_message</span></code>
as a bot when a user replied to a different bot.</p></li>
<li><p>Accessing some document properties in a <code class="xref py py-obj docutils literal notranslate"><span class="pre">Message</span></code> would fail.</p></li>
</ul>
</section>
<section id="id68">
<h3><a class="toc-backref" href="#id307">Enhancements</a><a class="headerlink" href="#id68" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Accessing <code class="xref py py-obj docutils literal notranslate"><span class="pre">events.ChatAction</span></code>
properties such as input users may now work in more cases.</p></li>
</ul>
</section>
<section id="id69">
<h3><a class="toc-backref" href="#id308">Internal changes</a><a class="headerlink" href="#id69" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Error descriptions and information about methods is now loaded
from a CSV file instead of being part of several messy JSON files.</p></li>
</ul>
</section>
</section>
<section id="bug-fixes-v1-4-2">
<h2><a class="toc-backref" href="#id309">Bug Fixes (v1.4.2)</a><a class="headerlink" href="#bug-fixes-v1-4-2" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/11/24</em></p>
<p>This version also includes the v1.4.1 hot-fix, which was a single
quick fix and didn’t really deserve an entry in the changelog.</p>
<section id="id70">
<h3><a class="toc-backref" href="#id310">Bug fixes</a><a class="headerlink" href="#id70" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Authorization key wouldn’t be saved correctly, requiring re-login.</p></li>
<li><p>Conversations with custom events failed to be cancelled.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">telethon.sync</span></code> when using other threads.</p></li>
<li><p>Fix markdown/HTML parser from failing with leading/trailing whitespace.</p></li>
<li><p>Fix accessing <code class="docutils literal notranslate"><span class="pre">chat_action_event.input_user</span></code> property.</p></li>
<li><p>Potentially improved handling unexpected disconnections.</p></li>
</ul>
</section>
<section id="id71">
<h3><a class="toc-backref" href="#id311">Enhancements</a><a class="headerlink" href="#id71" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Better default behaviour for <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_read_acknowledge</span></code>.</p></li>
<li><p>Clarified some points in the documentation.</p></li>
<li><p>Clearer errors for <code class="docutils literal notranslate"><span class="pre">utils.get_peer*</span></code>.</p></li>
</ul>
</section>
</section>
<section id="connection-overhaul-v1-4">
<h2><a class="toc-backref" href="#id312">Connection Overhaul (v1.4)</a><a class="headerlink" href="#connection-overhaul-v1-4" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/11/03</em></p>
<p>Yet again, a lot of work has been put into reworking the low level connection
classes. This means <code class="docutils literal notranslate"><span class="pre">asyncio.open_connection</span></code> is now used correctly and the
errors it can produce are handled properly. The separation between packing,
encrypting and network is now abstracted away properly, so reasoning about
the code is easier, making it more maintainable.</p>
<p>As a user, you shouldn’t worry about this, other than being aware that quite
a few changes were made in the insides of the library and you should report
any issues that you encounter with this version if any.</p>
<section id="id72">
<h3><a class="toc-backref" href="#id313">Breaking Changes</a><a class="headerlink" href="#id72" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The threaded version of the library will no longer be maintained, primarily
because it never was properly maintained anyway. If you have old code, stick
with old versions of the library, such as <code class="docutils literal notranslate"><span class="pre">0.19.1.6</span></code>.</p></li>
<li><p>Timeouts no longer accept <code class="docutils literal notranslate"><span class="pre">timedelta</span></code>. Simply use seconds.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">callback</span></code> parameter from <code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.tl.custom.button.Button.inline()</span></code>
was removed, since it had always been a bad idea. Adding the callback there
meant a lot of extra work for every message sent, and only registering it
after the first message was sent! Instead, use
<code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.events.callbackquery.CallbackQuery</span></code>.</p></li>
</ul>
</section>
<section id="id73">
<h3><a class="toc-backref" href="#id314">Additions</a><a class="headerlink" href="#id73" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">dialog.delete()</span></code> method.</p></li>
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">conversation.cancel()</span></code> method.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">retry_delay</span></code> delay for the client to be used on auto-reconnection.</p></li>
</ul>
</section>
<section id="id74">
<h3><a class="toc-backref" href="#id315">Bug fixes</a><a class="headerlink" href="#id74" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fixed <code class="xref py py-obj docutils literal notranslate"><span class="pre">Conversation.wait_event()</span></code>.</p></li>
<li><p>Fixed replying with photos/documents on inline results.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.is_user_authorized()</span></code> now works
correctly after <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.log_out()</span></code>.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">dialog.is_group</span></code> now works for
<a class="reference external" href="https://tl.telethon.dev/?q=ChatForbidden">ChatForbidden</a>.</p></li>
<li><p>Not using <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code> when needed is now a proper error.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">events.CallbackQuery</span></code>
with string regex was not working properly.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_entity('me')</span></code>
now works again.</p></li>
<li><p>Empty codes when signing in are no longer valid.</p></li>
<li><p>Fixed file cache for in-memory sessions.</p></li>
</ul>
</section>
<section id="id75">
<h3><a class="toc-backref" href="#id316">Enhancements</a><a class="headerlink" href="#id75" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Support <code class="docutils literal notranslate"><span class="pre">next_offset</span></code> in <code class="xref py py-obj docutils literal notranslate"><span class="pre">inline_query.answer()</span></code>.</p></li>
<li><p>Support <code class="docutils literal notranslate"><span class="pre">&lt;a</span> <span class="pre">href=&quot;tg://user?id=123&quot;&gt;</span></code> mentions in HTML parse mode.</p></li>
<li><p>New auto-casts for <a class="reference external" href="https://tl.telethon.dev/?q=InputDocument">InputDocument</a> and <a class="reference external" href="https://tl.telethon.dev/?q=InputChatPhoto">InputChatPhoto</a>.</p></li>
<li><p>Conversations are now exclusive per-chat by default.</p></li>
<li><p>The request that caused a RPC error is now shown in the error message.</p></li>
<li><p>New full API examples in the generated documentation.</p></li>
<li><p>Fixed some broken links in the documentation.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.disconnect()</span></code>
is now synchronous, but you can still <code class="docutils literal notranslate"><span class="pre">await</span></code> it for consistency
or compatibility.</p></li>
</ul>
</section>
</section>
<section id="event-templates-v1-3">
<h2><a class="toc-backref" href="#id317">Event Templates (v1.3)</a><a class="headerlink" href="#event-templates-v1-3" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/09/22</em></p>
<p>If you have worked with Flask templates, you will love this update,
since it gives you the same features but even more conveniently:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># handlers/welcome.py</span>
<span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

<span class="nd">@events</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">NewMessage</span><span class="p">(</span><span class="s1">&#39;(?i)hello&#39;</span><span class="p">))</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">client</span>
    <span class="k">await</span> <span class="n">event</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="s1">&#39;Hi!&#39;</span><span class="p">)</span>
    <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">&#39;me&#39;</span><span class="p">,</span> <span class="s1">&#39;Sent hello to someone&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will <code class="xref py py-obj docutils literal notranslate"><span class="pre">register</span></code> the <code class="docutils literal notranslate"><span class="pre">handler</span></code> callback
to handle new message events. Note that you didn’t add this to any client
yet, and this is the key point: you don’t need a client to define handlers!
You can add it later:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># main.py</span>
<span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">TelegramClient</span>
<span class="kn">import</span> <span class="nn">handlers.welcome</span>

<span class="k">with</span> <span class="n">TelegramClient</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="c1"># This line adds the handler we defined before for new messages</span>
    <span class="n">client</span><span class="o">.</span><span class="n">add_event_handler</span><span class="p">(</span><span class="n">handlers</span><span class="o">.</span><span class="n">welcome</span><span class="o">.</span><span class="n">handler</span><span class="p">)</span>
    <span class="n">client</span><span class="o">.</span><span class="n">run_until_disconnected</span><span class="p">()</span>
</pre></div>
</div>
<p>This should help you to split your big code base into a more modular design.</p>
<section id="id76">
<h3><a class="toc-backref" href="#id318">Breaking Changes</a><a class="headerlink" href="#id76" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.sender</span></code> is the <code class="docutils literal notranslate"><span class="pre">.chat</span></code> when the message is sent in a broadcast
channel. This makes sense, because the sender of the message was the
channel itself, but you now must take into consideration that it may
be either a <a class="reference external" href="https://tl.telethon.dev/?q=User">User</a> or <a class="reference external" href="https://tl.telethon.dev/?q=Channel">Channel</a> instead of being <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
</ul>
</section>
<section id="id77">
<h3><a class="toc-backref" href="#id319">Additions</a><a class="headerlink" href="#id77" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">MultiError</span></code> class when invoking many requests at once
through <code class="docutils literal notranslate"><span class="pre">client([requests])</span></code>.</p></li>
<li><p>New custom <code class="docutils literal notranslate"><span class="pre">func=</span></code> on all events. These will receive the entire
event, and a good usage example is <code class="docutils literal notranslate"><span class="pre">func=lambda</span> <span class="pre">e:</span> <span class="pre">e.is_private</span></code>.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">.web_preview</span></code> field on messages. The <code class="docutils literal notranslate"><span class="pre">.photo</span></code> and <code class="docutils literal notranslate"><span class="pre">.document</span></code>
will also return the media in the web preview if any, for convenience.</p></li>
<li><p>Callback queries now have a <code class="docutils literal notranslate"><span class="pre">.chat</span></code> in most circumstances.</p></li>
</ul>
</section>
<section id="id78">
<h3><a class="toc-backref" href="#id320">Bug fixes</a><a class="headerlink" href="#id78" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Running code with <code class="xref py py-obj docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-O</span></code> would remove critical code from asserts.</p></li>
<li><p>Fix some rare ghost disconnections after reconnecting.</p></li>
<li><p>Fix strange behavior for <code class="xref py py-obj docutils literal notranslate"><span class="pre">send_message(chat,</span> <span class="pre">Message,</span> <span class="pre">reply_to=foo)</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">loop=</span></code> argument was being pretty much ignored.</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">MemorySession</span></code> file caching.</p></li>
<li><p>The logic for getting entities from their username is now correct.</p></li>
<li><p>Fixes for sending stickers from <code class="docutils literal notranslate"><span class="pre">.webp</span></code> files in Windows, again.</p></li>
<li><p>Fix disconnection without being logged in.</p></li>
<li><p>Retrieving media from messages would fail.</p></li>
<li><p>Getting some messages by ID on private chats.</p></li>
</ul>
</section>
<section id="id79">
<h3><a class="toc-backref" href="#id321">Enhancements</a><a class="headerlink" href="#id79" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">iter_participants</span></code>
will now use its <code class="docutils literal notranslate"><span class="pre">search=</span></code> as a symbol set when <code class="docutils literal notranslate"><span class="pre">aggressive=True</span></code>,
so you can do <code class="docutils literal notranslate"><span class="pre">client.get_participants(group,</span> <span class="pre">aggressive=True,</span>
<span class="pre">search='абвгдеёжзийклмнопрст')</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">StringSession</span></code> supports custom encoding.</p></li>
<li><p>Callbacks for <code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.client.auth.AuthMethods.start</span></code> can be <code class="docutils literal notranslate"><span class="pre">async</span></code>.</p></li>
</ul>
</section>
<section id="id80">
<h3><a class="toc-backref" href="#id322">Internal changes</a><a class="headerlink" href="#id80" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Cherry-picked a commit to use <code class="docutils literal notranslate"><span class="pre">asyncio.open_connection</span></code> in the lowest
level of the library. Do open issues if this causes trouble, but it should
otherwise improve performance and reliability.</p></li>
<li><p>Building and resolving events overhaul.</p></li>
</ul>
</section>
</section>
<section id="conversations-string-sessions-and-more-v1-2">
<h2><a class="toc-backref" href="#id323">Conversations, String Sessions and More (v1.2)</a><a class="headerlink" href="#conversations-string-sessions-and-more-v1-2" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/08/14</em></p>
<p>This is a big release! Quite a few things have been added to the library,
such as the new <code class="xref py py-obj docutils literal notranslate"><span class="pre">Conversation</span></code>.
This makes it trivial to get tokens from <a class="reference external" href="https://t.me/BotFather">&#64;BotFather</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">telethon.tl</span> <span class="kn">import</span> <span class="n">types</span>

<span class="k">with</span> <span class="n">client</span><span class="o">.</span><span class="n">conversation</span><span class="p">(</span><span class="s1">&#39;BotFather&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">conv</span><span class="p">:</span>
    <span class="n">conv</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">&#39;/mybots&#39;</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">get_response</span><span class="p">()</span>
    <span class="n">message</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">get_edit</span><span class="p">()</span>
    <span class="n">message</span><span class="o">.</span><span class="n">click</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">conv</span><span class="o">.</span><span class="n">get_edit</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">message</span><span class="o">.</span><span class="n">get_entities_text</span><span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">MessageEntityCode</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="p">)</span>
</pre></div>
</div>
<p>In addition to that, you can now easily load and export session files
without creating any on-disk file thanks to the <code class="docutils literal notranslate"><span class="pre">StringSession</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">telethon.sessions</span> <span class="kn">import</span> <span class="n">StringSession</span>
<span class="n">string</span> <span class="o">=</span> <span class="n">StringSession</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">session</span><span class="p">)</span>
</pre></div>
</div>
<p>Check out <a class="reference internal" href="../concepts/sessions.html#sessions"><span class="std std-ref">Session Files</span></a> for more details.</p>
<p>For those who aren’t able to install <code class="docutils literal notranslate"><span class="pre">cryptg</span></code>, the support for <code class="docutils literal notranslate"><span class="pre">libssl</span></code>
has been added back. While interfacing <code class="docutils literal notranslate"><span class="pre">libssl</span></code> is not as fast, the speed
when downloading and sending files should really be noticeably faster.</p>
<p>While those are the biggest things, there are still more things to be
excited about.</p>
<section id="id81">
<h3><a class="toc-backref" href="#id324">Additions</a><a class="headerlink" href="#id81" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The mentioned method to start a new <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.conversation</span></code>.</p></li>
<li><p>Implemented global search through <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_messages</span></code>
with <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> entity.</p></li>
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.inline_query</span></code>
method to perform inline queries.</p></li>
<li><p>Bot-API-style <code class="docutils literal notranslate"><span class="pre">file_id</span></code> can now be used to send files and download media.
You can also access <a class="reference internal" href="../modules/utils.html#telethon.utils.resolve_bot_file_id" title="telethon.utils.resolve_bot_file_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.utils.resolve_bot_file_id</span></code></a> and
<a class="reference internal" href="../modules/utils.html#telethon.utils.pack_bot_file_id" title="telethon.utils.pack_bot_file_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.utils.pack_bot_file_id</span></code></a> to resolve and create these
file IDs yourself. Note that each user has its own ID for each file
so you can’t use a bot’s <code class="docutils literal notranslate"><span class="pre">file_id</span></code> with your user, except stickers.</p></li>
<li><p>New <a class="reference internal" href="../modules/utils.html#telethon.utils.get_peer" title="telethon.utils.get_peer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.utils.get_peer</span></code></a>, useful when you expect a <a class="reference external" href="https://tl.telethon.dev/?q=Peer">Peer</a>.</p></li>
</ul>
</section>
<section id="id82">
<h3><a class="toc-backref" href="#id325">Bug fixes</a><a class="headerlink" href="#id82" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>UTC timezone for <code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.events.userupdate.UserUpdate</span></code>.</p></li>
<li><p>Bug with certain input parameters when iterating messages.</p></li>
<li><p>RPC errors without parent requests caused a crash, and better logging.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">incoming</span> <span class="pre">=</span> <span class="pre">outgoing</span> <span class="pre">=</span> <span class="pre">True</span></code> was not working properly.</p></li>
<li><p>Getting a message’s ID was not working.</p></li>
<li><p>File attributes not being inferred for <code class="docutils literal notranslate"><span class="pre">open()</span></code>’ed files.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">MemorySession</span></code> if <code class="docutils literal notranslate"><span class="pre">sqlite3</span></code> is not installed by default.</p></li>
<li><p>Self-user would not be saved to the session file after signing in.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.catch_up()</span></code>
seems to be functional again.</p></li>
</ul>
</section>
<section id="id83">
<h3><a class="toc-backref" href="#id326">Enhancements</a><a class="headerlink" href="#id83" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Updated documentation.</p></li>
<li><p>Invite links will now use cache, so using them as entities is cheaper.</p></li>
<li><p>You can reuse message buttons to send new messages with those buttons.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.to_dict()</span></code> will now work even on invalid <code class="docutils literal notranslate"><span class="pre">TLObject</span></code>’s.</p></li>
</ul>
</section>
</section>
<section id="better-custom-message-v1-1-1">
<h2><a class="toc-backref" href="#id327">Better Custom Message (v1.1.1)</a><a class="headerlink" href="#better-custom-message-v1-1-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/07/23</em></p>
<p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">custom.Message</span></code> class has been
rewritten in a cleaner way and overall feels less hacky in the library.
This should perform better than the previous way in which it was patched.</p>
<p>The release is primarily intended to test this big change, but also fixes
<strong>Python 3.5.2 compatibility</strong> which was broken due to a trailing comma.</p>
<section id="id84">
<h3><a class="toc-backref" href="#id328">Bug fixes</a><a class="headerlink" href="#id84" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Using <code class="docutils literal notranslate"><span class="pre">functools.partial</span></code> on event handlers broke updates
if they had uncaught exceptions.</p></li>
<li><p>A bug under some session files where the sender would export
authorization for the same data center, which is unsupported.</p></li>
<li><p>Some logical bugs in the custom message class.</p></li>
</ul>
</section>
</section>
<section id="bot-friendly-v1-1">
<h2><a class="toc-backref" href="#id329">Bot Friendly (v1.1)</a><a class="headerlink" href="#bot-friendly-v1-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/07/21</em></p>
<p>Two new event handlers to ease creating normal bots with the library,
namely <code class="xref py py-obj docutils literal notranslate"><span class="pre">events.InlineQuery</span></code>
and <code class="xref py py-obj docutils literal notranslate"><span class="pre">events.CallbackQuery</span></code>
for handling <code class="docutils literal notranslate"><span class="pre">&#64;InlineBot</span> <span class="pre">queries</span></code> or reacting to a button click. For
this second option, there is an even better way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">telethon.tl.custom</span> <span class="kn">import</span> <span class="n">Button</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">event</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="s1">&#39;Thank you!&#39;</span><span class="p">)</span>

<span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">&#39;Hello!&#39;</span><span class="p">,</span>
                 <span class="n">buttons</span><span class="o">=</span><span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;Click me&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="p">))</span>
</pre></div>
</div>
<p>You can directly pass the callback when creating the button.</p>
<p>This is fine for small bots but it will add the callback every time
you send a message, so you probably should do this instead once you
are done testing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">markup</span> <span class="o">=</span> <span class="n">bot</span><span class="o">.</span><span class="n">build_reply_markup</span><span class="p">(</span><span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;Click me&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="p">))</span>
<span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">&#39;Hello!&#39;</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="n">markup</span><span class="p">)</span>
</pre></div>
</div>
<p>And yes, you can create more complex button layouts with lists:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">events</span>

<span class="k">global</span> <span class="n">phone</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

<span class="nd">@bot</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="n">events</span><span class="o">.</span><span class="n">CallbackQuery</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">phone</span>
    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">data</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;&lt;&#39;</span><span class="p">:</span>
        <span class="n">phone</span> <span class="o">=</span> <span class="n">phone</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">phone</span> <span class="o">+=</span> <span class="n">event</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

    <span class="k">await</span> <span class="n">event</span><span class="o">.</span><span class="n">answer</span><span class="p">(</span><span class="s1">&#39;Phone is now </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">phone</span><span class="p">))</span>

<span class="n">markup</span> <span class="o">=</span> <span class="n">bot</span><span class="o">.</span><span class="n">build_reply_markup</span><span class="p">([</span>
    <span class="p">[</span><span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">),</span> <span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">),</span> <span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;3&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;4&#39;</span><span class="p">),</span> <span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;5&#39;</span><span class="p">),</span> <span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;6&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;7&#39;</span><span class="p">),</span> <span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;8&#39;</span><span class="p">),</span> <span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;9&#39;</span><span class="p">)],</span>
    <span class="p">[</span><span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;+&#39;</span><span class="p">),</span> <span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;0&#39;</span><span class="p">),</span> <span class="n">Button</span><span class="o">.</span><span class="n">inline</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span><span class="p">)],</span>
<span class="p">])</span>
<span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">&#39;Enter a phone&#39;</span><span class="p">,</span> <span class="n">buttons</span><span class="o">=</span><span class="n">markup</span><span class="p">)</span>
</pre></div>
</div>
<p>(Yes, there are better ways to do this). Now for the rest of things:</p>
<section id="id85">
<h3><a class="toc-backref" href="#id330">Additions</a><a class="headerlink" href="#id85" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">custom.Button</span></code> class
to help you create inline (or normal) reply keyboards. You
must sign in as a bot to use the <code class="docutils literal notranslate"><span class="pre">buttons=</span></code> parameters.</p></li>
<li><p>New events usable if you sign in as a bot: <code class="xref py py-obj docutils literal notranslate"><span class="pre">events.InlineQuery</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">events.CallbackQuery</span></code>.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">silent</span></code> parameter when sending messages, usable in broadcast channels.</p></li>
<li><p>Documentation now has an entire section dedicate to how to use
the client’s friendly methods at <em>(removed broken link)</em>.</p></li>
</ul>
</section>
<section id="id86">
<h3><a class="toc-backref" href="#id331">Bug fixes</a><a class="headerlink" href="#id86" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Empty <code class="docutils literal notranslate"><span class="pre">except</span></code> are no longer used which means
sending a keyboard interrupt should now work properly.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">pts</span></code> of incoming updates could be <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>.</p></li>
<li><p>UTC timezone information is properly set for read <code class="docutils literal notranslate"><span class="pre">datetime</span></code>.</p></li>
<li><p>Some infinite recursion bugs in the custom message class.</p></li>
<li><p><a class="reference external" href="https://tl.telethon.dev/?q=Updates">Updates</a> was being dispatched to raw handlers when it shouldn’t.</p></li>
<li><p>Using proxies and HTTPS connection mode may now work properly.</p></li>
<li><p>Less flood waits when downloading media from different data centers,
and the library will now detect them even before sending requests.</p></li>
</ul>
</section>
<section id="id87">
<h3><a class="toc-backref" href="#id332">Enhancements</a><a class="headerlink" href="#id87" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Interactive sign in now supports signing in with a bot token.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timedelta</span></code> is now supported where a date is expected, which
means you can e.g. ban someone for <code class="docutils literal notranslate"><span class="pre">timedelta(minutes=5)</span></code>.</p></li>
<li><p>Events are only built once and reused many times, which should
save quite a few CPU cycles if you have a lot of the same type.</p></li>
<li><p>You can now click inline buttons directly if you know their data.</p></li>
</ul>
</section>
<section id="id88">
<h3><a class="toc-backref" href="#id333">Internal changes</a><a class="headerlink" href="#id88" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>When downloading media, the right sender is directly
used without previously triggering migrate errors.</p></li>
<li><p>Code reusing for getting the chat and the sender,
which easily enables this feature for new types.</p></li>
</ul>
</section>
</section>
<section id="new-http-s-connection-mode-v1-0-4">
<h2><a class="toc-backref" href="#id334">New HTTP(S) Connection Mode (v1.0.4)</a><a class="headerlink" href="#new-http-s-connection-mode-v1-0-4" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/07/09</em></p>
<p>This release implements the HTTP connection mode to the library, which
means certain proxies that only allow HTTP connections should now work
properly. You can use it doing the following, like any other mode:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">TelegramClient</span><span class="p">,</span> <span class="n">sync</span>
<span class="kn">from</span> <span class="nn">telethon.network</span> <span class="kn">import</span> <span class="n">ConnectionHttp</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">TelegramClient</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">connection</span><span class="o">=</span><span class="n">ConnectionHttp</span><span class="p">)</span>
<span class="k">with</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">&#39;me&#39;</span><span class="p">,</span> <span class="s1">&#39;Hi!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<section id="id89">
<h3><a class="toc-backref" href="#id335">Additions</a><a class="headerlink" href="#id89" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">add_mark=</span></code> is now back on <code class="docutils literal notranslate"><span class="pre">utils.get_input_peer</span></code> and also on
<code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_input_entity()</span></code>.</p></li>
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_peer_id</span></code>
convenience for <code class="docutils literal notranslate"><span class="pre">utils.get_peer_id(await</span> <span class="pre">client.get_input_entity(peer))</span></code>.</p></li>
</ul>
</section>
<section id="id90">
<h3><a class="toc-backref" href="#id336">Bug fixes</a><a class="headerlink" href="#id90" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>If several <code class="xref py py-obj docutils literal notranslate"><span class="pre">TLMessage</span></code> in a <code class="xref py py-obj docutils literal notranslate"><span class="pre">MessageContainer</span></code> exceeds 1MB, it will no
longer be automatically turned into one. This basically means that e.g.
uploading 10 file parts at once will work properly again.</p></li>
<li><p>Documentation fixes and some missing <code class="docutils literal notranslate"><span class="pre">await</span></code>.</p></li>
<li><p>Revert named argument for <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.forward_messages</span></code></p></li>
</ul>
</section>
<section id="id91">
<h3><a class="toc-backref" href="#id337">Enhancements</a><a class="headerlink" href="#id91" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New auto-casts to <a class="reference external" href="https://tl.telethon.dev/?q=InputNotifyPeer">InputNotifyPeer</a> and <code class="docutils literal notranslate"><span class="pre">chat_id</span></code>.</p></li>
</ul>
</section>
<section id="id92">
<h3><a class="toc-backref" href="#id338">Internal changes</a><a class="headerlink" href="#id92" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Outgoing <code class="xref py py-obj docutils literal notranslate"><span class="pre">TLMessage</span></code> are now pre-packed so if there’s an error when
serializing the raw requests, the library will no longer swallow it.
This also means re-sending packets doesn’t need to re-pack their bytes.</p></li>
</ul>
</section>
</section>
<section id="iterate-messages-in-reverse-v1-0-3">
<h2><a class="toc-backref" href="#id339">Iterate Messages in Reverse (v1.0.3)</a><a class="headerlink" href="#iterate-messages-in-reverse-v1-0-3" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/07/04</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 82</p></td>
</tr>
</tbody>
</table>
<p>Mostly bug fixes, but now there is a new parameter on <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_messages</span></code> to support reversing
the order in which messages are returned.</p>
<section id="id93">
<h3><a class="toc-backref" href="#id340">Additions</a><a class="headerlink" href="#id93" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The mentioned <code class="docutils literal notranslate"><span class="pre">reverse</span></code> parameter when iterating over messages.</p></li>
<li><p>A new <code class="docutils literal notranslate"><span class="pre">sequential_updates</span></code> parameter when creating the client
for updates to be processed sequentially. This is useful when you
need to make sure that all updates are processed in order, such
as a script that only forwards incoming messages somewhere else.</p></li>
</ul>
</section>
<section id="id94">
<h3><a class="toc-backref" href="#id341">Bug fixes</a><a class="headerlink" href="#id94" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Count was always <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> for <code class="xref py py-obj docutils literal notranslate"><span class="pre">message.button_count</span></code>.</p></li>
<li><p>Some fixes when disconnecting upon dropping the client.</p></li>
<li><p>Support for Python 3.4 in the sync version, and fix media download.</p></li>
<li><p>Some issues with events when accessing the input chat or their media.</p></li>
<li><p>Hachoir wouldn’t automatically close the file after reading its metadata.</p></li>
<li><p>Signing in required a named <code class="docutils literal notranslate"><span class="pre">code=</span></code> parameter, but usage
without a name was really widespread so it has been reverted.</p></li>
</ul>
</section>
</section>
<section id="bug-fixes-v1-0-2">
<h2><a class="toc-backref" href="#id342">Bug Fixes (v1.0.2)</a><a class="headerlink" href="#bug-fixes-v1-0-2" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/06/28</em></p>
<p>Updated some asserts and parallel downloads, as well as some fixes for sync.</p>
</section>
<section id="bug-fixes-v1-0-1">
<h2><a class="toc-backref" href="#id343">Bug Fixes (v1.0.1)</a><a class="headerlink" href="#bug-fixes-v1-0-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/06/27</em></p>
<p>And as usual, every major release has a few bugs that make the library
unusable! This quick update should fix those, namely:</p>
<section id="id95">
<h3><a class="toc-backref" href="#id344">Bug fixes</a><a class="headerlink" href="#id95" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.start()</span></code> was completely
broken due to a last-time change requiring named arguments everywhere.</p></li>
<li><p>Since the rewrite, if your system clock was wrong, the connection would
get stuck in an infinite “bad message” loop of responses from Telegram.</p></li>
<li><p>Accessing the buttons of a custom message wouldn’t work in channels,
which lead to fix a completely different bug regarding starting bots.</p></li>
<li><p>Disconnecting could complain if the magic <code class="docutils literal notranslate"><span class="pre">telethon.sync</span></code> was imported.</p></li>
<li><p>Successful automatic reconnections now ask Telegram to send updates to us
once again as soon as the library is ready to listen for them.</p></li>
</ul>
</section>
</section>
<section id="synchronous-magic-v1-0">
<h2><a class="toc-backref" href="#id345">Synchronous magic (v1.0)</a><a class="headerlink" href="#synchronous-magic-v1-0" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/06/27</em></p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If you come from Telethon pre-1.0 you <strong>really</strong> want to read
<a class="reference internal" href="compatibility-and-convenience.html#compatibility-and-convenience"><span class="std std-ref">Compatibility and Convenience</span></a> to port your scripts to
the new version.</p>
</div>
<p>The library has been around for well over a year. A lot of improvements have
been made, a lot of user complaints have been fixed, and a lot of user desires
have been implemented. It’s time to consider the public API as stable, and
remove some of the old methods that were around until now for compatibility
reasons. But there’s one more surprise!</p>
<p>There is a new magic <code class="docutils literal notranslate"><span class="pre">telethon.sync</span></code> module to let you use <strong>all</strong> the
methods in the <a class="reference internal" href="../modules/client.html#telethon-client"><span class="std std-ref">TelegramClient</span></a> (and the types returned
from its functions) in a synchronous way, while using <a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asyncio</span></code></a> behind
the scenes! This means you’re now able to do both of the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
  <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">&#39;me&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello!&#39;</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>

<span class="c1"># ...can be rewritten as:</span>

<span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">sync</span>
<span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">&#39;me&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Both ways can coexist (you need to <code class="docutils literal notranslate"><span class="pre">await</span></code> if the loop is running).</p>
<p>You can also use the magic <code class="docutils literal notranslate"><span class="pre">sync</span></code> module in your own classes, and call
<code class="docutils literal notranslate"><span class="pre">sync.syncify(cls)</span></code> to convert all their <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> into magic variants.</p>
<section id="id96">
<h3><a class="toc-backref" href="#id346">Breaking Changes</a><a class="headerlink" href="#id96" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">message.get_fwd_sender</span></code> is now in <code class="xref py py-obj docutils literal notranslate"><span class="pre">message.forward</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client.idle</span></code> is now <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.run_until_disconnected()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client.add_update_handler</span></code> is now <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.add_event_handler</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client.remove_update_handler</span></code> is now <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.remove_event_handler</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client.list_update_handlers</span></code> is now <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.list_event_handlers</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client.get_message_history</span></code> is now <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_messages</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client.send_voice_note</span></code> is now <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_file</span></code> with <code class="docutils literal notranslate"><span class="pre">is_voice=True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client.invoke()</span></code> is now <code class="docutils literal notranslate"><span class="pre">client(...)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">report_errors</span></code> has been removed since it’s currently not used,
and <code class="docutils literal notranslate"><span class="pre">flood_sleep_threshold</span></code> is now part of the client.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">update_workers</span></code> and <code class="docutils literal notranslate"><span class="pre">spawn_read_thread</span></code> arguments are gone.
Simply remove them from your code when you create the client.</p></li>
<li><p>Methods with a lot of arguments can no longer be used without specifying
their argument. Instead you need to use named arguments. This improves
readability and not needing to learn the order of the arguments, which
can also change.</p></li>
</ul>
</section>
<section id="id97">
<h3><a class="toc-backref" href="#id347">Additions</a><a class="headerlink" href="#id97" title="Permalink to this heading"></a></h3>
<ul>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.send_file</span></code> now
accepts external <code class="docutils literal notranslate"><span class="pre">http://</span></code> and <code class="docutils literal notranslate"><span class="pre">https://</span></code> URLs.</p></li>
<li><p>You can use the <a class="reference internal" href="../modules/client.html#telethon-client"><span class="std std-ref">TelegramClient</span></a> inside of <code class="docutils literal notranslate"><span class="pre">with</span></code>
blocks, which will <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.start()</span></code>
and <code class="xref py py-obj docutils literal notranslate"><span class="pre">disconnect()</span></code>
the client for you:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">telethon</span> <span class="kn">import</span> <span class="n">TelegramClient</span><span class="p">,</span> <span class="n">sync</span>

<span class="k">with</span> <span class="n">TelegramClient</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">api_id</span><span class="p">,</span> <span class="n">api_hash</span><span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>
    <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="s1">&#39;me&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Convenience at its maximum! You can even chain the <code class="xref py py-obj docutils literal notranslate"><span class="pre">.start()</span></code> method since
it returns the instance of the client:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">TelegramClient</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">api_id</span><span class="p">,</span> <span class="n">api_hash</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">bot_token</span><span class="o">=</span><span class="n">token</span><span class="p">)</span> <span class="k">as</span> <span class="n">bot</span><span class="p">:</span>
    <span class="n">bot</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">&#39;Hello!&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id98">
<h3><a class="toc-backref" href="#id348">Bug fixes</a><a class="headerlink" href="#id98" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>There were some <code class="docutils literal notranslate"><span class="pre">&#64;property</span> <span class="pre">async</span> <span class="pre">def</span></code> left, and some <code class="docutils literal notranslate"><span class="pre">await</span> <span class="pre">property</span></code>.</p></li>
<li><p>“User joined” event was being treated as “User was invited”.</p></li>
<li><p>SQLite’s cursor should not be closed properly after usage.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">await</span></code> the updates task upon disconnection.</p></li>
<li><p>Some bug in Python 3.5.2’s <a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asyncio</span></code></a> causing 100% CPU load if you
forgot to call <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.disconnect()</span></code>.
The method is called for you on object destruction, but you still should
disconnect manually or use a <code class="docutils literal notranslate"><span class="pre">with</span></code> block.</p></li>
<li><p>Some fixes regarding disconnecting on client deletion and properly
saving the authorization key.</p></li>
<li><p>Passing a class to <code class="xref py py-obj docutils literal notranslate"><span class="pre">message.get_entities_text</span></code> now works properly.</p></li>
<li><p>Iterating messages from a specific user in private messages now works.</p></li>
</ul>
</section>
<section id="id99">
<h3><a class="toc-backref" href="#id349">Enhancements</a><a class="headerlink" href="#id99" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Both <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.start()</span></code> and
<code class="xref py py-obj docutils literal notranslate"><span class="pre">client.run_until_disconnected()</span></code> can
be ran in both a synchronous way (without starting the loop manually)
or from an <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span></code> where they need to have an <code class="docutils literal notranslate"><span class="pre">await</span></code>.</p></li>
</ul>
</section>
</section>
<section id="core-rewrite-in-asyncio-v1-0-rc1">
<h2><a class="toc-backref" href="#id350">Core Rewrite in asyncio (v1.0-rc1)</a><a class="headerlink" href="#core-rewrite-in-asyncio-v1-0-rc1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/06/24</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 81</p></td>
</tr>
</tbody>
</table>
<p>This version is a major overhaul of the library internals. The core has
been rewritten, cleaned up and refactored to fix some oddities that have
been growing inside the library.</p>
<p>This means that the code is easier to understand and reason about,
including the code flow such as conditions, exceptions, where to
reconnect, how the library should behave, and separating different
retry types such as disconnections or call fails, but it also means
that <strong>some things will necessarily break</strong> in this version.</p>
<p>All requests that touch the network are now methods and need to
have their <code class="docutils literal notranslate"><span class="pre">await</span></code> (or be ran until their completion).</p>
<p>Also, the library finally has the simple logo it deserved: a carefully
hand-written <code class="docutils literal notranslate"><span class="pre">.svg</span></code> file representing a T following Python’s colours.</p>
<section id="id100">
<h3><a class="toc-backref" href="#id351">Breaking Changes</a><a class="headerlink" href="#id100" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>If you relied on internals like the <code class="docutils literal notranslate"><span class="pre">MtProtoSender</span></code> and the
<code class="docutils literal notranslate"><span class="pre">TelegramBareClient</span></code>, both are gone. They are now <code class="xref py py-obj docutils literal notranslate"><span class="pre">MTProtoSender</span></code> and <code class="xref py py-obj docutils literal notranslate"><span class="pre">TelegramBaseClient</span></code> and they behave
differently.</p></li>
<li><p>Underscores have been renamed from filenames. This means
<code class="docutils literal notranslate"><span class="pre">telethon.errors.rpc_error_list</span></code> won’t work, but you should
have been using <code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.errors</span></code> all this time instead.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">client.connect</span></code>
no longer returns <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a> on success. Instead, you should <code class="docutils literal notranslate"><span class="pre">except</span></code> the
possible <code class="docutils literal notranslate"><span class="pre">ConnectionError</span></code> and act accordingly. This makes it easier to
not ignore the error.</p></li>
<li><p>You can no longer set <code class="docutils literal notranslate"><span class="pre">retries=n</span></code> when calling a request manually. The
limit works differently now, and it’s done on a per-client basis.</p></li>
<li><p>Accessing <code class="xref py py-obj docutils literal notranslate"><span class="pre">.sender</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">.chat</span></code> and similar may <em>not</em> work
in events anymore, since previously they could access the network. The new
rule is that properties are not allowed to make API calls. You should use
<code class="xref py py-obj docutils literal notranslate"><span class="pre">.get_sender()</span></code>,
<code class="xref py py-obj docutils literal notranslate"><span class="pre">.get_chat()</span></code> instead while
using events. You can safely access properties if you get messages through
<code class="xref py py-obj docutils literal notranslate"><span class="pre">client.get_messages()</span></code>
or other methods in the client.</p></li>
<li><p>The above point means <code class="docutils literal notranslate"><span class="pre">reply_message</span></code> is now <code class="xref py py-obj docutils literal notranslate"><span class="pre">.get_reply_message()</span></code>, and <code class="docutils literal notranslate"><span class="pre">fwd_from_entity</span></code>
is now <code class="xref py py-obj docutils literal notranslate"><span class="pre">get_fwd_sender()</span></code>.
Also <code class="docutils literal notranslate"><span class="pre">forward</span></code> was gone in the previous version, and you should be using
<code class="docutils literal notranslate"><span class="pre">fwd_from</span></code> instead.</p></li>
</ul>
</section>
<section id="id101">
<h3><a class="toc-backref" href="#id352">Additions</a><a class="headerlink" href="#id101" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Telegram’s Terms Of Service are now accepted when creating a new account.
This can possibly help avoid bans. This has no effect for accounts that
were created before.</p></li>
<li><p>The <a class="reference external" href="https://tl.telethon.dev/">method reference</a> now shows
which methods can be used if you sign in with a <code class="docutils literal notranslate"><span class="pre">bot_token</span></code>.</p></li>
<li><p>There’s a new <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.disconnected</span></code> future
which you can wait on. When a disconnection occurs, you will now, instead
letting it happen in the background.</p></li>
<li><p>More configurable retries parameters, such as auto-reconnection, retries
when connecting, and retries when sending a request.</p></li>
<li><p>You can filter <code class="xref py py-obj docutils literal notranslate"><span class="pre">events.NewMessage</span></code>
by sender ID, and also whether they are forwards or not.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">ignore_migrated</span></code> parameter for <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_dialogs</span></code>.</p></li>
</ul>
</section>
<section id="id102">
<h3><a class="toc-backref" href="#id353">Bug fixes</a><a class="headerlink" href="#id102" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Several fixes to <code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.events.newmessage.NewMessage</span></code>.</p></li>
<li><p>Removed named <code class="docutils literal notranslate"><span class="pre">length</span></code> argument in <code class="docutils literal notranslate"><span class="pre">to_bytes</span></code> for PyPy.</p></li>
<li><p>Raw events failed due to not having <code class="docutils literal notranslate"><span class="pre">._set_client</span></code>.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">message.get_entities_text</span></code> properly
supports filtering, even if there are no message entities.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">message.click</span></code> works better.</p></li>
<li><p>The server started sending <a class="reference external" href="https://tl.telethon.dev/?q=DraftMessageEmpty">DraftMessageEmpty</a> which the library
didn’t handle correctly when getting dialogs.</p></li>
<li><p>The “correct” chat is now always returned from returned messages.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_id</span></code> was not validated when retrieving messages by their IDs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'__'</span></code> is no longer considered valid in usernames.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">fd</span></code> is removed from the reader upon closing the socket. This
should be noticeable in Windows.</p></li>
<li><p><a class="reference external" href="https://tl.telethon.dev/?q=MessageEmpty">MessageEmpty</a> is now handled when searching messages.</p></li>
<li><p>Fixed a rare infinite loop bug in <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.iter_dialogs</span></code> for some people.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">TypeError</span></code> when there is no <code class="xref py py-obj docutils literal notranslate"><span class="pre">.sender</span></code>.</p></li>
</ul>
</section>
<section id="id103">
<h3><a class="toc-backref" href="#id354">Enhancements</a><a class="headerlink" href="#id103" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>You can now delete over 100 messages at once with <code class="xref py py-obj docutils literal notranslate"><span class="pre">client.delete_messages</span></code>.</p></li>
<li><p>Signing in now accounts for <code class="docutils literal notranslate"><span class="pre">AuthRestartError</span></code> itself, and also handles
<code class="docutils literal notranslate"><span class="pre">PasswordHashInvalidError</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__all__</span></code> is now defined, so <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">telethon</span> <span class="pre">import</span> <span class="pre">*</span></code> imports sane
defaults (client, events and utils). This is however discouraged and should
be used only in quick scripts.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code> is now supported for downloading and uploading media.</p></li>
<li><p>Messages you send to yourself are now considered outgoing, unless they
are forwarded.</p></li>
<li><p>The documentation has been updated with a brand new <a class="reference external" href="https://docs.python.org/3/library/asyncio.html#module-asyncio" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asyncio</span></code></a> crash
course to encourage you use it. You can still use the threaded version
if you want though.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.name</span></code> property is now properly supported when sending and downloading
files.</p></li>
<li><p>Custom <code class="docutils literal notranslate"><span class="pre">parse_mode</span></code>, which can now be set per-client, support
<a class="reference external" href="https://tl.telethon.dev/?q=MessageEntityMentionName">MessageEntityMentionName</a> so you can return those now.</p></li>
<li><p>The session file is saved less often, which could result in a noticeable
speed-up when working with a lot of incoming updates.</p></li>
</ul>
</section>
<section id="id104">
<h3><a class="toc-backref" href="#id355">Internal changes</a><a class="headerlink" href="#id104" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The flow for sending a request is as follows: the <code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code> creates
a <code class="docutils literal notranslate"><span class="pre">MTProtoSender</span></code> with a <code class="docutils literal notranslate"><span class="pre">Connection</span></code>, and the sender starts send and
receive loops. Sending a request means enqueueing it in the sender, which
will eventually pack and encrypt it with its <code class="docutils literal notranslate"><span class="pre">ConnectionState</span></code> instead
of using the entire <code class="docutils literal notranslate"><span class="pre">Session</span></code> instance. When the data is packed, it will
be sent over the <code class="docutils literal notranslate"><span class="pre">Connection</span></code> and ultimately over the <code class="docutils literal notranslate"><span class="pre">TcpClient</span></code>.</p></li>
<li><p>Reconnection occurs at the <code class="docutils literal notranslate"><span class="pre">MTProtoSender</span></code> level, and receiving responses
follows a similar process, but now <code class="docutils literal notranslate"><span class="pre">asyncio.Future</span></code> is used for the results
which are no longer part of all <code class="docutils literal notranslate"><span class="pre">TLObject</span></code>, instead are part of the
<code class="docutils literal notranslate"><span class="pre">TLMessage</span></code> which simplifies things.</p></li>
<li><p>Objects can no longer be <code class="docutils literal notranslate"><span class="pre">content_related</span></code> and instead subclass
<code class="docutils literal notranslate"><span class="pre">TLRequest</span></code>, making the separation of concerns easier.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code> has been split into several mixin classes to avoid
having a 3,000-lines-long file with all the methods.</p></li>
<li><p>More special cases in the <code class="docutils literal notranslate"><span class="pre">MTProtoSender</span></code> have been cleaned up, and also
some attributes from the <code class="docutils literal notranslate"><span class="pre">Session</span></code> which didn’t really belong there since
they weren’t being saved.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">telethon_generator/</span></code> can now convert <code class="docutils literal notranslate"><span class="pre">.tl</span></code> files into <code class="docutils literal notranslate"><span class="pre">.json</span></code>,
mostly as a proof of concept, but it might be useful for other people.</p></li>
</ul>
</section>
</section>
<section id="custom-message-class-v0-19-1">
<h2><a class="toc-backref" href="#id356">Custom Message class (v0.19.1)</a><a class="headerlink" href="#custom-message-class-v0-19-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/06/03</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 80</p></td>
</tr>
</tbody>
</table>
<p>This update brings a new <code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.tl.custom.message.Message</span></code> object!</p>
<p>All the methods in the <code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient</span></code> that
used to return a <a class="reference external" href="https://tl.telethon.dev/?q=Message">Message</a> will now return this object instead, which
means you can do things like the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">msg</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">&#39;Hello!&#39;</span><span class="p">)</span>
<span class="n">msg</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="s1">&#39;Hello there!&#39;</span><span class="p">)</span>
<span class="n">msg</span><span class="o">.</span><span class="n">reply</span><span class="p">(</span><span class="s1">&#39;Good day!&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">sender</span><span class="p">)</span>
</pre></div>
</div>
<p>Refer to its documentation to see all you can do, again, click
<code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.tl.custom.message.Message</span></code> to go to its page.</p>
<section id="id105">
<h3><a class="toc-backref" href="#id357">Breaking Changes</a><a class="headerlink" href="#id105" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The <code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.network.connection.common.Connection</span></code> class is now an ABC,
and the old <code class="docutils literal notranslate"><span class="pre">ConnectionMode</span></code> is now gone. Use a specific connection (like
<a class="reference internal" href="../modules/network.html#telethon.network.connection.tcpabridged.ConnectionTcpAbridged" title="telethon.network.connection.tcpabridged.ConnectionTcpAbridged"><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.network.connection.tcpabridged.ConnectionTcpAbridged</span></code></a>) instead.</p></li>
</ul>
</section>
<section id="id106">
<h3><a class="toc-backref" href="#id358">Additions</a><a class="headerlink" href="#id106" title="Permalink to this heading"></a></h3>
<ul>
<li><p>You can get messages by their ID with
<code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.get_messages</span></code>’s <code class="docutils literal notranslate"><span class="pre">ids</span></code> parameter:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">message</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_messages</span><span class="p">(</span><span class="n">chats</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>  <span class="c1"># Single message</span>
<span class="n">message_list</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_messages</span><span class="p">(</span><span class="n">chats</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="p">[</span><span class="mi">777</span><span class="p">,</span> <span class="mi">778</span><span class="p">])</span>  <span class="c1"># Multiple</span>
</pre></div>
</div>
</li>
<li><p>More convenience properties for <code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.tl.custom.dialog.Dialog</span></code>.</p></li>
<li><p>New default <code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.parse_mode</span></code>.</p></li>
<li><p>You can edit the media of messages that already have some media.</p></li>
<li><p>New dark theme in the online <code class="docutils literal notranslate"><span class="pre">tl</span></code> reference, check it out at
<a class="reference external" href="https://tl.telethon.dev/">https://tl.telethon.dev/</a>.</p></li>
</ul>
</section>
<section id="id107">
<h3><a class="toc-backref" href="#id359">Bug fixes</a><a class="headerlink" href="#id107" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Some IDs start with <code class="docutils literal notranslate"><span class="pre">1000</span></code> and these would be wrongly treated as channels.</p></li>
<li><p>Some short usernames like <code class="docutils literal notranslate"><span class="pre">&#64;vote</span></code> were being ignored.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.iter_messages</span></code>’s <code class="docutils literal notranslate"><span class="pre">from_user</span></code>
was failing if no filter had been set.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.iter_messages</span></code>’s <code class="docutils literal notranslate"><span class="pre">min_id/max_id</span></code>
was being ignored by Telegram. This is now worked around.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.catch_up</span></code> would fail with empty
states.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.events.newmessage.NewMessage</span></code> supports <code class="docutils literal notranslate"><span class="pre">incoming=False</span></code>
to indicate <code class="docutils literal notranslate"><span class="pre">outgoing=True</span></code>.</p></li>
</ul>
</section>
<section id="id108">
<h3><a class="toc-backref" href="#id360">Enhancements</a><a class="headerlink" href="#id108" title="Permalink to this heading"></a></h3>
<ul>
<li><p>You can now send multiple requests at once while preserving the order:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">telethon.tl.functions.messages</span> <span class="kn">import</span> <span class="n">SendMessageRequest</span>
<span class="n">client</span><span class="p">([</span><span class="n">SendMessageRequest</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">&#39;Hello 1!&#39;</span><span class="p">),</span>
        <span class="n">SendMessageRequest</span><span class="p">(</span><span class="n">chat</span><span class="p">,</span> <span class="s1">&#39;Hello 2!&#39;</span><span class="p">)],</span> <span class="n">ordered</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id109">
<h3><a class="toc-backref" href="#id361">Internal changes</a><a class="headerlink" href="#id109" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">without</span> <span class="pre">rowid</span></code> is not used in SQLite anymore.</p></li>
<li><p>Unboxed serialization would fail.</p></li>
<li><p>Different default limit for <code class="docutils literal notranslate"><span class="pre">iter_messages</span></code> and <code class="docutils literal notranslate"><span class="pre">get_messages</span></code>.</p></li>
<li><p>Some clean-up in the <code class="docutils literal notranslate"><span class="pre">telethon_generator/</span></code> package.</p></li>
</ul>
</section>
</section>
<section id="catching-up-on-updates-v0-19">
<h2><a class="toc-backref" href="#id362">Catching up on Updates (v0.19)</a><a class="headerlink" href="#catching-up-on-updates-v0-19" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/05/07</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 76</p></td>
</tr>
</tbody>
</table>
<p>This update prepares the library for catching up with updates with the new
<code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.catch_up</span></code> method. This feature needs
more testing, but for now it will let you “catch up” on some old updates that
occurred while the library was offline, and brings some new features and bug
fixes.</p>
<section id="id110">
<h3><a class="toc-backref" href="#id363">Additions</a><a class="headerlink" href="#id110" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">search</span></code>, <code class="docutils literal notranslate"><span class="pre">filter</span></code> and <code class="docutils literal notranslate"><span class="pre">from_user</span></code> parameters to
<code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.iter_messages</span></code>.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.download_file</span></code> now
supports a <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> path to return the file in memory and
return its <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bytes</span></code></a>.</p></li>
<li><p>Events now have a <code class="docutils literal notranslate"><span class="pre">.original_update</span></code> field.</p></li>
</ul>
</section>
<section id="id111">
<h3><a class="toc-backref" href="#id364">Bug fixes</a><a class="headerlink" href="#id111" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fixed a race condition when receiving items from the network.</p></li>
<li><p>A disconnection is made when “retries reached 0”. This hasn’t been
tested but it might fix the bug.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reply_to</span></code> would not override <a class="reference external" href="https://tl.telethon.dev/?q=Message">Message</a> object’s reply value.</p></li>
<li><p>Add missing caption when sending <a class="reference external" href="https://tl.telethon.dev/?q=Message">Message</a> with media.</p></li>
</ul>
</section>
<section id="id112">
<h3><a class="toc-backref" href="#id365">Enhancements</a><a class="headerlink" href="#id112" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Retry automatically on <code class="docutils literal notranslate"><span class="pre">RpcCallFailError</span></code>. This error happened a lot
when iterating over many messages, and retrying often fixes it.</p></li>
<li><p>Faster <code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.iter_messages</span></code> by
sleeping only as much as needed.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.edit_message</span></code> now supports
omitting the entity if you pass a <a class="reference external" href="https://tl.telethon.dev/?q=Message">Message</a>.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.events.raw.Raw</span></code> can now be filtered by type.</p></li>
</ul>
</section>
<section id="id113">
<h3><a class="toc-backref" href="#id366">Internal changes</a><a class="headerlink" href="#id113" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The library now distinguishes between MTProto and API schemas.</p></li>
<li><p><a class="reference external" href="https://tl.telethon.dev/?q=State">State</a> is now persisted to the session file.</p></li>
<li><p>Connection won’t retry forever.</p></li>
<li><p>Fixed some errors and cleaned up the generation of code.</p></li>
<li><p>Fixed typos and enhanced some documentation in general.</p></li>
<li><p>Add auto-cast for <a class="reference external" href="https://tl.telethon.dev/?q=InputMessage">InputMessage</a> and <a class="reference external" href="https://tl.telethon.dev/?q=InputLocation">InputLocation</a>.</p></li>
</ul>
</section>
</section>
<section id="pickle-able-objects-v0-18-3">
<h2><a class="toc-backref" href="#id367">Pickle-able objects (v0.18.3)</a><a class="headerlink" href="#pickle-able-objects-v0-18-3" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/04/15</em></p>
<p>Now you can use Python’s <code class="docutils literal notranslate"><span class="pre">pickle</span></code> module to serialize <code class="docutils literal notranslate"><span class="pre">RPCError</span></code> and
any other <code class="docutils literal notranslate"><span class="pre">TLObject</span></code> thanks to <strong>&#64;vegeta1k95</strong>! A fix that was fairly
simple, but still might be useful for many people.</p>
<p>As a side note, the documentation at <a class="reference external" href="https://tl.telethon.dev">https://tl.telethon.dev</a>
now lists known <code class="docutils literal notranslate"><span class="pre">RPCError</span></code> for all requests, so you know what to expect.
This required a major rewrite, but it was well worth it!</p>
<section id="id114">
<h3><a class="toc-backref" href="#id368">Breaking changes</a><a class="headerlink" href="#id114" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.forward_messages</span></code> now returns
a single item instead of a list if the input was also a single item.</p></li>
</ul>
</section>
<section id="id115">
<h3><a class="toc-backref" href="#id369">Additions</a><a class="headerlink" href="#id115" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.events.messageread.MessageRead</span></code> event, to find out when
and who read which messages as soon as it happens.</p></li>
<li><p>Now you can access <code class="docutils literal notranslate"><span class="pre">.chat_id</span></code> on all events and <code class="docutils literal notranslate"><span class="pre">.sender_id</span></code> on some.</p></li>
</ul>
</section>
<section id="id116">
<h3><a class="toc-backref" href="#id370">Bug fixes</a><a class="headerlink" href="#id116" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Possibly fix some bug regarding lost <code class="docutils literal notranslate"><span class="pre">GzipPacked</span></code> requests.</p></li>
<li><p>The library now uses the “real” layer 75, hopefully.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">.entities</span></code> name collision on updates by making it private.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AUTH_KEY_DUPLICATED</span></code> is handled automatically on connection.</p></li>
<li><p>Markdown parser’s offset uses <code class="docutils literal notranslate"><span class="pre">match.start()</span></code> to allow custom regex.</p></li>
<li><p>Some filter types (as a type) were not supported by
<code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.iter_participants</span></code>.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.remove_event_handler</span></code> works.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.start</span></code> works on all terminals.</p></li>
<li><p><a class="reference external" href="https://tl.telethon.dev/?q=InputPeerSelf">InputPeerSelf</a> case was missing from
<code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.get_input_entity</span></code>.</p></li>
</ul>
</section>
<section id="id117">
<h3><a class="toc-backref" href="#id371">Enhancements</a><a class="headerlink" href="#id117" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">parse_mode</span></code> for messages now accepts a callable.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.telegram_client.TelegramClient.download_media</span></code> accepts web previews.</p></li>
<li><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">telethon.tl.custom.dialog.Dialog</span></code> instances can now be casted into
<a class="reference external" href="https://tl.telethon.dev/?q=InputPeer">InputPeer</a>.</p></li>
<li><p>Better logging when reading packages “breaks”.</p></li>
<li><p>Better and more powerful <code class="docutils literal notranslate"><span class="pre">setup.py</span> <span class="pre">gen</span></code> command.</p></li>
</ul>
</section>
<section id="id118">
<h3><a class="toc-backref" href="#id372">Internal changes</a><a class="headerlink" href="#id118" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The library won’t call <code class="docutils literal notranslate"><span class="pre">.get_dialogs()</span></code> on entity not found. Instead,
it will <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">ValueError()</span></code> so you can properly <code class="docutils literal notranslate"><span class="pre">except</span></code> it.</p></li>
<li><p>Several new examples and updated documentation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">py:obj</span></code> is the default Sphinx’s role which simplifies <code class="docutils literal notranslate"><span class="pre">.rst</span></code> files.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup.py</span></code> now makes use of <code class="docutils literal notranslate"><span class="pre">python_requires</span></code>.</p></li>
<li><p>Events now live in separate files.</p></li>
<li><p>Other minor changes.</p></li>
</ul>
</section>
</section>
<section id="several-bug-fixes-v0-18-2">
<h2><a class="toc-backref" href="#id373">Several bug fixes (v0.18.2)</a><a class="headerlink" href="#several-bug-fixes-v0-18-2" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/03/27</em></p>
<p>Just a few bug fixes before they become too many.</p>
<section id="id119">
<h3><a class="toc-backref" href="#id374">Additions</a><a class="headerlink" href="#id119" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Getting an entity by its positive ID should be enough, regardless of their
type (whether it’s an <code class="docutils literal notranslate"><span class="pre">User</span></code>, a <code class="docutils literal notranslate"><span class="pre">Chat</span></code> or a <code class="docutils literal notranslate"><span class="pre">Channel</span></code>). Although
wrapping them inside a <code class="docutils literal notranslate"><span class="pre">Peer</span></code> is still recommended, it’s not necessary.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">client.edit_2fa</span></code> function to change your Two Factor Authentication
settings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.stringify()</span></code> and string representation for custom <code class="docutils literal notranslate"><span class="pre">Dialog/Draft</span></code>.</p></li>
</ul>
</section>
<section id="id120">
<h3><a class="toc-backref" href="#id375">Bug fixes</a><a class="headerlink" href="#id120" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Some bug regarding <code class="docutils literal notranslate"><span class="pre">.get_input_peer</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">events.ChatAction</span></code> wasn’t picking up all the pins.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">force_document=True</span></code> was being ignored for albums.</p></li>
<li><p>Now you’re able to send <code class="docutils literal notranslate"><span class="pre">Photo</span></code> and <code class="docutils literal notranslate"><span class="pre">Document</span></code> as files.</p></li>
<li><p>Wrong access to a member on chat forbidden error for <code class="docutils literal notranslate"><span class="pre">.get_participants</span></code>.
An empty list is returned instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">me/self</span></code> check for <code class="docutils literal notranslate"><span class="pre">.get[_input]_entity</span></code> has been moved up so if
someone has “me” or “self” as their name they won’t be retrieved.</p></li>
</ul>
</section>
</section>
<section id="iterator-methods-v0-18-1">
<h2><a class="toc-backref" href="#id376">Iterator methods (v0.18.1)</a><a class="headerlink" href="#iterator-methods-v0-18-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/03/17</em></p>
<p>All the <code class="docutils literal notranslate"><span class="pre">.get_</span></code> methods in the <code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code> now have a <code class="docutils literal notranslate"><span class="pre">.iter_</span></code>
counterpart, so you can do operations while retrieving items from them.
For instance, you can <code class="docutils literal notranslate"><span class="pre">client.iter_dialogs()</span></code> and <code class="docutils literal notranslate"><span class="pre">break</span></code> once you
find what you’re looking for instead fetching them all at once.</p>
<p>Another big thing, you can get entities by just their positive ID. This
may cause some collisions (although it’s very unlikely), and you can (should)
still be explicit about the type you want. However, it’s a lot more convenient
and less confusing.</p>
<section id="id121">
<h3><a class="toc-backref" href="#id377">Breaking changes</a><a class="headerlink" href="#id121" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The library only offers the default <code class="docutils literal notranslate"><span class="pre">SQLiteSession</span></code> again.
See <a class="reference internal" href="../concepts/sessions.html#sessions"><span class="std std-ref">Session Files</span></a> for more on how to use a different storage from now on.</p></li>
</ul>
</section>
<section id="id122">
<h3><a class="toc-backref" href="#id378">Additions</a><a class="headerlink" href="#id122" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Events now override <code class="docutils literal notranslate"><span class="pre">__str__</span></code> and implement <code class="docutils literal notranslate"><span class="pre">.stringify()</span></code>, just like
every other <code class="docutils literal notranslate"><span class="pre">TLObject</span></code> does.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">events.ChatAction</span></code> now has <code class="xref py py-meth docutils literal notranslate"><span class="pre">respond()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">reply()</span></code> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">delete()</span></code> for the message that triggered it.</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">client.iter_participants()</span></code> (and its <code class="xref py py-meth docutils literal notranslate"><span class="pre">client.get_participants()</span></code>
counterpart) now expose the <code class="docutils literal notranslate"><span class="pre">filter</span></code> argument, and the returned users
also expose the <code class="docutils literal notranslate"><span class="pre">.participant</span></code> they are.</p></li>
<li><p>You can now use <code class="xref py py-meth docutils literal notranslate"><span class="pre">client.remove_event_handler()</span></code> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">client.list_event_handlers()</span></code> similar how you could with normal updates.</p></li>
<li><p>New properties on <code class="docutils literal notranslate"><span class="pre">events.NewMessage</span></code>, like <code class="docutils literal notranslate"><span class="pre">.video_note</span></code> and <code class="docutils literal notranslate"><span class="pre">.gif</span></code>
to access only specific types of documents.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Draft</span></code> class now exposes <code class="docutils literal notranslate"><span class="pre">.text</span></code> and <code class="docutils literal notranslate"><span class="pre">.raw_text</span></code>, as well as a
new <code class="xref py py-meth docutils literal notranslate"><span class="pre">Draft.send()</span></code> to send it.</p></li>
</ul>
</section>
<section id="id123">
<h3><a class="toc-backref" href="#id379">Bug fixes</a><a class="headerlink" href="#id123" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MessageEdited</span></code> was ignoring <code class="docutils literal notranslate"><span class="pre">NewMessage</span></code> constructor arguments.</p></li>
<li><p>Fixes for <code class="docutils literal notranslate"><span class="pre">Event.delete_messages</span></code> which wouldn’t handle <code class="docutils literal notranslate"><span class="pre">MessageService</span></code>.</p></li>
<li><p>Bot API style IDs not working on <code class="xref py py-meth docutils literal notranslate"><span class="pre">client.get_input_entity()</span></code>.</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">client.download_media()</span></code> didn’t support <code class="docutils literal notranslate"><span class="pre">PhotoSize</span></code>.</p></li>
</ul>
</section>
<section id="id124">
<h3><a class="toc-backref" href="#id380">Enhancements</a><a class="headerlink" href="#id124" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Less RPC are made when accessing the <code class="docutils literal notranslate"><span class="pre">.sender</span></code> and <code class="docutils literal notranslate"><span class="pre">.chat</span></code> of some
events (mostly those that occur in a channel).</p></li>
<li><p>You can send albums larger than 10 items (they will be sliced for you),
as well as mixing normal files with photos.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TLObject</span></code> now have Python type hints.</p></li>
</ul>
</section>
<section id="id125">
<h3><a class="toc-backref" href="#id381">Internal changes</a><a class="headerlink" href="#id125" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Several documentation corrections.</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">client.get_dialogs()</span></code> is only called once again when an entity is
not found to avoid flood waits.</p></li>
</ul>
</section>
</section>
<section id="sessions-overhaul-v0-18">
<h2><a class="toc-backref" href="#id382">Sessions overhaul (v0.18)</a><a class="headerlink" href="#sessions-overhaul-v0-18" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/03/04</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 75</p></td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">Session</span></code>’s have been revisited thanks to the work of <strong>&#64;tulir</strong> and
they now use an <a class="reference external" href="https://docs.python.org/3/library/abc.html">ABC</a> so you
can easily implement your own!</p>
<p>The default will still be a <code class="docutils literal notranslate"><span class="pre">SQLiteSession</span></code>, but you might want to use
the new <code class="docutils literal notranslate"><span class="pre">AlchemySessionContainer</span></code> if you need. Refer to the section of
the documentation on <a class="reference internal" href="../concepts/sessions.html#sessions"><span class="std std-ref">Session Files</span></a> for more.</p>
<section id="id126">
<h3><a class="toc-backref" href="#id383">Breaking changes</a><a class="headerlink" href="#id126" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">events.MessageChanged</span></code> doesn’t exist anymore. Use the new
<code class="docutils literal notranslate"><span class="pre">events.MessageEdited</span></code> and <code class="docutils literal notranslate"><span class="pre">events.MessageDeleted</span></code> instead.</p></li>
</ul>
</section>
<section id="id127">
<h3><a class="toc-backref" href="#id384">Additions</a><a class="headerlink" href="#id127" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The mentioned addition of new session types.</p></li>
<li><p>You can omit the event type on <code class="docutils literal notranslate"><span class="pre">client.add_event_handler</span></code> to use <code class="docutils literal notranslate"><span class="pre">Raw</span></code>.</p></li>
<li><p>You can <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">StopPropagation</span></code> of events if you added several of them.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.get_participants()</span></code> can now get up to 90,000 members from groups with
100,000 if when <code class="docutils literal notranslate"><span class="pre">aggressive=True</span></code>, “bypassing” Telegram’s limit.</p></li>
<li><p>You now can access <code class="docutils literal notranslate"><span class="pre">NewMessage.Event.pattern_match</span></code>.</p></li>
<li><p>Multiple captions are now supported when sending albums.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client.send_message()</span></code> has an optional <code class="docutils literal notranslate"><span class="pre">file=</span></code> parameter, so
you can do <code class="docutils literal notranslate"><span class="pre">events.reply(file='/path/to/photo.jpg')</span></code> and similar.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">.input_</span></code> versions to <code class="docutils literal notranslate"><span class="pre">events.ChatAction</span></code>.</p></li>
<li><p>You can now access the public <code class="docutils literal notranslate"><span class="pre">.client</span></code> property on <code class="docutils literal notranslate"><span class="pre">events</span></code>.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">client.forward_messages</span></code>, with its own wrapper on <code class="docutils literal notranslate"><span class="pre">events</span></code>,
called <code class="docutils literal notranslate"><span class="pre">event.forward_to(...)</span></code>.</p></li>
</ul>
</section>
<section id="id128">
<h3><a class="toc-backref" href="#id385">Bug fixes</a><a class="headerlink" href="#id128" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Silly bug regarding <code class="docutils literal notranslate"><span class="pre">client.get_me(input_peer=True)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client.send_voice_note()</span></code> was missing some parameters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client.send_file()</span></code> plays better with streams now.</p></li>
<li><p>Incoming messages from bots weren’t working with whitelists.</p></li>
<li><p>Markdown’s URL regex was not accepting newlines.</p></li>
<li><p>Better attempt at joining background update threads.</p></li>
<li><p>Use the right peer type when a marked integer ID is provided.</p></li>
</ul>
</section>
<section id="id129">
<h3><a class="toc-backref" href="#id386">Internal changes</a><a class="headerlink" href="#id129" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Resolving <code class="docutils literal notranslate"><span class="pre">events.Raw</span></code> is now a no-op.</p></li>
<li><p>Logging calls in the <code class="docutils literal notranslate"><span class="pre">TcpClient</span></code> to spot errors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">events</span></code> resolution is postponed until you are successfully connected,
so you can attach them before starting the client.</p></li>
<li><p>When an entity is not found, it is searched in <em>all</em> dialogs. This might
not always be desirable but it’s more comfortable for legitimate uses.</p></li>
<li><p>Some non-persisting properties from the <code class="docutils literal notranslate"><span class="pre">Session</span></code> have been moved out.</p></li>
</ul>
</section>
</section>
<section id="further-easing-library-usage-v0-17-4">
<h2><a class="toc-backref" href="#id387">Further easing library usage (v0.17.4)</a><a class="headerlink" href="#further-easing-library-usage-v0-17-4" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/02/24</em></p>
<p>Some new things and patches that already deserved their own release.</p>
<section id="id130">
<h3><a class="toc-backref" href="#id388">Additions</a><a class="headerlink" href="#id130" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">pattern</span></code> argument to <code class="docutils literal notranslate"><span class="pre">NewMessage</span></code> to easily filter messages.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">.get_participants()</span></code> convenience method to get members from chats.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.send_message()</span></code> now accepts a <code class="docutils literal notranslate"><span class="pre">Message</span></code> as the <code class="docutils literal notranslate"><span class="pre">message</span></code> parameter.</p></li>
<li><p>You can now <code class="docutils literal notranslate"><span class="pre">.get_entity()</span></code> through exact name match instead username.</p></li>
<li><p>Raise <code class="docutils literal notranslate"><span class="pre">ProxyConnectionError</span></code> instead looping forever so you can
<code class="docutils literal notranslate"><span class="pre">except</span></code> it on your own code and behave accordingly.</p></li>
</ul>
</section>
<section id="id131">
<h3><a class="toc-backref" href="#id389">Bug fixes</a><a class="headerlink" href="#id131" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.parse_username</span></code> would fail with <code class="docutils literal notranslate"><span class="pre">www.</span></code> or a trailing slash.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">events.MessageChanged</span></code> would fail with <code class="docutils literal notranslate"><span class="pre">UpdateDeleteMessages</span></code>.</p></li>
<li><p>You can now send <code class="docutils literal notranslate"><span class="pre">b'byte</span> <span class="pre">strings'</span></code> directly as files again.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.send_file()</span></code> was not respecting the original captions when passing
another message (or media) as the file.</p></li>
<li><p>Downloading media from a different data center would always log a warning
for the first time.</p></li>
</ul>
</section>
<section id="id132">
<h3><a class="toc-backref" href="#id390">Internal changes</a><a class="headerlink" href="#id132" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">req_pq_multi</span></code> instead <code class="docutils literal notranslate"><span class="pre">req_pq</span></code> when generating <code class="docutils literal notranslate"><span class="pre">auth_key</span></code>.</p></li>
<li><p>You can use <code class="docutils literal notranslate"><span class="pre">.get_me(input_peer=True)</span></code> if all you need is your self ID.</p></li>
<li><p>New addition to the interactive client example to show peer information.</p></li>
<li><p>Avoid special casing <code class="docutils literal notranslate"><span class="pre">InputPeerSelf</span></code> on some <code class="docutils literal notranslate"><span class="pre">NewMessage</span></code> events, so
you can always safely rely on <code class="docutils literal notranslate"><span class="pre">.sender</span></code> to get the right ID.</p></li>
</ul>
</section>
</section>
<section id="new-small-convenience-functions-v0-17-3">
<h2><a class="toc-backref" href="#id391">New small convenience functions (v0.17.3)</a><a class="headerlink" href="#new-small-convenience-functions-v0-17-3" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/02/18</em></p>
<p>More bug fixes and a few others addition to make events easier to use.</p>
<section id="id133">
<h3><a class="toc-backref" href="#id392">Additions</a><a class="headerlink" href="#id133" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">hachoir</span></code> to extract video and audio metadata before upload.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">.add_event_handler</span></code>, <code class="docutils literal notranslate"><span class="pre">.add_update_handler</span></code> now deprecated.</p></li>
</ul>
</section>
<section id="id134">
<h3><a class="toc-backref" href="#id393">Bug fixes</a><a class="headerlink" href="#id134" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bot_token</span></code> wouldn’t work on <code class="docutils literal notranslate"><span class="pre">.start()</span></code>, and changes to <code class="docutils literal notranslate"><span class="pre">password</span></code>
(now it will ask you for it if you don’t provide it, as docstring hinted).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.edit_message()</span></code> was ignoring the formatting (e.g. markdown).</p></li>
<li><p>Added missing case to the <code class="docutils literal notranslate"><span class="pre">NewMessage</span></code> event for normal groups.</p></li>
<li><p>Accessing the <code class="docutils literal notranslate"><span class="pre">.text</span></code> of the <code class="docutils literal notranslate"><span class="pre">NewMessage</span></code> event was failing due
to a bug with the markdown unparser.</p></li>
</ul>
</section>
<section id="id135">
<h3><a class="toc-backref" href="#id394">Internal changes</a><a class="headerlink" href="#id135" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">libssl</span></code> is no longer an optional dependency. Use <code class="docutils literal notranslate"><span class="pre">cryptg</span></code> instead,
which you can find on <a class="reference external" href="https://pypi.org/project/cryptg/">https://pypi.org/project/cryptg/</a>.</p></li>
</ul>
</section>
</section>
<section id="new-small-convenience-functions-v0-17-2">
<h2><a class="toc-backref" href="#id395">New small convenience functions (v0.17.2)</a><a class="headerlink" href="#new-small-convenience-functions-v0-17-2" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/02/15</em></p>
<p>Primarily bug fixing and a few welcomed additions.</p>
<section id="id136">
<h3><a class="toc-backref" href="#id396">Additions</a><a class="headerlink" href="#id136" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New convenience <code class="docutils literal notranslate"><span class="pre">.edit_message()</span></code> method on the <code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code>.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">.edit()</span></code> and <code class="docutils literal notranslate"><span class="pre">.delete()</span></code> shorthands on the <code class="docutils literal notranslate"><span class="pre">NewMessage</span></code> event.</p></li>
<li><p>Default to markdown parsing when sending and editing messages.</p></li>
<li><p>Support for inline mentions when sending and editing messages. They work
like inline urls (e.g. <code class="docutils literal notranslate"><span class="pre">[text](&#64;username)</span></code>) and also support the Bot-API
style (see <a class="reference external" href="https://core.telegram.org/bots/api#formatting-options">here</a>).</p></li>
</ul>
</section>
<section id="id137">
<h3><a class="toc-backref" href="#id397">Bug fixes</a><a class="headerlink" href="#id137" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Periodically send <code class="docutils literal notranslate"><span class="pre">GetStateRequest</span></code> automatically to keep the server
sending updates even if you’re not invoking any request yourself.</p></li>
<li><p>HTML parsing was failing due to not handling surrogates properly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.sign_up</span></code> was not accepting <code class="docutils literal notranslate"><span class="pre">int</span></code> codes.</p></li>
<li><p>Whitelisting more than one chat on <code class="docutils literal notranslate"><span class="pre">events</span></code> wasn’t working.</p></li>
<li><p>Video files are sent as a video by default unless <code class="docutils literal notranslate"><span class="pre">force_document</span></code>.</p></li>
</ul>
</section>
<section id="id138">
<h3><a class="toc-backref" href="#id398">Internal changes</a><a class="headerlink" href="#id138" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>More <code class="docutils literal notranslate"><span class="pre">logging</span></code> calls to help spot some bugs in the future.</p></li>
<li><p>Some more logic to retrieve input entities on events.</p></li>
<li><p>Clarified a few parts of the documentation.</p></li>
</ul>
</section>
</section>
<section id="updates-as-events-v0-17-1">
<h2><a class="toc-backref" href="#id399">Updates as Events (v0.17.1)</a><a class="headerlink" href="#updates-as-events-v0-17-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/02/09</em></p>
<p>Of course there was more work to be done regarding updates, and it’s here!
The library comes with a new <code class="docutils literal notranslate"><span class="pre">events</span></code> module (which you will often import
as <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">telethon</span> <span class="pre">import</span> <span class="pre">TelegramClient,</span> <span class="pre">events</span></code>). This are pretty much
all the additions that come with this version change, but they are a nice
addition. Refer to <em>(removed broken link)</em> to get started with events.</p>
</section>
<section id="trust-the-server-with-updates-v0-17">
<h2><a class="toc-backref" href="#id400">Trust the Server with Updates (v0.17)</a><a class="headerlink" href="#trust-the-server-with-updates-v0-17" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/02/03</em></p>
<p>The library trusts the server with updates again. The library will <em>not</em>
check for duplicates anymore, and when the server kicks us, it will run
<code class="docutils literal notranslate"><span class="pre">GetStateRequest</span></code> so the server starts sending updates again (something
it wouldn’t do unless you invoked something, it seems). But this update
also brings a few more changes!</p>
<section id="id139">
<h3><a class="toc-backref" href="#id401">Additions</a><a class="headerlink" href="#id139" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TLObject</span></code>’s override <code class="docutils literal notranslate"><span class="pre">__eq__</span></code> and <code class="docutils literal notranslate"><span class="pre">__ne__</span></code>, so you can compare them.</p></li>
<li><p>Added some missing cases on <code class="docutils literal notranslate"><span class="pre">.get_input_entity()</span></code> and peer functions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">obj.to_dict()</span></code> now has a <code class="docutils literal notranslate"><span class="pre">'_'</span></code> key with the type used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.start()</span></code> can also sign up now.</p></li>
<li><p>More parameters for <code class="docutils literal notranslate"><span class="pre">.get_message_history()</span></code>.</p></li>
<li><p>Updated list of RPC errors.</p></li>
<li><p>HTML parsing thanks to <strong>&#64;tulir</strong>! It can be used similar to markdown:
<code class="docutils literal notranslate"><span class="pre">client.send_message(...,</span> <span class="pre">parse_mode='html')</span></code>.</p></li>
</ul>
</section>
<section id="id140">
<h3><a class="toc-backref" href="#id402">Enhancements</a><a class="headerlink" href="#id140" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">client.send_file()</span></code> now accepts <code class="docutils literal notranslate"><span class="pre">Message</span></code>’s and
<code class="docutils literal notranslate"><span class="pre">MessageMedia</span></code>’s as the <code class="docutils literal notranslate"><span class="pre">file</span></code> parameter.</p></li>
<li><p>Some documentation updates and fixed to clarify certain things.</p></li>
<li><p>New exact match feature on <a class="reference external" href="https://tl.telethon.dev">https://tl.telethon.dev</a>.</p></li>
<li><p>Return as early as possible from <code class="docutils literal notranslate"><span class="pre">.get_input_entity()</span></code> and similar,
to avoid penalizing you for doing this right.</p></li>
</ul>
</section>
<section id="id141">
<h3><a class="toc-backref" href="#id403">Bug fixes</a><a class="headerlink" href="#id141" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.download_media()</span></code> wouldn’t accept a <code class="docutils literal notranslate"><span class="pre">Document</span></code> as parameter.</p></li>
<li><p>The SQLite is now closed properly on disconnection.</p></li>
<li><p>IPv6 addresses shouldn’t use square braces.</p></li>
<li><p>Fix regarding <code class="docutils literal notranslate"><span class="pre">.log_out()</span></code>.</p></li>
<li><p>The time offset wasn’t being used (so having wrong system time would
cause the library not to work at all).</p></li>
</ul>
</section>
</section>
<section id="new-resolve-method-v0-16-2">
<h2><a class="toc-backref" href="#id404">New <code class="docutils literal notranslate"><span class="pre">.resolve()</span></code> method (v0.16.2)</a><a class="headerlink" href="#new-resolve-method-v0-16-2" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/01/19</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">TLObject</span></code>’s (instances returned by the API and <code class="docutils literal notranslate"><span class="pre">Request</span></code>’s) have
now acquired a new <code class="docutils literal notranslate"><span class="pre">.resolve()</span></code> method. While this should be used by the
library alone (when invoking a request), it means that you can now use
<code class="docutils literal notranslate"><span class="pre">Peer</span></code> types or even usernames where a <code class="docutils literal notranslate"><span class="pre">InputPeer</span></code> is required. The
object now has access to the <code class="docutils literal notranslate"><span class="pre">client</span></code>, so that it can fetch the right
type if needed, or access the session database. Furthermore, you can
reuse requests that need “autocast” (e.g. you put <a class="reference external" href="https://tl.telethon.dev/?q=User">User</a> but <code class="docutils literal notranslate"><span class="pre">InputPeer</span></code>
was needed), since <code class="docutils literal notranslate"><span class="pre">.resolve()</span></code> is called when invoking. Before, it was
only done on object construction.</p>
<section id="id142">
<h3><a class="toc-backref" href="#id405">Additions</a><a class="headerlink" href="#id142" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Album support. Just pass a list, tuple or any iterable to <code class="docutils literal notranslate"><span class="pre">.send_file()</span></code>.</p></li>
</ul>
</section>
<section id="id143">
<h3><a class="toc-backref" href="#id406">Enhancements</a><a class="headerlink" href="#id143" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.start()</span></code> asks for your phone only if required.</p></li>
<li><p>Better file cache. All files under 10MB, once uploaded, should never be
needed to be re-uploaded again, as the sent media is cached to the session.</p></li>
</ul>
</section>
<section id="id144">
<h3><a class="toc-backref" href="#id407">Bug fixes</a><a class="headerlink" href="#id144" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">setup.py</span></code> now calls <code class="docutils literal notranslate"><span class="pre">gen_tl</span></code> when installing the library if needed.</p></li>
</ul>
</section>
<section id="id145">
<h3><a class="toc-backref" href="#id408">Internal changes</a><a class="headerlink" href="#id145" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The mentioned <code class="docutils literal notranslate"><span class="pre">.resolve()</span></code> to perform “autocast”, more powerful.</p></li>
<li><p>Upload and download methods are no longer part of <code class="docutils literal notranslate"><span class="pre">TelegramBareClient</span></code>.</p></li>
<li><p>Reuse <code class="docutils literal notranslate"><span class="pre">.on_response()</span></code>, <code class="docutils literal notranslate"><span class="pre">.__str__</span></code> and <code class="docutils literal notranslate"><span class="pre">.stringify()</span></code>.
Only override <code class="docutils literal notranslate"><span class="pre">.on_response()</span></code> if necessary (small amount of cases).</p></li>
<li><p>Reduced “autocast” overhead as much as possible.
You shouldn’t be penalized if you’ve provided the right type.</p></li>
</ul>
</section>
</section>
<section id="mtproto-2-0-v0-16-1">
<h2><a class="toc-backref" href="#id409">MtProto 2.0 (v0.16.1)</a><a class="headerlink" href="#mtproto-2-0-v0-16-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2018/01/11</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 74</p></td>
</tr>
</tbody>
</table>
<p>The library is now using MtProto 2.0! This shouldn’t really affect you
as an end user, but at least it means the library will be ready by the
time MtProto 1.0 is deprecated.</p>
<section id="id146">
<h3><a class="toc-backref" href="#id410">Additions</a><a class="headerlink" href="#id146" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">.start()</span></code> method, to make the library avoid boilerplate code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.send_file</span></code> accepts a new optional <code class="docutils literal notranslate"><span class="pre">thumbnail</span></code> parameter, and
returns the <code class="docutils literal notranslate"><span class="pre">Message</span></code> with the sent file.</p></li>
</ul>
</section>
<section id="id147">
<h3><a class="toc-backref" href="#id411">Bug fixes</a><a class="headerlink" href="#id147" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The library uses again only a single connection. Less updates are
be dropped now, and the performance is even better than using temporary
connections.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">without</span> <span class="pre">rowid</span></code> will only be used on the <code class="docutils literal notranslate"><span class="pre">*.session</span></code> if supported.</p></li>
<li><p>Phone code hash is associated with phone, so you can change your mind
when calling <code class="docutils literal notranslate"><span class="pre">.sign_in()</span></code>.</p></li>
</ul>
</section>
<section id="id148">
<h3><a class="toc-backref" href="#id412">Internal changes</a><a class="headerlink" href="#id148" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>File cache now relies on the hash of the file uploaded instead its path,
and is now persistent in the <code class="docutils literal notranslate"><span class="pre">*.session</span></code> file. Report any bugs on this!</p></li>
<li><p>Clearer error when invoking without being connected.</p></li>
<li><p>Markdown parser doesn’t work on bytes anymore (which makes it cleaner).</p></li>
</ul>
</section>
</section>
<section id="sessions-as-sqlite-databases-v0-16">
<h2><a class="toc-backref" href="#id413">Sessions as sqlite databases (v0.16)</a><a class="headerlink" href="#sessions-as-sqlite-databases-v0-16" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/12/28</em></p>
<p>In the beginning, session files used to be pickle. This proved to be bad
as soon as one wanted to add more fields. For this reason, they were
migrated to use JSON instead. But this proved to be bad as soon as one
wanted to save things like entities (usernames, their ID and hash), so
now it properly uses
<a class="reference external" href="https://docs.python.org/3/library/sqlite3.html">sqlite3</a>,
which has been well tested, to save the session files! Calling
<code class="docutils literal notranslate"><span class="pre">.get_input_entity</span></code> using a <code class="docutils literal notranslate"><span class="pre">username</span></code> no longer will need to fetch
it first, so it’s really 0 calls again. Calling <code class="docutils literal notranslate"><span class="pre">.get_entity</span></code> will
always fetch the most up to date version.</p>
<p>Furthermore, nearly everything has been documented, thus preparing the
library for <a class="reference external" href="https://readthedocs.org/">Read the Docs</a> (although there
are a few things missing I’d like to polish first), and the
<a class="reference external" href="https://docs.python.org/3/library/logging.html">logging</a> are now
better placed.</p>
<section id="id149">
<h3><a class="toc-backref" href="#id414">Breaking changes</a><a class="headerlink" href="#id149" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.get_dialogs()</span></code> now returns a <strong>single list</strong> instead a tuple
consisting of a <strong>custom class</strong> that should make everything easier
to work with.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.get_message_history()</span></code> also returns a <strong>single list</strong> instead a
tuple, with the <code class="docutils literal notranslate"><span class="pre">Message</span></code> instances modified to make them more
convenient.</p></li>
</ul>
<p>Both lists have a <code class="docutils literal notranslate"><span class="pre">.total</span></code> attribute so you can still know how many
dialogs/messages are in total.</p>
</section>
<section id="id150">
<h3><a class="toc-backref" href="#id415">Additions</a><a class="headerlink" href="#id150" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The mentioned use of <code class="docutils literal notranslate"><span class="pre">sqlite3</span></code> for the session file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.get_entity()</span></code> now supports lists too, and it will make as little
API calls as possible if you feed it <code class="docutils literal notranslate"><span class="pre">InputPeer</span></code> types. Usernames
will always be resolved, since they may have changed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.set_proxy()</span></code> method, to avoid having to create a new
<code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code>.</p></li>
<li><p>More <code class="docutils literal notranslate"><span class="pre">date</span></code> types supported to represent a date parameter.</p></li>
</ul>
</section>
<section id="id151">
<h3><a class="toc-backref" href="#id416">Bug fixes</a><a class="headerlink" href="#id151" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Empty strings weren’t working when they were a flag parameter (e.g.,
setting no last name).</p></li>
<li><p>Fix invalid assertion regarding flag parameters as well.</p></li>
<li><p>Avoid joining the background thread on disconnect, as it would be
<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> due to a race condition.</p></li>
<li><p>Correctly handle <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> dates when downloading media.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.download_profile_photo</span></code> was failing for some channels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.download_media</span></code> wasn’t handling <code class="docutils literal notranslate"><span class="pre">Photo</span></code>.</p></li>
</ul>
</section>
<section id="id152">
<h3><a class="toc-backref" href="#id417">Internal changes</a><a class="headerlink" href="#id152" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">date</span></code> was being serialized as local date, but that was wrong.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">date</span></code> was being represented as a <code class="docutils literal notranslate"><span class="pre">float</span></code> instead of an <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.tl</span></code> parser wasn’t stripping inline comments.</p></li>
<li><p>Removed some redundant checks on <code class="docutils literal notranslate"><span class="pre">update_state.py</span></code>.</p></li>
<li><p>Use a <a class="reference external" href="https://docs.python.org/3/library/queue.html">synchronized
queue</a> instead a
hand crafted version.</p></li>
<li><p>Use signed integers consistently (e.g. <code class="docutils literal notranslate"><span class="pre">salt</span></code>).</p></li>
<li><p>Always read the corresponding <code class="docutils literal notranslate"><span class="pre">TLObject</span></code> from API responses, except
for some special cases still.</p></li>
<li><p>A few more <code class="docutils literal notranslate"><span class="pre">except</span></code> low level to correctly wrap errors.</p></li>
<li><p>More accurate exception types.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">invokeWithLayer(initConnection(X))</span></code> now wraps every first request
after <code class="docutils literal notranslate"><span class="pre">.connect()</span></code>.</p></li>
</ul>
<p>As always, report if you have issues with some of the changes!</p>
</section>
</section>
<section id="ipv6-support-v0-15-5">
<h2><a class="toc-backref" href="#id418">IPv6 support (v0.15.5)</a><a class="headerlink" href="#ipv6-support-v0-15-5" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/11/16</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 73</p></td>
</tr>
</tbody>
</table>
<p>It’s here, it has come! The library now <strong>supports IPv6</strong>! Just pass
<code class="docutils literal notranslate"><span class="pre">use_ipv6=True</span></code> when creating a <code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code>. Note that I could
<em>not</em> test this feature because my machine doesn’t have IPv6 setup. If
you know IPv6 works in your machine but the library doesn’t, please
refer to <a class="reference external" href="https://github.com/LonamiWebs/Telethon/issues/425">#425</a>.</p>
<section id="id154">
<h3><a class="toc-backref" href="#id419">Additions</a><a class="headerlink" href="#id154" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>IPv6 support.</p></li>
<li><p>New method to extract the text surrounded by <code class="docutils literal notranslate"><span class="pre">MessageEntity</span></code>‘s,
in the <code class="docutils literal notranslate"><span class="pre">extensions.markdown</span></code> module.</p></li>
</ul>
</section>
<section id="id155">
<h3><a class="toc-backref" href="#id420">Enhancements</a><a class="headerlink" href="#id155" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Markdown parsing is Done Right.</p></li>
<li><p>Reconnection on failed invoke. Should avoid “number of retries
reached 0” (#270).</p></li>
<li><p>Some missing autocast to <code class="docutils literal notranslate"><span class="pre">Input*</span></code> types.</p></li>
<li><p>The library uses the <code class="docutils literal notranslate"><span class="pre">NullHandler</span></code> for <code class="docutils literal notranslate"><span class="pre">logging</span></code> as it should
have always done.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TcpClient.is_connected()</span></code> is now more reliable.</p></li>
</ul>
</section>
<section id="id156">
<h3><a class="toc-backref" href="#id421">Bug fixes</a><a class="headerlink" href="#id156" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Getting an entity using their phone wasn’t actually working.</p></li>
<li><p>Full entities aren’t saved unless they have an <code class="docutils literal notranslate"><span class="pre">access_hash</span></code>, to
avoid some <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> errors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.get_message_history</span></code> was failing when retrieving items that had
messages forwarded from a channel.</p></li>
</ul>
</section>
</section>
<section id="general-enhancements-v0-15-4">
<h2><a class="toc-backref" href="#id422">General enhancements (v0.15.4)</a><a class="headerlink" href="#general-enhancements-v0-15-4" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/11/04</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 72</p></td>
</tr>
</tbody>
</table>
<p>This update brings a few general enhancements that are enough to deserve
a new release, with a new feature: beta <strong>markdown-like parsing</strong> for
<code class="docutils literal notranslate"><span class="pre">.send_message()</span></code>!</p>
<section id="id157">
<h3><a class="toc-backref" href="#id423">Additions</a><a class="headerlink" href="#id157" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.send_message()</span></code> supports <code class="docutils literal notranslate"><span class="pre">parse_mode='md'</span></code> for <strong>Markdown</strong>! It
works in a similar fashion to the official clients (defaults to
double underscore/asterisk, like <code class="docutils literal notranslate"><span class="pre">**this**</span></code>). Please report any
issues with emojies or enhancements for the parser!</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">.idle()</span></code> method so your main thread can do useful job (listen
for updates).</p></li>
<li><p>Add missing <code class="docutils literal notranslate"><span class="pre">.to_dict()</span></code>, <code class="docutils literal notranslate"><span class="pre">__str__</span></code> and <code class="docutils literal notranslate"><span class="pre">.stringify()</span></code> for
<code class="docutils literal notranslate"><span class="pre">TLMessage</span></code> and <code class="docutils literal notranslate"><span class="pre">MessageContainer</span></code>.</p></li>
</ul>
</section>
<section id="id158">
<h3><a class="toc-backref" href="#id424">Bug fixes</a><a class="headerlink" href="#id158" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The list of known peers could end “corrupted” and have users with
<code class="docutils literal notranslate"><span class="pre">access_hash=None</span></code>, resulting in <code class="docutils literal notranslate"><span class="pre">struct</span></code> error for it not being
an integer. You shouldn’t encounter this issue anymore.</p></li>
<li><p>The warning for “added update handler but no workers set” wasn’t
actually working.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.get_input_peer</span></code> was ignoring a case for <code class="docutils literal notranslate"><span class="pre">InputPeerSelf</span></code>.</p></li>
<li><p>There used to be an exception when logging exceptions (whoops) on
update handlers.</p></li>
<li><p>“Downloading contacts” would produce strange output if they had
semicolons (<code class="docutils literal notranslate"><span class="pre">;</span></code>) in their name.</p></li>
<li><p>Fix some cyclic imports and installing dependencies from the <code class="docutils literal notranslate"><span class="pre">git</span></code>
repository.</p></li>
<li><p>Code generation was using f-strings, which are only supported on
Python ≥3.6.</p></li>
</ul>
</section>
<section id="id159">
<h3><a class="toc-backref" href="#id425">Internal changes</a><a class="headerlink" href="#id159" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">auth_key</span></code> generation has been moved from <code class="docutils literal notranslate"><span class="pre">.connect()</span></code> to
<code class="docutils literal notranslate"><span class="pre">.invoke()</span></code>. There were some issues were <code class="docutils literal notranslate"><span class="pre">.connect()</span></code> failed and
the <code class="docutils literal notranslate"><span class="pre">auth_key</span></code> was <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> so this will ensure to have a valid
<code class="docutils literal notranslate"><span class="pre">auth_key</span></code> when needed, even if <code class="docutils literal notranslate"><span class="pre">BrokenAuthKeyError</span></code> is raised.</p></li>
<li><p>Support for higher limits on <code class="docutils literal notranslate"><span class="pre">.get_history()</span></code> and
<code class="docutils literal notranslate"><span class="pre">.get_dialogs()</span></code>.</p></li>
<li><p>Much faster integer factorization when generating the required
<code class="docutils literal notranslate"><span class="pre">auth_key</span></code>. Thanks &#64;delivrance for making me notice this, and for
the pull request.</p></li>
</ul>
</section>
</section>
<section id="bug-fixes-with-updates-v0-15-3">
<h2><a class="toc-backref" href="#id426">Bug fixes with updates (v0.15.3)</a><a class="headerlink" href="#bug-fixes-with-updates-v0-15-3" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/10/20</em></p>
<p>Hopefully a very ungrateful bug has been removed. When you used to
invoke some request through update handlers, it could potentially enter
an infinite loop. This has been mitigated and it’s now safe to invoke
things again! A lot of updates were being dropped (all those gzipped),
and this has been fixed too.</p>
<p>More bug fixes include a <a class="reference external" href="https://github.com/LonamiWebs/Telethon/commit/ee01724cdb7027c1e38625d31446ba1ea7bade92">correct
parsing</a>
of certain TLObjects thanks to &#64;stek29, and
<a class="reference external" href="https://github.com/LonamiWebs/Telethon/commit/ed77ba6f8ff115ac624f02f691c9991e5b37be60">some</a>
<a class="reference external" href="https://github.com/LonamiWebs/Telethon/commit/16cf94c9add5e94d70c4eee2ac142d8e76af48b9">wrong
calls</a>
that would cause the library to crash thanks to &#64;andr-04, and the
<code class="docutils literal notranslate"><span class="pre">ReadThread</span></code> not re-starting if you were already authorized.</p>
<p>Internally, the <code class="docutils literal notranslate"><span class="pre">.to_bytes()</span></code> function has been replaced with
<code class="docutils literal notranslate"><span class="pre">__bytes__</span></code> so now you can do <code class="docutils literal notranslate"><span class="pre">bytes(tlobject)</span></code>.</p>
</section>
<section id="bug-fixes-and-new-small-features-v0-15-2">
<h2><a class="toc-backref" href="#id427">Bug fixes and new small features (v0.15.2)</a><a class="headerlink" href="#bug-fixes-and-new-small-features-v0-15-2" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/10/14</em></p>
<p>This release primarly focuses on a few bug fixes and enhancements.
Although more stuff may have broken along the way.</p>
<section id="id160">
<h3><a class="toc-backref" href="#id428">Enhancements</a><a class="headerlink" href="#id160" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>You will be warned if you call <code class="docutils literal notranslate"><span class="pre">.add_update_handler</span></code> with no
<code class="docutils literal notranslate"><span class="pre">update_workers</span></code>.</p></li>
<li><p>New customizable threshold value on the session to determine when to
automatically sleep on flood waits. See
<code class="docutils literal notranslate"><span class="pre">client.session.flood_sleep_threshold</span></code>.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">.get_drafts()</span></code> method with a custom <code class="docutils literal notranslate"><span class="pre">Draft</span></code> class by &#64;JosXa.</p></li>
<li><p>Join all threads when calling <code class="docutils literal notranslate"><span class="pre">.disconnect()</span></code>, to assert no
dangling thread is left alive.</p></li>
<li><p>Larger chunk when downloading files should result in faster
downloads.</p></li>
<li><p>You can use a callable key for the <code class="docutils literal notranslate"><span class="pre">EntityDatabase</span></code>, so it can be
any filter you need.</p></li>
</ul>
</section>
<section id="id161">
<h3><a class="toc-backref" href="#id429">Bug fixes</a><a class="headerlink" href="#id161" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.get_input_entity</span></code> was failing for IDs and other cases, also
making more requests than it should.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">basename</span></code> instead <code class="docutils literal notranslate"><span class="pre">abspath</span></code> when sending a file. You can now
also override the attributes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EntityDatabase.__delitem__</span></code> wasn’t working.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.send_message()</span></code> was failing with channels.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.get_dialogs(limit=None)</span></code> should now return all the dialogs
correctly.</p></li>
<li><p>Temporary fix for abusive duplicated updates.</p></li>
</ul>
</section>
<section id="id162">
<h3><a class="toc-backref" href="#id430">Internal changes</a><a class="headerlink" href="#id162" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>MsgsAck is now sent in a container rather than its own request.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.get_input_photo</span></code> is now used in the generated code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.process_entities</span></code> was being called from more places than only
<code class="docutils literal notranslate"><span class="pre">__call__</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MtProtoSender</span></code> now relies more on the generated code to read
responses.</p></li>
</ul>
</section>
</section>
<section id="custom-entity-database-v0-15-1">
<h2><a class="toc-backref" href="#id431">Custom Entity Database (v0.15.1)</a><a class="headerlink" href="#custom-entity-database-v0-15-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/10/05</em></p>
<p>The main feature of this release is that Telethon now has a custom
database for all the entities you encounter, instead depending on
<code class="docutils literal notranslate"><span class="pre">&#64;lru_cache</span></code> on the <code class="docutils literal notranslate"><span class="pre">.get_entity()</span></code> method.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">EntityDatabase</span></code> will, by default, <strong>cache</strong> all the users, chats
and channels you find in memory for as long as the program is running.
The session will, by default, save all key-value pairs of the entity
identifiers and their hashes (since Telegram may send an ID that it
thinks you already know about, we need to save this information).</p>
<p>You can <strong>prevent</strong> the <code class="docutils literal notranslate"><span class="pre">EntityDatabase</span></code> from saving users by setting
<code class="docutils literal notranslate"><span class="pre">client.session.entities.enabled</span> <span class="pre">=</span> <span class="pre">False</span></code>, and prevent the <code class="docutils literal notranslate"><span class="pre">Session</span></code>
from saving input entities at all by setting
<code class="docutils literal notranslate"><span class="pre">client.session.save_entities</span> <span class="pre">=</span> <span class="pre">False</span></code>. You can also clear the cache
for a certain user through
<code class="docutils literal notranslate"><span class="pre">client.session.entities.clear_cache(entity=None)</span></code>, which will clear
all if no entity is given.</p>
<section id="id163">
<h3><a class="toc-backref" href="#id432">Additions</a><a class="headerlink" href="#id163" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New method to <code class="docutils literal notranslate"><span class="pre">.delete_messages()</span></code>.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">ChannelPrivateError</span></code> class.</p></li>
</ul>
</section>
<section id="id164">
<h3><a class="toc-backref" href="#id433">Enhancements</a><a class="headerlink" href="#id164" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.sign_in</span></code> accepts phones as integers.</p></li>
<li><p>Changing the IP to which you connect to is as simple as
<code class="docutils literal notranslate"><span class="pre">client.session.server_address</span> <span class="pre">=</span> <span class="pre">'ip'</span></code>, since now the
server address is always queried from the session.</p></li>
</ul>
</section>
<section id="id165">
<h3><a class="toc-backref" href="#id434">Bug fixes</a><a class="headerlink" href="#id165" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.get_dialogs()</span></code> doesn’t fail on Windows anymore, and returns the
right amount of dialogs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GeneralProxyError</span></code> should be passed to the main thread
again, so that you can handle it.</p></li>
</ul>
</section>
</section>
<section id="updates-overhaul-update-v0-15">
<h2><a class="toc-backref" href="#id435">Updates Overhaul Update (v0.15)</a><a class="headerlink" href="#updates-overhaul-update-v0-15" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/10/01</em></p>
<p>After hundreds of lines changed on a major refactor, <em>it’s finally
here</em>. It’s the <strong>Updates Overhaul Update</strong>; let’s get right into it!</p>
<section id="id166">
<h3><a class="toc-backref" href="#id436">Breaking changes</a><a class="headerlink" href="#id166" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.create_new_connection()</span></code> is gone for good. No need to deal with
this manually since new connections are now handled on demand by the
library itself.</p></li>
</ul>
</section>
<section id="id167">
<h3><a class="toc-backref" href="#id437">Enhancements</a><a class="headerlink" href="#id167" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>You can <strong>invoke</strong> requests from <strong>update handlers</strong>. And <strong>any other
thread</strong>. A new temporary will be made, so that you can be sending
even several requests at the same time!</p></li>
<li><p><strong>Several worker threads</strong> for your updates! By default, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>
will spawn. I recommend you to work with <code class="docutils literal notranslate"><span class="pre">update_workers=4</span></code> to get
started, these will be polling constantly for updates.</p></li>
<li><p>You can also change the number of workers at any given time.</p></li>
<li><p>The library can now run <strong>in a single thread</strong> again, if you don’t
need to spawn any at all. Simply set <code class="docutils literal notranslate"><span class="pre">spawn_read_thread=False</span></code> when
creating the <code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code>!</p></li>
<li><p>You can specify <code class="docutils literal notranslate"><span class="pre">limit=None</span></code> on <code class="docutils literal notranslate"><span class="pre">.get_dialogs()</span></code> to get <strong>all</strong>
of them[1].</p></li>
<li><p><strong>Updates are expanded</strong>, so you don’t need to check if the update
has <code class="docutils literal notranslate"><span class="pre">.updates</span></code> or an inner <code class="docutils literal notranslate"><span class="pre">.update</span></code> anymore.</p></li>
<li><p>All <code class="docutils literal notranslate"><span class="pre">InputPeer</span></code> entities are <strong>saved in the session</strong> file, but you
can disable this by setting <code class="docutils literal notranslate"><span class="pre">save_entities=False</span></code>.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">.get_input_entity</span></code> method, which makes use of the above
feature. You <strong>should use this</strong> when a request needs a
<code class="docutils literal notranslate"><span class="pre">InputPeer</span></code>, rather than the whole entity (although both work).</p></li>
<li><p>Assert that either all or None dependent-flag parameters are set
before sending the request.</p></li>
<li><p>Phone numbers can have dashes, spaces, or parenthesis. They’ll be
removed before making the request.</p></li>
<li><p>You can override the phone and its hash on <code class="docutils literal notranslate"><span class="pre">.sign_in()</span></code>, if you’re
creating a new <code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code> on two different places.</p></li>
</ul>
</section>
<section id="id168">
<h3><a class="toc-backref" href="#id438">Bug fixes</a><a class="headerlink" href="#id168" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.log_out()</span></code> was consuming all retries. It should work just fine
now.</p></li>
<li><p>The session would fail to load if the <code class="docutils literal notranslate"><span class="pre">auth_key</span></code> had been removed
manually.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Updates.check_error</span></code> was popping wrong side, although it’s been
completely removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ServerError</span></code>‘s will be <strong>ignored</strong>, and the request will
immediately be retried.</p></li>
<li><p>Cross-thread safety when saving the session file.</p></li>
<li><p>Some things changed on a matter of when to reconnect, so please
report any bugs!</p></li>
</ul>
</section>
<section id="id169">
<h3><a class="toc-backref" href="#id439">Internal changes</a><a class="headerlink" href="#id169" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code> is now only an abstraction over the
<code class="docutils literal notranslate"><span class="pre">TelegramBareClient</span></code>, which can only do basic things, such as
invoking requests, working with files, etc. If you don’t need any of
the abstractions the <code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code>, you can now use the
<code class="docutils literal notranslate"><span class="pre">TelegramBareClient</span></code> in a much more comfortable way.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MtProtoSender</span></code> is not thread-safe, but it doesn’t need to be since
a new connection will be spawned when needed.</p></li>
<li><p>New connections used to be cached and then reused. Now only their
sessions are saved, as temporary connections are spawned only when
needed.</p></li>
<li><p>Added more RPC errors to the list.</p></li>
</ul>
<p><strong>[1]:</strong> Broken due to a condition which should had been the opposite
(sigh), fixed 4 commits ahead on
<a class="reference external" href="https://github.com/LonamiWebs/Telethon/commit/62ea77cbeac7c42bfac85aa8766a1b5b35e3a76c">https://github.com/LonamiWebs/Telethon/commit/62ea77cbeac7c42bfac85aa8766a1b5b35e3a76c</a>.</p>
<hr class="docutils" />
<p><strong>That’s pretty much it</strong>, although there’s more work to be done to make
the overall experience of working with updates <em>even better</em>. Stay
tuned!</p>
</section>
</section>
<section id="serialization-bug-fixes-v0-14-2">
<h2><a class="toc-backref" href="#id440">Serialization bug fixes (v0.14.2)</a><a class="headerlink" href="#serialization-bug-fixes-v0-14-2" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/09/29</em></p>
<section id="id170">
<h3><a class="toc-backref" href="#id441">Bug fixes</a><a class="headerlink" href="#id170" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Important</strong>, related to the serialization. Every object or request
that had to serialize a <code class="docutils literal notranslate"><span class="pre">True/False</span></code> type was always being serialized
as <code class="xref py py-obj docutils literal notranslate"><span class="pre">false</span></code>!</p></li>
<li><p>Another bug that didn’t allow you to leave as <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> flag parameters
that needed a list has been fixed.</p></li>
</ul>
</section>
<section id="id171">
<h3><a class="toc-backref" href="#id442">Internal changes</a><a class="headerlink" href="#id171" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Other internal changes include a somewhat more readable <code class="docutils literal notranslate"><span class="pre">.to_bytes()</span></code>
function and pre-computing the flag instead using bit shifting. The
<code class="docutils literal notranslate"><span class="pre">TLObject.constructor_id</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">TLObject.CONSTRUCTOR_ID</span></code>,
and <code class="docutils literal notranslate"><span class="pre">.subclass_of_id</span></code> is also uppercase now.</p></li>
</ul>
</section>
</section>
<section id="farewell-binarywriter-v0-14-1">
<h2><a class="toc-backref" href="#id443">Farewell, BinaryWriter (v0.14.1)</a><a class="headerlink" href="#farewell-binarywriter-v0-14-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/09/28</em></p>
<p>Version <code class="docutils literal notranslate"><span class="pre">v0.14</span></code> had started working on the new <code class="docutils literal notranslate"><span class="pre">.to_bytes()</span></code> method
to dump the <code class="docutils literal notranslate"><span class="pre">BinaryWriter</span></code> and its usage on the <code class="docutils literal notranslate"><span class="pre">.on_send()</span></code> when
serializing TLObjects, and this release finally removes it. The speed up
when serializing things to bytes should now be over twice as fast
wherever it’s needed.</p>
<section id="id172">
<h3><a class="toc-backref" href="#id444">Bug fixes</a><a class="headerlink" href="#id172" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>This version is again compatible with Python 3.x versions <strong>below 3.5</strong>
(there was a method call that was Python 3.5 and above).</p></li>
</ul>
</section>
<section id="id173">
<h3><a class="toc-backref" href="#id445">Internal changes</a><a class="headerlink" href="#id173" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Using proper classes (including the generated code) for generating
authorization keys and to write out <code class="docutils literal notranslate"><span class="pre">TLMessage</span></code>‘s.</p></li>
</ul>
</section>
</section>
<section id="several-requests-at-once-and-upload-compression-v0-14">
<h2><a class="toc-backref" href="#id446">Several requests at once and upload compression (v0.14)</a><a class="headerlink" href="#several-requests-at-once-and-upload-compression-v0-14" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/09/27</em></p>
<p>New major release, since I’ve decided that these two features are big
enough:</p>
<section id="id174">
<h3><a class="toc-backref" href="#id447">Additions</a><a class="headerlink" href="#id174" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Requests larger than 512 bytes will be <strong>compressed through
gzip</strong>, and if the result is smaller, this will be uploaded instead.</p></li>
<li><p>You can now send <strong>multiple requests at once</strong>, they’re simply
<code class="docutils literal notranslate"><span class="pre">*var_args</span></code> on the <code class="docutils literal notranslate"><span class="pre">.invoke()</span></code>. Note that the server doesn’t
guarantee the order in which they’ll be executed!</p></li>
</ul>
<p>Internally, another important change. The <code class="docutils literal notranslate"><span class="pre">.on_send</span></code> function on the
<code class="docutils literal notranslate"><span class="pre">TLObjects</span></code> is <strong>gone</strong>, and now there’s a new <code class="docutils literal notranslate"><span class="pre">.to_bytes()</span></code>. From
my tests, this has always been over twice as fast serializing objects,
although more replacements need to be done, so please report any issues.</p>
</section>
<section id="id175">
<h3><a class="toc-backref" href="#id448">Enhancements</a><a class="headerlink" href="#id175" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Implemented <code class="docutils literal notranslate"><span class="pre">.get_input_media</span></code> helper methods. Now you can even use
another message as input media!</p></li>
</ul>
</section>
<section id="id176">
<h3><a class="toc-backref" href="#id449">Bug fixes</a><a class="headerlink" href="#id176" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Downloading media from CDNs wasn’t working (wrong
access to a parameter).</p></li>
<li><p>Correct type hinting.</p></li>
<li><p>Added a tiny sleep when trying to perform automatic reconnection.</p></li>
<li><p>Error reporting is done in the background, and has a shorter timeout.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setup.py</span></code> used to fail with wrongly generated code.</p></li>
</ul>
</section>
</section>
<section id="quick-fix-up-v0-13-6">
<h2><a class="toc-backref" href="#id450">Quick fix-up (v0.13.6)</a><a class="headerlink" href="#quick-fix-up-v0-13-6" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/09/23</em></p>
<p>Before getting any further, here’s a quick fix-up with things that
should have been on <code class="docutils literal notranslate"><span class="pre">v0.13.5</span></code> but were missed. Specifically, the
<strong>timeout when receiving</strong> a request will now work properly.</p>
<p>Some other additions are a tiny fix when <strong>handling updates</strong>, which was
ignoring some of them, nicer <code class="docutils literal notranslate"><span class="pre">__str__</span></code> and <code class="docutils literal notranslate"><span class="pre">.stringify()</span></code> methods
for the <code class="docutils literal notranslate"><span class="pre">TLObject</span></code>‘s, and not stopping the <code class="docutils literal notranslate"><span class="pre">ReadThread</span></code> if you try
invoking something there (now it simply returns <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>).</p>
</section>
<section id="attempts-at-more-stability-v0-13-5">
<h2><a class="toc-backref" href="#id451">Attempts at more stability (v0.13.5)</a><a class="headerlink" href="#attempts-at-more-stability-v0-13-5" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/09/23</em></p>
<p>Yet another update to fix some bugs and increase the stability of the
library, or, at least, that was the attempt!</p>
<p>This release should really <strong>improve the experience with the background
thread</strong> that the library starts to read things from the network as soon
as it can, but I can’t spot every use case, so please report any bug
(and as always, minimal reproducible use cases will help a lot).</p>
<section id="id177">
<h3><a class="toc-backref" href="#id452">Bug fixes</a><a class="headerlink" href="#id177" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">setup.py</span></code> was failing on Python &lt; 3.5 due to some imports.</p></li>
<li><p>Duplicated updates should now be ignored.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.send_message</span></code> would crash in some cases, due to having a typo
using the wrong object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;socket</span> <span class="pre">is</span> <span class="pre">None&quot;</span></code> when calling <code class="docutils literal notranslate"><span class="pre">.connect()</span></code> should not happen
anymore.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BrokenPipeError</span></code> was still being raised due to an incorrect order
on the <code class="docutils literal notranslate"><span class="pre">try/except</span></code> block.</p></li>
</ul>
</section>
<section id="id178">
<h3><a class="toc-backref" href="#id453">Enhancements</a><a class="headerlink" href="#id178" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Type hinting</strong> for all the generated <code class="docutils literal notranslate"><span class="pre">Request</span></code>‘s and
<code class="docutils literal notranslate"><span class="pre">TLObjects</span></code>! IDEs like PyCharm will benefit from this.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ProxyConnectionError</span></code> should properly be passed to the main thread
for you to handle.</p></li>
<li><p>The background thread will only be started after you’re authorized on
Telegram (i.e. logged in), and several other attempts at polishing
the experience with this thread.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Connection</span></code> instance is only created once now, and reused
later.</p></li>
<li><p>Calling <code class="docutils literal notranslate"><span class="pre">.connect()</span></code> should have a better behavior now (like
actually <em>trying</em> to connect even if we seemingly were connected
already).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.reconnect()</span></code> behavior has been changed to also be more consistent
by making the assumption that we’ll only reconnect if the server has
disconnected us, and is now private.</p></li>
</ul>
</section>
<section id="id179">
<h3><a class="toc-backref" href="#id454">Internal changes</a><a class="headerlink" href="#id179" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TLObject.__repr__</span></code> doesn’t show the original TL definition
anymore, it was a lot of clutter. If you have any complaints open an
issue and we can discuss it.</p></li>
<li><p>Internally, the <code class="docutils literal notranslate"><span class="pre">'+'</span></code> from the phone number is now stripped, since
it shouldn’t be included.</p></li>
<li><p>Spotted a new place where <code class="docutils literal notranslate"><span class="pre">BrokenAuthKeyError</span></code> would be raised, and
it now is raised there.</p></li>
</ul>
</section>
</section>
<section id="more-bug-fixes-and-enhancements-v0-13-4">
<h2><a class="toc-backref" href="#id455">More bug fixes and enhancements (v0.13.4)</a><a class="headerlink" href="#more-bug-fixes-and-enhancements-v0-13-4" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/09/18</em></p>
<section id="id180">
<h3><a class="toc-backref" href="#id456">Additions</a><a class="headerlink" href="#id180" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code> now exposes a <code class="docutils literal notranslate"><span class="pre">.is_connected()</span></code> method.</p></li>
<li><p>Initial authorization on a new data center will retry up to 5 times
by default.</p></li>
<li><p>Errors that couldn’t be handled on the background thread will be
raised on the next call to <code class="docutils literal notranslate"><span class="pre">.invoke()</span></code> or <code class="docutils literal notranslate"><span class="pre">updates.poll()</span></code>.</p></li>
</ul>
</section>
<section id="id181">
<h3><a class="toc-backref" href="#id457">Bug fixes</a><a class="headerlink" href="#id181" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Now you should be able to sign in even if you have
<code class="docutils literal notranslate"><span class="pre">process_updates=True</span></code> and no previous session.</p></li>
<li><p>Some errors and methods are documented a bit clearer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.send_message()</span></code> could randomly fail, as the returned type was not
expected.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TimeoutError</span></code> is now ignored, since the request will be retried up
to 5 times by default.</p></li>
<li><p>“-404” errors (<code class="docutils literal notranslate"><span class="pre">BrokenAuthKeyError</span></code>‘s) are now detected when
first connecting to a new data center.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BufferError</span></code> is handled more gracefully, in the same way as
<code class="docutils literal notranslate"><span class="pre">InvalidCheckSumError</span></code>‘s.</p></li>
<li><p>Attempt at fixing some “NoneType has no attribute…” errors (with the
<code class="docutils literal notranslate"><span class="pre">.sender</span></code>).</p></li>
</ul>
</section>
<section id="id182">
<h3><a class="toc-backref" href="#id458">Internal changes</a><a class="headerlink" href="#id182" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Calling <code class="docutils literal notranslate"><span class="pre">GetConfigRequest</span></code> is now made less often.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">initial_query</span></code> parameter from <code class="docutils literal notranslate"><span class="pre">.connect()</span></code> is gone, as it’s
not needed anymore.</p></li>
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">all_tlobjects.layer</span></code> to <code class="docutils literal notranslate"><span class="pre">all_tlobjects.LAYER</span></code> (since
it’s a constant).</p></li>
<li><p>The message from <code class="docutils literal notranslate"><span class="pre">BufferError</span></code> is now more useful.</p></li>
</ul>
</section>
</section>
<section id="bug-fixes-and-enhancements-v0-13-3">
<h2><a class="toc-backref" href="#id459">Bug fixes and enhancements (v0.13.3)</a><a class="headerlink" href="#bug-fixes-and-enhancements-v0-13-3" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/09/14</em></p>
<section id="id183">
<h3><a class="toc-backref" href="#id460">Bug fixes</a><a class="headerlink" href="#id183" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Reconnection</strong> used to fail because it tried invoking things from
the <code class="docutils literal notranslate"><span class="pre">ReadThread</span></code>.</p></li>
<li><p>Inferring <strong>random ids</strong> for <code class="docutils literal notranslate"><span class="pre">ForwardMessagesRequest</span></code> wasn’t
working.</p></li>
<li><p>Downloading media from <strong>CDNs</strong> failed due to having forgotten to
remove a single line.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TcpClient.close()</span></code> now has a <strong>``threading.Lock``</strong>, so
<code class="docutils literal notranslate"><span class="pre">NoneType</span> <span class="pre">has</span> <span class="pre">no</span> <span class="pre">close()</span></code> should not happen.</p></li>
<li><p>New <strong>workaround</strong> for <code class="docutils literal notranslate"><span class="pre">msg</span> <span class="pre">seqno</span> <span class="pre">too</span> <span class="pre">low/high</span></code>. Also, both
<code class="docutils literal notranslate"><span class="pre">Session.id/seq</span></code> are not saved anymore.</p></li>
</ul>
</section>
<section id="id184">
<h3><a class="toc-backref" href="#id461">Enhancements</a><a class="headerlink" href="#id184" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Request will be retried</strong> up to 5 times by default rather than
failing on the first attempt.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">InvalidChecksumError</span></code>‘s are now <strong>ignored</strong> by the library.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TelegramClient.get_entity()</span></code> is now <strong>public</strong>, and uses the
<code class="docutils literal notranslate"><span class="pre">&#64;lru_cache()</span></code> decorator.</p></li>
<li><p>New method to <strong>``.send_voice_note()``</strong>‘s.</p></li>
<li><p>Methods to send message and media now support a <strong>``reply_to``
parameter</strong>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.send_message()</span></code> now returns the <strong>full message</strong> which was just
sent.</p></li>
</ul>
</section>
</section>
<section id="new-way-to-work-with-updates-v0-13-2">
<h2><a class="toc-backref" href="#id462">New way to work with updates (v0.13.2)</a><a class="headerlink" href="#new-way-to-work-with-updates-v0-13-2" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/09/08</em></p>
<p>This update brings a new way to work with updates, and it’s begging for
your <strong>feedback</strong>, or better names or ways to do what you can do now.</p>
<p>Please refer to the <a class="reference external" href="https://github.com/LonamiWebs/Telethon/wiki/Usage-Modes">wiki/Usage
Modes</a> for
an in-depth description on how to work with updates now. Notice that you
cannot invoke requests from within handlers anymore, only the
<code class="docutils literal notranslate"><span class="pre">v.0.13.1</span></code> patch allowed you to do so.</p>
<section id="id185">
<h3><a class="toc-backref" href="#id463">Bug fixes</a><a class="headerlink" href="#id185" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Periodic pings are back.</p></li>
<li><p>The username regex mentioned on <code class="docutils literal notranslate"><span class="pre">UsernameInvalidError</span></code> was invalid,
but it has now been fixed.</p></li>
<li><p>Sending a message to a phone number was failing because the type used
for a request had changed on layer 71.</p></li>
<li><p>CDN downloads weren’t working properly, and now a few patches have been
applied to ensure more reliability, although I couldn’t personally test
this, so again, report any feedback.</p></li>
</ul>
</section>
</section>
<section id="invoke-other-requests-from-within-update-callbacks-v0-13-1">
<h2><a class="toc-backref" href="#id464">Invoke other requests from within update callbacks (v0.13.1)</a><a class="headerlink" href="#invoke-other-requests-from-within-update-callbacks-v0-13-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/09/04</em></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This update brings some big changes to the update system,
so please read it if you work with them!</p>
</div>
<p>A silly “bug” which hadn’t been spotted has now been fixed. Now you can
invoke other requests from within your update callbacks. However <strong>this
is not advised</strong>. You should post these updates to some other thread,
and let that thread do the job instead. Invoking a request from within a
callback will mean that, while this request is being invoked, no other
things will be read.</p>
<p>Internally, the generated code now resides under a <em>lot</em> less files,
simply for the sake of avoiding so many unnecessary files. The generated
code is not meant to be read by anyone, simply to do its job.</p>
<p>Unused attributes have been removed from the <code class="docutils literal notranslate"><span class="pre">TLObject</span></code> class too, and
<code class="docutils literal notranslate"><span class="pre">.sign_up()</span></code> returns the user that just logged in in a similar way to
<code class="docutils literal notranslate"><span class="pre">.sign_in()</span></code> now.</p>
</section>
<section id="connection-modes-v0-13">
<h2><a class="toc-backref" href="#id465">Connection modes (v0.13)</a><a class="headerlink" href="#connection-modes-v0-13" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/09/04</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 71</p></td>
</tr>
</tbody>
</table>
<p>The purpose of this release is to denote a big change, now you can
connect to Telegram through different <a class="reference external" href="https://github.com/LonamiWebs/Telethon/blob/v0.13/telethon/network/connection.py">**connection
modes**</a>.
Also, a <strong>second thread</strong> will <em>always</em> be started when you connect a
<code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code>, despite whether you’ll be handling updates or
ignoring them, whose sole purpose is to constantly read from the
network.</p>
<p>The reason for this change is as simple as <em>“reading and writing
shouldn’t be related”</em>. Even when you’re simply ignoring updates, this
way, once you send a request you will only need to read the result for
the request. Whatever Telegram sent before has already been read and
outside the buffer.</p>
<section id="id186">
<h3><a class="toc-backref" href="#id466">Additions</a><a class="headerlink" href="#id186" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The mentioned different connection modes, and a new thread.</p></li>
<li><p>You can modify the <code class="docutils literal notranslate"><span class="pre">Session</span></code> attributes through the
<code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code> constructor (using <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RPCError</span></code>‘s now belong to some request you’ve made, which makes
more sense.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_input_*</span></code> now handles <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a> (default) parameters more
gracefully (it used to crash).</p></li>
</ul>
</section>
<section id="id187">
<h3><a class="toc-backref" href="#id467">Enhancements</a><a class="headerlink" href="#id187" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The low-level socket doesn’t use a handcrafted timeout anymore, which
should benefit by avoiding the arbitrary <code class="docutils literal notranslate"><span class="pre">sleep(0.1)</span></code> that there
used to be.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TelegramClient.sign_in</span></code> will call <code class="docutils literal notranslate"><span class="pre">.send_code_request</span></code> if no
<code class="docutils literal notranslate"><span class="pre">code</span></code> was provided.</p></li>
</ul>
</section>
<section id="deprecation">
<h3><a class="toc-backref" href="#id468">Deprecation</a><a class="headerlink" href="#deprecation" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.sign_up</span></code> does <em>not</em> take a <code class="docutils literal notranslate"><span class="pre">phone</span></code> argument anymore. Change
this or you will be using <code class="docutils literal notranslate"><span class="pre">phone</span></code> as <code class="docutils literal notranslate"><span class="pre">code</span></code>, and it will fail!
The definition looks like
<code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">sign_up(self,</span> <span class="pre">code,</span> <span class="pre">first_name,</span> <span class="pre">last_name='')</span></code>.</p></li>
<li><p>The old <code class="docutils literal notranslate"><span class="pre">JsonSession</span></code> finally replaces the original <code class="docutils literal notranslate"><span class="pre">Session</span></code>
(which used pickle). If you were overriding any of these, you should
only worry about overriding <code class="docutils literal notranslate"><span class="pre">Session</span></code> now.</p></li>
</ul>
</section>
</section>
<section id="added-verification-for-cdn-file-v0-12-2">
<h2><a class="toc-backref" href="#id469">Added verification for CDN file (v0.12.2)</a><a class="headerlink" href="#added-verification-for-cdn-file-v0-12-2" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/08/28</em></p>
<p>Since the Content Distributed Network (CDN) is not handled by Telegram
itself, the owners may tamper these files. Telegram sends their sha256
sum for clients to implement this additional verification step, which
now the library has. If any CDN has altered the file you’re trying to
download, <code class="docutils literal notranslate"><span class="pre">CdnFileTamperedError</span></code> will be raised to let you know.</p>
<p>Besides this. <code class="docutils literal notranslate"><span class="pre">TLObject.stringify()</span></code> was showing bytes as lists (now
fixed) and RPC errors are reported by default:</p>
<blockquote>
<div><p>In an attempt to help everyone who works with the Telegram API,
Telethon will by default report all Remote Procedure Call errors to
<a class="reference external" href="https://pwrtelegram.xyz/">PWRTelegram</a>, a public database anyone can
query, made by <a class="reference external" href="https://github.com/danog">Daniil</a>. All the information
sent is a GET request with the error code, error message and method used.</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you still would like to opt out, simply set
<code class="docutils literal notranslate"><span class="pre">client.session.report_errors</span> <span class="pre">=</span> <span class="pre">False</span></code> to disable this feature.
However Daniil would really thank you if you helped him (and everyone)
by keeping it on!</p>
</div>
</section>
<section id="cdn-support-v0-12-1">
<h2><a class="toc-backref" href="#id470">CDN support (v0.12.1)</a><a class="headerlink" href="#cdn-support-v0-12-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/08/24</em></p>
<p>The biggest news for this update are that downloading media from CDN’s
(you’ll often encounter this when working with popular channels) now
<strong>works</strong>.</p>
<section id="id188">
<h3><a class="toc-backref" href="#id471">Bug fixes</a><a class="headerlink" href="#id188" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The method used to download documents crashed because
two lines were swapped.</p></li>
<li><p>Determining the right path when downloading any file was
very weird, now it’s been enhanced.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.sign_in()</span></code> method didn’t support integer values for the code!
Now it does again.</p></li>
</ul>
<p>Some important internal changes are that the old way to deal with RSA
public keys now uses a different module instead the old strange
hand-crafted version.</p>
<p>Hope the new, super simple <code class="docutils literal notranslate"><span class="pre">README.rst</span></code> encourages people to use
Telethon and make it better with either suggestions, or pull request.
Pull requests are <em>super</em> appreciated, but showing some support by
leaving a star also feels nice ⭐️.</p>
</section>
</section>
<section id="newbie-friendly-update-v0-12">
<h2><a class="toc-backref" href="#id472">Newbie friendly update (v0.12)</a><a class="headerlink" href="#newbie-friendly-update-v0-12" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/08/22</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 70</p></td>
</tr>
</tbody>
</table>
<p>This update is overall an attempt to make Telethon a bit more user
friendly, along with some other stability enhancements, although it
brings quite a few changes.</p>
<section id="id189">
<h3><a class="toc-backref" href="#id473">Breaking changes</a><a class="headerlink" href="#id189" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code> methods <code class="docutils literal notranslate"><span class="pre">.send_photo_file()</span></code>,
<code class="docutils literal notranslate"><span class="pre">.send_document_file()</span></code> and <code class="docutils literal notranslate"><span class="pre">.send_media_file()</span></code> are now a
<strong>single method</strong> called <code class="docutils literal notranslate"><span class="pre">.send_file()</span></code>. It’s also important to
note that the <strong>order</strong> of the parameters has been <strong>swapped</strong>: first
to <em>who</em> you want to send it, then the file itself.</p></li>
<li><p>The same applies to <code class="docutils literal notranslate"><span class="pre">.download_msg_media()</span></code>, which has been renamed
to <code class="docutils literal notranslate"><span class="pre">.download_media()</span></code>. The method now supports a <code class="docutils literal notranslate"><span class="pre">Message</span></code>
itself too, rather than only <code class="docutils literal notranslate"><span class="pre">Message.media</span></code>. The specialized
<code class="docutils literal notranslate"><span class="pre">.download_photo()</span></code>, <code class="docutils literal notranslate"><span class="pre">.download_document()</span></code> and
<code class="docutils literal notranslate"><span class="pre">.download_contact()</span></code> still exist, but are private.</p></li>
</ul>
</section>
<section id="id190">
<h3><a class="toc-backref" href="#id474">Additions</a><a class="headerlink" href="#id190" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Updated to <strong>layer 70</strong>!</p></li>
<li><p>Both downloading and uploading now support <strong>stream-like objects</strong>.</p></li>
<li><p>A lot <strong>faster initial connection</strong> if <code class="docutils literal notranslate"><span class="pre">sympy</span></code> is installed (can be
installed through <code class="docutils literal notranslate"><span class="pre">pip</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libssl</span></code> will also be used if available on your system (likely on
Linux based systems). This speed boost should also apply to uploading
and downloading files.</p></li>
<li><p>You can use a <strong>phone number</strong> or an <strong>username</strong> for methods like
<code class="docutils literal notranslate"><span class="pre">.send_message()</span></code>, <code class="docutils literal notranslate"><span class="pre">.send_file()</span></code>, and all the other quick-access
methods provided by the <code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code>.</p></li>
</ul>
</section>
<section id="id191">
<h3><a class="toc-backref" href="#id475">Bug fixes</a><a class="headerlink" href="#id191" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Crashing when migrating to a new layer and receiving old updates
should not happen now.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">InputPeerChannel</span></code> is now casted to <code class="docutils literal notranslate"><span class="pre">InputChannel</span></code> automtically
too.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.get_new_msg_id()</span></code> should now be thread-safe. No promises.</p></li>
<li><p>Logging out on macOS caused a crash, which should be gone now.</p></li>
<li><p>More checks to ensure that the connection is flagged correctly as
either connected or not.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Downloading files from CDN’s will <strong>not work</strong> yet (something new
that comes with layer 70).</p>
</div>
<hr class="docutils" />
<p>That’s it, any new idea or suggestion about how to make the project even
more friendly is highly appreciated.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Did you know that you can pretty print any result Telegram returns
(called <code class="docutils literal notranslate"><span class="pre">TLObject</span></code>‘s) by using their <code class="docutils literal notranslate"><span class="pre">.stringify()</span></code> function?
Great for debugging!</p>
</div>
</section>
</section>
<section id="get-input-now-works-with-vectors-v0-11-5">
<h2><a class="toc-backref" href="#id476">get_input_* now works with vectors (v0.11.5)</a><a class="headerlink" href="#get-input-now-works-with-vectors-v0-11-5" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/07/11</em></p>
<p>Quick fix-up of a bug which hadn’t been encountered until now. Auto-cast
by using <code class="docutils literal notranslate"><span class="pre">get_input_*</span></code> now works.</p>
</section>
<section id="get-input-everywhere-v0-11-4">
<h2><a class="toc-backref" href="#id477">get_input_* everywhere (v0.11.4)</a><a class="headerlink" href="#get-input-everywhere-v0-11-4" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/07/10</em></p>
<p>For some reason, Telegram doesn’t have enough with the
<a class="reference external" href="https://tl.telethon.dev/types/input_peer.html">InputPeer</a>.
There also exist
<a class="reference external" href="https://tl.telethon.dev/types/input_channel.html">InputChannel</a>
and
<a class="reference external" href="https://tl.telethon.dev/types/input_user.html">InputUser</a>!
You don’t have to worry about those anymore, it’s handled internally
now.</p>
<p>Besides this, every Telegram object now features a new default
<code class="docutils literal notranslate"><span class="pre">.__str__</span></code> look, and also a <a class="reference external" href="https://github.com/LonamiWebs/Telethon/commit/8fd0d7eadd944ff42e18aaf06228adc7aba794b5">.stringify()
method</a>
to pretty format them, if you ever need to inspect them.</p>
<p>The library now uses <a class="reference external" href="https://github.com/LonamiWebs/Telethon/commit/1f7ac7118750ed84e2165dce9c6aca2e6ea0c6a4">the DEBUG
level</a>
everywhere, so no more warnings or information messages if you had
logging enabled.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">no_webpage</span></code> parameter from <code class="docutils literal notranslate"><span class="pre">.send_message</span></code> <a class="reference external" href="https://github.com/LonamiWebs/Telethon/commit/0119a006585acd1a1a9a8901a21bb2f193142cfe">has been
renamed</a>
to <code class="docutils literal notranslate"><span class="pre">link_preview</span></code> for clarity, so now it does the opposite (but has a
clearer intention).</p>
</section>
<section id="quick-send-message-fix-v0-11-3">
<h2><a class="toc-backref" href="#id478">Quick .send_message() fix (v0.11.3)</a><a class="headerlink" href="#quick-send-message-fix-v0-11-3" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/07/05</em></p>
<p>A very quick follow-up release to fix a tiny bug with
<code class="docutils literal notranslate"><span class="pre">.send_message()</span></code>, no new features.</p>
</section>
<section id="callable-telegramclient-v0-11-2">
<h2><a class="toc-backref" href="#id479">Callable TelegramClient (v0.11.2)</a><a class="headerlink" href="#callable-telegramclient-v0-11-2" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/07/04</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 68</p></td>
</tr>
</tbody>
</table>
<p>There is a new preferred way to <strong>invoke requests</strong>, which you’re
encouraged to use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># New!</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="p">(</span><span class="n">SomeRequest</span><span class="p">())</span>

<span class="c1"># Old.</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">SomeRequest</span><span class="p">())</span>
</pre></div>
</div>
<p>Existing code will continue working, since the old <code class="docutils literal notranslate"><span class="pre">.invoke()</span></code> has not
been deprecated.</p>
<p>When you <code class="docutils literal notranslate"><span class="pre">.create_new_connection()</span></code>, it will also handle
<code class="docutils literal notranslate"><span class="pre">FileMigrateError</span></code>‘s for you, so you don’t need to worry about those
anymore.</p>
<section id="bugs-fixes">
<h3><a class="toc-backref" href="#id480">Bugs fixes</a><a class="headerlink" href="#bugs-fixes" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fixed some errors when installing Telethon via <code class="docutils literal notranslate"><span class="pre">pip</span></code> (for those
using either source distributions or a Python version ≤ 3.5).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ConnectionResetError</span></code> didn’t flag sockets as closed, but now it
does.</p></li>
</ul>
<p>On a more technical side, <code class="docutils literal notranslate"><span class="pre">msg_id</span></code>‘s are now more accurate.</p>
</section>
</section>
<section id="improvements-to-the-updates-v0-11-1">
<h2><a class="toc-backref" href="#id481">Improvements to the updates (v0.11.1)</a><a class="headerlink" href="#improvements-to-the-updates-v0-11-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/06/24</em></p>
<p>Receiving new updates shouldn’t miss any anymore, also, periodic pings
are back again so it should work on the long run.</p>
<p>On a different order of things, <code class="docutils literal notranslate"><span class="pre">.connect()</span></code> also features a timeout.
Notice that the <code class="docutils literal notranslate"><span class="pre">timeout=</span></code> is <strong>not</strong> passed as a <strong>parameter</strong>
anymore, and is instead specified when creating the <code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code>.</p>
<section id="id192">
<h3><a class="toc-backref" href="#id482">Bug fixes</a><a class="headerlink" href="#id192" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Fixed some name class when a request had a <code class="docutils literal notranslate"><span class="pre">.msg_id</span></code> parameter.</p></li>
<li><p>The correct amount of random bytes is now used in DH request</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">CONNECTION_APP_VERSION_EMPTY</span></code> when using temporary sessions.</p></li>
<li><p>Avoid connecting if already connected.</p></li>
</ul>
</section>
</section>
<section id="support-for-parallel-connections-v0-11">
<h2><a class="toc-backref" href="#id483">Support for parallel connections (v0.11)</a><a class="headerlink" href="#support-for-parallel-connections-v0-11" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/06/16</em></p>
<p><em>This update brings a lot of changes, so it would be nice if you could</em>
<strong>read the whole change log</strong>!</p>
<section id="id193">
<h3><a class="toc-backref" href="#id484">Breaking changes</a><a class="headerlink" href="#id193" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Every Telegram error has now its <strong>own class</strong>, so it’s easier to
fine-tune your <code class="docutils literal notranslate"><span class="pre">except</span></code>‘s.</p></li>
<li><p>Markdown parsing is <strong>not part</strong> of Telethon itself anymore, although
there are plans to support it again through a some external module.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.list_sessions()</span></code> has been moved to the <code class="docutils literal notranslate"><span class="pre">Session</span></code> class
instead.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">InteractiveTelegramClient</span></code> is <strong>not</strong> shipped with <code class="docutils literal notranslate"><span class="pre">pip</span></code>
anymore.</p></li>
</ul>
</section>
<section id="id194">
<h3><a class="toc-backref" href="#id485">Additions</a><a class="headerlink" href="#id194" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>A new, more <strong>lightweight class</strong> has been added. The
<code class="docutils literal notranslate"><span class="pre">TelegramBareClient</span></code> is now the base of the normal
<code class="docutils literal notranslate"><span class="pre">TelegramClient</span></code>, and has the most basic features.</p></li>
<li><p>New method to <code class="docutils literal notranslate"><span class="pre">.create_new_connection()</span></code>, which can be ran <strong>in
parallel</strong> with the original connection. This will return the
previously mentioned <code class="docutils literal notranslate"><span class="pre">TelegramBareClient</span></code> already connected.</p></li>
<li><p>Any file object can now be used to download a file (for instance, a
<code class="docutils literal notranslate"><span class="pre">BytesIO()</span></code> instead a file name).</p></li>
<li><p>Vales like <code class="docutils literal notranslate"><span class="pre">random_id</span></code> are now <strong>automatically inferred</strong>, so you
can save yourself from the hassle of writing
<code class="docutils literal notranslate"><span class="pre">generate_random_long()</span></code> everywhere. Same applies to
<code class="docutils literal notranslate"><span class="pre">.get_input_peer()</span></code>, unless you really need the extra performance
provided by skipping one <code class="docutils literal notranslate"><span class="pre">if</span></code> if called manually.</p></li>
<li><p>Every type now features a new <code class="docutils literal notranslate"><span class="pre">.to_dict()</span></code> method.</p></li>
</ul>
</section>
<section id="id195">
<h3><a class="toc-backref" href="#id486">Bug fixes</a><a class="headerlink" href="#id195" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Received errors are acknowledged to the server, so they don’t happen
over and over.</p></li>
<li><p>Downloading media on different data centers is now up to <strong>x2
faster</strong>, since there used to be an <code class="docutils literal notranslate"><span class="pre">InvalidDCError</span></code> for each file
part tried to be downloaded.</p></li>
<li><p>Lost messages are now properly skipped.</p></li>
<li><p>New way to handle the <strong>result of requests</strong>. The old <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>
“<em>The previously sent request must be resent. However, no request was
previously sent (possibly called from a different thread).</em>” <em>should</em>
not happen anymore.</p></li>
</ul>
</section>
<section id="id196">
<h3><a class="toc-backref" href="#id487">Internal changes</a><a class="headerlink" href="#id196" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Some fixes to the <code class="docutils literal notranslate"><span class="pre">JsonSession</span></code>.</p></li>
<li><p>Fixed possibly crashes if trying to <code class="docutils literal notranslate"><span class="pre">.invoke()</span></code> a <code class="docutils literal notranslate"><span class="pre">Request</span></code> while
<code class="docutils literal notranslate"><span class="pre">.reconnect()</span></code> was being called on the <code class="docutils literal notranslate"><span class="pre">UpdatesThread</span></code>.</p></li>
<li><p>Some improvements on the <code class="docutils literal notranslate"><span class="pre">TcpClient</span></code>, such as not switching between
blocking and non-blocking sockets.</p></li>
<li><p>The code now uses ASCII characters only.</p></li>
<li><p>Some enhancements to <code class="docutils literal notranslate"><span class="pre">.find_user_or_chat()</span></code> and
<code class="docutils literal notranslate"><span class="pre">.get_input_peer()</span></code>.</p></li>
</ul>
</section>
</section>
<section id="json-session-file-v0-10-1">
<h2><a class="toc-backref" href="#id488">JSON session file (v0.10.1)</a><a class="headerlink" href="#json-session-file-v0-10-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/06/07</em></p>
<p>This version is primarily for people to <strong>migrate</strong> their <code class="docutils literal notranslate"><span class="pre">.session</span></code>
files, which are <em>pickled</em>, to the new <em>JSON</em> format. Although slightly
slower, and a bit more vulnerable since it’s plain text, it’s a lot more
resistant to upgrades.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You <strong>must</strong> upgrade to this version before any higher one if you’ve
used Telethon ≤ v0.10. If you happen to upgrade to an higher version,
that’s okay, but you will have to manually delete the <code class="docutils literal notranslate"><span class="pre">*.session</span></code> file,
and logout from that session from an official client.</p>
</div>
<section id="id197">
<h3><a class="toc-backref" href="#id489">Additions</a><a class="headerlink" href="#id197" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">.get_me()</span></code> function to get the <strong>current</strong> user.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.is_user_authorized()</span></code> is now more reliable.</p></li>
<li><p>New nice button to copy the <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">telethon.tl.xxx.yyy</span> <span class="pre">import</span> <span class="pre">Yyy</span></code>
on the online documentation.</p></li>
<li><p><strong>More error codes</strong> added to the <code class="docutils literal notranslate"><span class="pre">errors</span></code> file.</p></li>
</ul>
</section>
<section id="id198">
<h3><a class="toc-backref" href="#id490">Enhancements</a><a class="headerlink" href="#id198" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Everything on the documentation is now, theoretically, <strong>sorted
alphabetically</strong>.</p></li>
<li><p>No second thread is spawned unless one or more update handlers are added.</p></li>
</ul>
</section>
</section>
<section id="full-support-for-different-dcs-and-stable-v0-10">
<h2><a class="toc-backref" href="#id491">Full support for different DCs and ++stable (v0.10)</a><a class="headerlink" href="#full-support-for-different-dcs-and-stable-v0-10" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/06/03</em></p>
<p>Working with <strong>different data centers</strong> finally <em>works</em>! On a different
order of things, <strong>reconnection</strong> is now performed automatically every
time Telegram decides to kick us off their servers, so now Telethon can
really run <strong>forever and ever</strong>! In theory.</p>
<section id="id199">
<h3><a class="toc-backref" href="#id492">Enhancements</a><a class="headerlink" href="#id199" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Documentation</strong> improvements, such as showing the return type.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">msg_id</span> <span class="pre">too</span> <span class="pre">low/high</span></code> error should happen <strong>less often</strong>, if
any.</p></li>
<li><p>Sleeping on the main thread is <strong>not done anymore</strong>. You will have to
<code class="docutils literal notranslate"><span class="pre">except</span> <span class="pre">FloodWaitError</span></code>‘s.</p></li>
<li><p>You can now specify your <em>own application version</em>, device model,
system version and language code.</p></li>
<li><p>Code is now more <em>pythonic</em> (such as making some members private),
and other internal improvements (which affect the <strong>updates
thread</strong>), such as using <code class="docutils literal notranslate"><span class="pre">logger</span></code> instead a bare <code class="docutils literal notranslate"><span class="pre">print()</span></code> too.</p></li>
</ul>
<p>This brings Telethon a whole step closer to <code class="docutils literal notranslate"><span class="pre">v1.0</span></code>, though more things
should preferably be changed.</p>
</section>
</section>
<section id="stability-improvements-v0-9-1">
<h2><a class="toc-backref" href="#id493">Stability improvements (v0.9.1)</a><a class="headerlink" href="#stability-improvements-v0-9-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/05/23</em></p>
<p>Telethon used to crash a lot when logging in for the very first time.
The reason for this was that the reconnection (or dead connections) were
not handled properly. Now they are, so you should be able to login
directly, without needing to delete the <code class="docutils literal notranslate"><span class="pre">*.session</span></code> file anymore.
Notice that downloading from a different DC is still a WIP.</p>
<section id="id200">
<h3><a class="toc-backref" href="#id494">Enhancements</a><a class="headerlink" href="#id200" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Updates thread is only started after a successful login.</p></li>
<li><p>Files meant to be ran by the user now use <strong>shebangs</strong> and
proper permissions.</p></li>
<li><p>In-code documentation now shows the returning type.</p></li>
<li><p><strong>Relative import</strong> is now used everywhere, so you can rename
<code class="docutils literal notranslate"><span class="pre">telethon</span></code> to anything else.</p></li>
<li><p><strong>Dead connections</strong> are now <strong>detected</strong> instead entering an infinite loop.</p></li>
<li><p><strong>Sockets</strong> can now be <strong>closed</strong> (and re-opened) properly.</p></li>
<li><p>Telegram decided to update the layer 66 without increasing the number.
This has been fixed and now we’re up-to-date again.</p></li>
</ul>
</section>
</section>
<section id="general-improvements-v0-9">
<h2><a class="toc-backref" href="#id495">General improvements (v0.9)</a><a class="headerlink" href="#general-improvements-v0-9" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/05/19</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 66</p></td>
</tr>
</tbody>
</table>
<section id="id201">
<h3><a class="toc-backref" href="#id496">Additions</a><a class="headerlink" href="#id201" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>The <strong>documentation</strong>, available online
<a class="reference external" href="https://tl.telethon.dev/">here</a>, has a new search bar.</p></li>
<li><p>Better <strong>cross-thread safety</strong> by using <code class="docutils literal notranslate"><span class="pre">threading.Event</span></code>.</p></li>
<li><p>More improvements for running Telethon during a <strong>long period of time</strong>.</p></li>
</ul>
</section>
<section id="id202">
<h3><a class="toc-backref" href="#id497">Bug fixes</a><a class="headerlink" href="#id202" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Avoid a certain crash on login</strong> (occurred if an unexpected object
ID was received).</p></li>
<li><p>Avoid crashing with certain invalid UTF-8 strings.</p></li>
<li><p>Avoid crashing on certain terminals by using known ASCII characters
where possible.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">UpdatesThread</span></code> is now a daemon, and should cause less issues.</p></li>
<li><p>Temporary sessions didn’t actually work (with <code class="docutils literal notranslate"><span class="pre">session=None</span></code>).</p></li>
</ul>
</section>
<section id="id203">
<h3><a class="toc-backref" href="#id498">Internal changes</a><a class="headerlink" href="#id203" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.get_dialogs(count=</span></code> was renamed to <code class="docutils literal notranslate"><span class="pre">.get_dialogs(limit=</span></code>.</p></li>
</ul>
</section>
</section>
<section id="bot-login-and-proxy-support-v0-8">
<h2><a class="toc-backref" href="#id499">Bot login and proxy support (v0.8)</a><a class="headerlink" href="#bot-login-and-proxy-support-v0-8" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/04/14</em></p>
<section id="id204">
<h3><a class="toc-backref" href="#id500">Additions</a><a class="headerlink" href="#id204" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Bot login</strong>, thanks to &#64;JuanPotato for hinting me about how to do
it.</p></li>
<li><p><strong>Proxy support</strong>, thanks to &#64;exzhawk for implementing it.</p></li>
<li><p><strong>Logging support</strong>, used by passing <code class="docutils literal notranslate"><span class="pre">--telethon-log=DEBUG</span></code> (or
<code class="docutils literal notranslate"><span class="pre">INFO</span></code>) as a command line argument.</p></li>
</ul>
</section>
<section id="id205">
<h3><a class="toc-backref" href="#id501">Bug fixes</a><a class="headerlink" href="#id205" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Connection fixes, such as avoiding connection until <code class="docutils literal notranslate"><span class="pre">.connect()</span></code> is
explicitly invoked.</p></li>
<li><p>Uploading big files now works correctly.</p></li>
<li><p>Fix uploading big files.</p></li>
<li><p>Some fixes on the updates thread, such as correctly sleeping when required.</p></li>
</ul>
</section>
</section>
<section id="long-run-bug-fix-v0-7-1">
<h2><a class="toc-backref" href="#id502">Long-run bug fix (v0.7.1)</a><a class="headerlink" href="#long-run-bug-fix-v0-7-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/02/19</em></p>
<p>If you’re one of those who runs Telethon for a long time (more than 30
minutes), this update by &#64;strayge will be great for you. It sends
periodic pings to the Telegram servers so you don’t get disconnected and
you can still send and receive updates!</p>
</section>
<section id="two-factor-authentication-v0-7">
<h2><a class="toc-backref" href="#id503">Two factor authentication (v0.7)</a><a class="headerlink" href="#two-factor-authentication-v0-7" title="Permalink to this heading"></a></h2>
<p><em>Published at 2017/01/31</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 62</p></td>
</tr>
</tbody>
</table>
<p>If you’re one of those who love security the most, these are good news.
You can now use two factor authentication with Telethon too! As internal
changes, the coding style has been improved, and you can easily use
custom session objects, and various little bugs have been fixed.</p>
</section>
<section id="updated-pip-version-v0-6">
<h2><a class="toc-backref" href="#id504">Updated pip version (v0.6)</a><a class="headerlink" href="#updated-pip-version-v0-6" title="Permalink to this heading"></a></h2>
<p><em>Published at 2016/11/13</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 57</p></td>
</tr>
</tbody>
</table>
<p>This release has no new major features. However, it contains some small
changes that make using Telethon a little bit easier. Now those who have
installed Telethon via <code class="docutils literal notranslate"><span class="pre">pip</span></code> can also take advantage of changes, such
as less bugs, creating empty instances of <code class="docutils literal notranslate"><span class="pre">TLObjects</span></code>, specifying a
timeout and more!</p>
</section>
<section id="ready-pip-go-v0-5">
<h2><a class="toc-backref" href="#id505">Ready, pip, go! (v0.5)</a><a class="headerlink" href="#ready-pip-go-v0-5" title="Permalink to this heading"></a></h2>
<p><em>Published at 2016/09/18</em></p>
<p>Telethon is now available as a <strong>`Python
package &lt;https://pypi.python.org/pypi?name=Telethon&gt;`__</strong>! Those are
really exciting news (except, sadly, the project structure had to change
<em>a lot</em> to be able to do that; but hopefully it won’t need to change
much more, any more!)</p>
<p>Not only that, but more improvements have also been made: you’re now
able to both <strong>sign up</strong> and <strong>logout</strong>, watch a pretty
“Uploading/Downloading… x%” progress, and other minor changes which make
using Telethon <strong>easier</strong>.</p>
</section>
<section id="made-interactivetelegramclient-cool-v0-4">
<h2><a class="toc-backref" href="#id506">Made InteractiveTelegramClient cool (v0.4)</a><a class="headerlink" href="#made-interactivetelegramclient-cool-v0-4" title="Permalink to this heading"></a></h2>
<p><em>Published at 2016/09/12</em></p>
<p>Yes, really cool! I promise. Even though this is meant to be a
<em>library</em>, that doesn’t mean it can’t have a good <em>interactive client</em>
for you to try the library out. This is why now you can do many, many
things with the <code class="docutils literal notranslate"><span class="pre">InteractiveTelegramClient</span></code>:</p>
<ul class="simple">
<li><p><strong>List dialogs</strong> (chats) and pick any you wish.</p></li>
<li><p><strong>Send any message</strong> you like, text, photos or even documents.</p></li>
<li><p><strong>List</strong> the <strong>latest messages</strong> in the chat.</p></li>
<li><p><strong>Download</strong> any message’s media (photos, documents or even contacts!).</p></li>
<li><p><strong>Receive message updates</strong> as you talk (i.e., someone sent you a message).</p></li>
</ul>
<p>It actually is a usable-enough client for your day by day. You could
even add <code class="docutils literal notranslate"><span class="pre">libnotify</span></code> and pop, you’re done! A great cli-client with
desktop notifications.</p>
<p>Also, being able to download and upload media implies that you can do
the same with the library itself. Did I need to mention that? Oh, and
now, with even less bugs! I hope.</p>
</section>
<section id="media-revolution-and-improvements-to-update-handling-v0-3">
<h2><a class="toc-backref" href="#id507">Media revolution and improvements to update handling! (v0.3)</a><a class="headerlink" href="#media-revolution-and-improvements-to-update-handling-v0-3" title="Permalink to this heading"></a></h2>
<p><em>Published at 2016/09/11</em></p>
<p>Telegram is more than an application to send and receive messages. You
can also <strong>send and receive media</strong>. Now, this implementation also gives
you the power to upload and download media from any message that
contains it! Nothing can now stop you from filling up all your disk
space with all the photos! If you want to, of course.</p>
</section>
<section id="handle-updates-in-their-own-thread-v0-2">
<h2><a class="toc-backref" href="#id508">Handle updates in their own thread! (v0.2)</a><a class="headerlink" href="#handle-updates-in-their-own-thread-v0-2" title="Permalink to this heading"></a></h2>
<p><em>Published at 2016/09/10</em></p>
<p>This version handles <strong>updates in a different thread</strong> (if you wish to
do so). This means that both the low level <code class="docutils literal notranslate"><span class="pre">TcpClient</span></code> and the
not-so-low-level <code class="docutils literal notranslate"><span class="pre">MtProtoSender</span></code> are now multi-thread safe, so you can
use them with more than a single thread without worrying!</p>
<p>This also implies that you won’t need to send a request to <strong>receive an
update</strong> (is someone typing? did they send me a message? has someone
gone offline?). They will all be received <strong>instantly</strong>.</p>
<p>Some other cool examples of things that you can do: when someone tells
you “<em>Hello</em>”, you can automatically reply with another “<em>Hello</em>”
without even needing to type it by yourself :)</p>
<p>However, be careful with spamming!! Do <strong>not</strong> use the program for that!</p>
</section>
<section id="first-working-alpha-version-v0-1">
<h2><a class="toc-backref" href="#id509">First working alpha version! (v0.1)</a><a class="headerlink" href="#first-working-alpha-version-v0-1" title="Permalink to this heading"></a></h2>
<p><em>Published at 2016/09/06</em></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Scheme layer used: 55</p></td>
</tr>
</tbody>
</table>
<p>There probably are some bugs left, which haven’t yet been found.
However, the majority of code works and the application is already
usable! Not only that, but also uses the latest scheme as of now <em>and</em>
handles way better the errors. This tag is being used to mark this
release as stable enough.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../developing/telegram-api-in-other-languages.html" class="btn btn-neutral float-left" title="Telegram API in Other Languages" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="wall-of-shame.html" class="btn btn-neutral float-right" title="Wall of Shame" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017 - 2019, Lonami.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>